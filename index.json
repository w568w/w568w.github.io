[{"content":"\r\n![Photo by Nikita Kachanovsky on Unsplash](images/nikita-kachanovsky-445394-unsplash.jpg)\r\n\r\n这是个 **更新很少，更新很慢的博主**，但请相信 **Ta不会弃坑、Ta不会弃坑、Ta不会弃坑!!**\r\n  \r\n(如果想知道博主是否活着，详细联系方式[请点这里](about.w568w.html)，也可以直接看他的 [GitHub 活跃情况](https://github.com/w568w/))\r\n\r\n\u003e ## 博主存活状态指示器\r\n\u003e (用不怎么熟的 JavaScript 做的…… 可以检查博主是不是弃坑了)\r\n\u003e \r\n\u003e 当前状态: \u003cdiv id=\"tips\" style=\"color:grey; border-bottom:1px solid #000\"/\u003e\u003c/div\u003e  \r\n\r\n# 任务列表\r\n\r\n+ 找实习… \u003cspan style=\"color:red;\"\u003e(进行中)\u003c/span\u003e\r\n+ 维护[旦挞](https://github.com/DanXi-Dev/DanXi/) \u003cspan style=\"color:red;\"\u003e(进行中)\u003c/span\u003e\r\n+ 重写博客主题\r\n\r\n![](images/huaji.png)\r\n\r\n要了解我更多？轻点下面昵称(/ ω \\\\)\r\n\r\n\u003cscript src=\"todo.js\"/\u003e\r\n","cover":"images/nikita-kachanovsky-445394-unsplash.jpg","link":"todo-list.html","preview":"\u003cp\u003e看看这家伙最近在搞什么大新闻？\u003c/p\u003e\n","title":"博主的Todo List"},{"content":"\n\n![Image by: \u003ca href=https://www.flickr.com/photos/isipeoria/6691167811\u003eisipeoria\u003c/a\u003e, CC BY-NC-ND 2.0](images/languages.webp)\n\nEver since entering university, one of my pleasures has been browsing online, randomly picking up recent programming languages, delving into their features, often hoping to find those \"dream features\" I've envisioned, and attempting to build something practical with them.\n\nOver the course of several years exploring this space, I've gradually come to the realization that **every language has its flaws**. A language that looks promising at first glance will soon reveal its less-than-ideal aspects, even those lauded as \"elegant\" or \"highly modern.\" My watchlist is now overflowing with such languages. To keep myself from forgetting these issues and potentially falling back into being stung by them, I've decided to jot down these languages' hidden frustrations.\n\n\u003e (Here is where a meme should be, saying: \"*You decide to pick up a game you haven't played in a year. Ten minutes later, you finally remember why you stopped playing.*\")\n\nConsider this blog post a pure rant, and solely reflecting my *personal* views, as I'm not deeply familiar with most languages, nor do I intend to spend months thoroughly researching each one. And I'll intentionally conflate issues of the toolchain and ecosystem with those of the language itself. I've typically only written simple numerical or GUI programs in each, quickly moving on afterward. So, if anything I say rubs you the wrong way, feel free to tell me!\n\nAdditionally, some pain points recur across several languages. In such cases, I'll elaborate on them only when discussing the first language they appear in, and merely touch upon them later.\n\n# 1. Rust\n\nRust has become a blend of religious fervor and a bit of a witch hunt: some see it as a silver bullet, while others view it as a modern blight and the embodiment of rotten academic ideas, needlessly adding too much complexity. Meanwhile, the majority are quietly using it to build tools and applications.\n\nDespite all the hype and criticism, I have to say that **one of the reasons I feel most confident about an open-source project's quality** (the other being `100% Go`, which I'll explain later) is **if it's `100% Rust`**. Such projects are typically well-maintained, behave predictably, and are incredibly robust against various erroneous inputs.\n\n(🤦 In contrast, a `100% C/C++` project often feels like being told: \"*Get ready to download thirty git submodules, then install autotools, visual studio, meson, cmake, xmake, make, or whatever, then pray I haven't relied on features, functions, keywords, or macros specific to a particular compiler, third-party library or Linux kernel version, be prepared to turn off all the compiler warnings and suppress errors because my executable will literally link to EVERYTHING in your system's `lib` directories, and finally, enjoy my software!*\")\n\nBut anyway, getting back on track. While I am a Rust supporter myself, there are still aspects of Rust that I find uncomfortable:\n\n**Lack of specialization.** You cannot implement a trait for `MyVec\u003cT\u003e` and then specialize it for `MyVec\u003ci32\u003e`. This is a common feature in many languages, including C++. It allows you to write generic code while still being able to optimize for specific types. \n\nThere is a [RFC](https://github.com/rust-lang/rust/issues/31844) for it, but it has been stalled for years. The workaround? Go nightly and enable the `specialization` feature. But this is not a solution, as it is not stable and will unlikely be in the recent future.\n\n**Error and async have colors.** When you're defining a trait for others to use, its signature can severely limit what implementations can do. For example, if you write `Foo`:\n\n```rust\ntrait Foo {\n    fn foo(\u0026self) -\u003e i32;\n}\n```\n\nBut then someone complains that their `Foo` is fallible, so you introduce `TryFoo`:\n\n```rust\ntrait TryFoo {\n    fn try_foo(\u0026self) -\u003e Result\u003ci32, Box\u003cdyn Error\u003e\u003e;\n}\n```\n\nBut wait, someone else needs their `Foo` operation to be asynchronous, leading you to create `AsyncFoo`:\n\n```rust\n#[async_trait::async_trait]\ntrait AsyncFoo {\n    async fn async_foo(\u0026self) -\u003e i32;\n}\n```\n\nAns don't forget `TryAsyncFoo`! Now, for what was originally just one concept, you might end up needing to declare four different traits. This is ridiculous. A viable solution would be to [introduce something like algebraic effects](https://github.com/rosefromthedead/effing-mad), but that is a whole different topic.\n\n**Complex macro system.** Macros are powerful, and everyone loves using them. But have you ever heard of a programming language with so many different types of macros? I'm talking about *declarative macros*, and *procedural macros* (which further split into *function-like*, *attribute*, and *derive macros*).\n\nFor each type, you need to learn and remember complex helper tools, syntax rules, and new concepts, figure out [what \"Hygiene\" is](https://veykril.github.io/tlborm/syntax-extensions/hygiene.html), and how to debug a macro expansion. Creating a procedural macro inevitably means creating a new crate and learning how to use libraries like `proc-macro2`, `quote`, and `syn`.\n\nAs for complex macro functions, they eventually devolve into an AST parsing, traversal, and manipulation hell that no one, except the original author, can really understand or maintain. (Usually even the original author can't understand it anymore, and they have to spend hours trying to remember what they were thinking when they wrote it.)\n\nDespite excellent resources like [*The Little Book of Rust Macros*](https://veykril.github.io/tlborm/), which attempts to explain these concepts clearly, I still find it regrettable that Rust doesn't make these things easily understandable for a novice. For beginners, how things like `println!` actually work under the hood remains a mystery. And to understand the internals, they have to climb the entire Rust \"mountain\" and read various blogs and tutorials on macros. By then, however, they are no longer beginners. [^1]\n\n[^1]: I know this example is controversial, as beginners in C/C++ and other languages also can't and shouldn't try to understand the internals of standard library functions like `printf` and `iostream`, but you get my point.\n\n**Slow type checking.** I know this is tied to Rust's complexity—every save requires running the borrow checker, expanding all macros, completing all type inference, and meticulously checking the code to provide those insightful error messages—but I sometimes still feel the check process is a bit slow.\n\nWhat I mean is, they *have* optimized it really well. But look at Zig (with [zls](https://github.com/zigtools/zls)) and Go – they can provide error feedback almost instantly (\u003c=100ms), which really boosts development comfort. In contrast, Rust analyzer typically takes several seconds to check a medium-sized file. This transforms the \"write code - review code\" loop into a \"write code - save file - hands off keyboard while waiting for `cargo check` - check and fix errors - review code\" loop. For some people doing actual coding (like myself), this can feel a bit uncomfortable.\n\n# 2. Go\n\nGo is a language I have a love-hate relationship with. I love its simplicity, its focus on concurrency, and its excellent tooling. Damn, `go build` is a godsend after dealing with CMake, autotools, and other sh*ts.\n\nIts \"*errors are return values*\" philosophy is a breath of fresh air compared to the exceptions and try-catch blocks of other languages. And it has proved that even without rigorous error systems like Rust and Haskell, you can still write simple and maintainable code. It does find a good balance between simplicity and robustness.\n\nBut sometimes it is just way too simple.\n\n**Wrong type abstraction.** Go models error returns using a *product* type – essentially a tuple of `(Value, Error)` – when arguably, the correct approach is a *sum* type, representing *either* a `Value` *or* an `Error`.\n\nCompared to simply returning an error, you now have to write `return 0, err`, `return \"\", err`, or `return nil, err`. This is awkward.\n\n\u003e I guess someone will argue, \"But what about the case where you *do* have both a value and an error? Go's approach is more flexible!\"\n\u003e\n\u003e And my point is, that specific situation requires a more complex sum type representing *either* a `Value` *or* an `Error` *or* `(PartialValue, Error)`. A simple `(Value, Error)` tuple as the *standard* way to represent success *or* failure isn't the right model. Even if, by coincidence, the `(Value, Error)` tuple *can* represent three different states, you still have to explicitly check for `value != nil \u0026\u0026 error == nil`, `value == nil \u0026\u0026 error != nil`, and potentially `value != nil \u0026\u0026 error != nil` later on.  \n\u003e See what's happening? You're effectively reinventing a sum type and the simple pattern matching that comes with it.\n\nYou can see this limitation elsewhere as well. For example, you can't declare a pointer or interface return type that must be non-nil.\n\n**Lack of optimization.** Go is advertised as \"native\", \"minimal\", and \"fast\". But in reality, it is not (at least for the last two points). Go does have basic optimizations, like escaping analysis and dead code elimination. But that's about it.\n\nIt has a simple GC: no young/old split, no moving, no bump pointer allocation. Latency is low, but throughput is not. Someone is [moving away from it](https://discord.com/blog/why-discord-is-switching-from-go-to-rust) because of this. [^2]\n\n**Generic type is a joke.** I won't go into the details of this. You got my point.\n\n---\n\n(To be continued, too lazy to write more right now 😅)\n\n[^2]: Though there are criticisms that Discord team never really reached out to the Go team for optimizing the rare cases on Go sides and just rewrote the whole thing in Rust with more performance consideration. But I'm not in favor of this viewpoint: not everyone has the time and resources to communicate with the Go team to understand what they did wrong and who to blame. You are not Discord, nor am I. Are we supposed to just accept these performance degradations when dealing with the tail cases?\n","cover":"images/languages.webp","link":"stung-by-every-lang.html","preview":"\u003cp\u003eProgramming languages are like a box of chocolates. You never know what you\u0026rsquo;re gonna get\u003c/p\u003e\n","title":"[EN] Stung by Every Language"},{"content":"\r\n\r\n# Lazarus\r\n\r\n- 编程语言：Object Pascal\r\n- 支持平台：Windows、Linux、macOS、iOS、FreeBSD、Android、Windows CE、Embedded\r\n\r\n**💪优点**\r\n\r\n- 有一个所见即所得的界面设计器\r\n- 完整的 IDE 支持，在 Lazarus IDE 中即可完成所有开发工作\r\n- 编译速度快，生成的可执行文件体积小，不再依赖其他框架\r\n\r\n**🤔缺点**\r\n\r\n- Object Pascal 是一种较为陈旧且冗长的语言，不太适合新手。可以说，在 2024 年，提到 Object Pascal 唯一的用途就是 Delphi 和 Lazarus 了，学习该语言的其他用途几乎为零。自然地，你也不可能找到较好的第三方库和模块支持，这就使得对碎片化严重的平台（如 Linux 和 Android）的支持意义变得很小\r\n- Lazarus IDE 功能较为简陋，但整个开发流程又被完全绑定在 Lazarus IDE 上，使得开发效率较低。对于习惯 Visual Studio、Xcode 等现代 IDE 的开发者来说，这绝对是一场灾难：例如，所有设置和菜单项的位置都摆放随意，作为一个接近十年开发经验的开发者，我竟然在 IDE 中花了 10 分钟才找到如何设置编译选项\r\n\r\n# ImGui\r\n\r\n- 编程语言：C++（以及几乎所有常见语言的绑定，例如 C#、Rust、Go…）\r\n- 支持平台：官方维护的后端基本已经支持了所有常见桌面、移动、嵌入式平台（DirectX9/11/12、OpenGL、Metal、SDL、Vulkan、WebGPU…）\r\n\r\n**💪优点**\r\n\r\n- 足够轻量（本身只有一个头文件和一个 cpp 文件），可以很方便地集成到任何项目中\r\n- 兼容性绝对是杀手级别，你可以使用几乎任何语言为任何平台开发基于 ImGui 的应用\r\n- 扩展性好，容易迁移到新的设备或平台上\r\n- 流行度高，已经被广泛应用于游戏开发、工具开发等领域\r\n- 非常精简，编译体积甚至比 Lazarus 生成的可执行文件还要小\r\n\r\n**🤔缺点**\r\n\r\n- 轻量有的时候意味着简陋。例如，至今没有好办法在 ImGui 中实现一个多行文本框，这在很多应用场景下是必须的（尽管当我们谈到文字处理时，[事情总是变得复杂](https://faultlore.com/blah/text-hates-you/)[^1]）\r\n- 立即模式 GUI 有时候并不是一个好的选择：每帧重新绘制整个界面对复杂应用来说肯定是一个性能瓶颈，而且任何动画和复杂的控件交互都需要自己从头实现\r\n- 完全利用图形 API 绘制界面，意味着会有更高的 GPU 占用，并且不利用原生控件也使得其控件风格和系统原生控件有较大差异\r\n\r\n\r\n[^1]: 另外，[文本编辑也讨厌你](https://lord.io/text-editing-hates-you-too/)。\r\n\r\n# wxWidgets\r\n\r\n- 编程语言：C++、Python（还有其他语言的绑定，但要么不完善，要么已经停止维护）\r\n- 支持平台：Windows、Linux、macOS\r\n\r\n**💪优点**\r\n\r\n- 直接使用系统原生控件进行绘制，风格契合度和性能都很好\r\n- 控件数量相对比较丰富\r\n- 编译体积也相对比较轻量\r\n\r\n**🤔缺点**\r\n\r\n- 官方教程年久失修，很多函数没有文档注释，很多功能的使用方法也需要查阅第三方教程\r\n- 偏向 MFC 时代的 API 设计风格（尽管他们实际上有一套新的不太成熟的 API），对于新手来说学习曲线较陡\r\n- 编写布局的方法较为繁琐。其 RAD 工具也不太好用，让本就缓慢的 C++ 编译速度变得更加难以忍受\r\n\r\n# FLTK\r\n\r\n- 编程语言：C++、Rust\r\n- 支持平台：Windows、Linux、macOS\r\n\r\n**💪优点**\r\n\r\n- [内存占用极低](https://szibele.com/memory-footprint-of-gui-toolkits/)、[依赖体积较小](https://ironoxidizer.github.io/gui-toolkit-benchmarks/)\r\n- 简单的、基于代码的布局 API\r\n\r\n**🤔缺点**\r\n\r\n- 控件数量较少，功能较为简陋\r\n- 控件的风格和系统原生控件有较大差异，并且非常原始，看起来像来自 Windows 95 时代（尽管 Rust 绑定的维护者编写了一些新的主题，努力改善这一点）\r\n- 中文支持不佳，在 Windows 下的字体渲染效果差\r\n\r\n# Fyne\r\n\r\n- 编程语言：Go\r\n- 支持平台：Windows、Linux、macOS、iOS、FreeBSD、Android\r\n\r\n**💪优点**\r\n\r\n- 使用 Go 也算是一个优点？\r\n\r\n**🤔缺点**\r\n\r\n- 编译体积较大，[即使空项目也有 10~20MB 左右](https://github.com/fyne-io/fyne/issues/2393)\r\n- 使用自己的控件风格，与系统原生控件有一定差异（但相对比较现代）\r\n- 社区资源较少，学习资料不多，组件数量也不多（实际上维护也不是很活跃）\r\n\r\n# Slint\r\n\r\n# SWT\r\n\r\n# GTK4\r\n\r\n# 易语言\r\n\r\n- 编程语言：易语言\r\n- 支持平台：Windows、Linux（仅控制台，不支持 GUI）\r\n\r\n**💪优点**\r\n\r\n- 语法简单，基本是中文版的 Visual Basic，适合初学者\r\n- 有一个所见即所得的界面设计器\r\n- 有大量的第三方库和模块支持，诸多优秀的中文教程和社区\r\n- 编译体积和 VB 一样小，比 Lazarus 生成的可执行文件还要小\r\n\r\n**🤔缺点**\r\n\r\n- 很难写出紧凑高效的代码。语言本身的局限性很大，很多功能都需要调用系统 API 才能实现\r\n- 难以用 Git 等现代版本控制工具管理代码\r\n- 仅支持 Windows 平台\r\n- 上一版本以来已停止更新 1 年多，未来前景不明朗\r\n\r\n# aardio\r\n\r\n- 编程语言：Lua（使用 aardio 标准库，有一定魔改）\r\n- 支持平台：Windows\r\n\r\n**💪优点**\r\n\r\n- 完善的中文文档、教程和社区，自称已经有 20 年历史，目前仍在活跃更新\r\n- 有一个所见即所得的界面设计器\r\n- 语法简单，适合初学者，也支持调用外部语言\r\n- 编译体积和易语言类似，专注于 Windows 平台\r\n\r\n**🤔缺点**\r\n\r\n- 仅支持 Windows 平台\r\n- 只能使用 aardio IDE 进行开发，功能较为简陋\r\n\r\n\r\n# 参考\r\n\r\n- https://blog.royalsloth.eu/posts/sad-state-of-cross-platform-gui-frameworks/\r\n- https://ironoxidizer.github.io/gui-toolkit-benchmarks/\r\n- https://xylt.github.io/windows-ui/","cover":"images/nokia-2617880_1280.jpg","link":"native-gui-framework.html","preview":"\u003cp\u003e以及对一批原生 GUI 框架的简单评测\u003c/p\u003e\n","title":"通往原生 GUI 之路"},{"content":"\r\n\r\n![Photo by \u003ca href=https://unsplash.com/@wtrsnvc?utm_content=creditCopyText\u0026utm_medium=referral\u0026utm_source=unsplash\u003ewtrsnvc _\u003c/a\u003e on \u003ca href=https://unsplash.com/photos/a-cell-phone-sitting-on-top-of-a-table-EE7NvZ9klZo?utm_content=creditCopyText\u0026utm_medium=referral\u0026utm_source=unsplash\u003eUnsplash\u003c/a\u003e](images/j2me_phone.webp)\r\n\r\n# 1. History Time (Skip if not interested)\r\n## 1.1. The Rise of Java ME, and…\r\nBack in 2001, game developers gathered at the JavaOne conference in San Francisco to hear about the latest in Java technology, where they saw a famous hedgehog running on a mobile phone screen, moving faster than anything they had ever seen before. This was the first time that Java ME was introduced to the world, and as Gameloft put it, “a revolution was coming”. \r\n\r\nIn the next couple of years, this technology would bring us some of the most iconic games in the history of mobile gaming, such as the famous Snake game on Nokia phones, Prince of Persia, and the legendary Asphalt series. It was such a huge success that old protocols like WAP and [Qualcomm’s BREW](https://en.wikipedia.org/wiki/Binary_Runtime_Environment_for_Wireless)[^1] were quickly forgotten, and Java ME became the standard for mobile game development. In 2013, there were over 3 billion devices running Java ME. From Nokia to Sony Ericsson, from Motorola to Samsung, every phone manufacturer was advertising their Java ME compatibility.\r\n\r\nJava ME consists of two profiles: \r\n\r\n1. **CLDC** (Connected Limited Device Configuration), which defines the minimum language features and libraries that a Java ME device must have, and \r\n2. **MIDP** (Mobile Information Device Profile), which defines the APIs to manipulate the device's GUI, messaging and storage capabilities.\r\n\r\nBesides, most devices also support the **JSR** (Java Specification Requests) APIs and their own proprietary APIs (Nokia, Samsung, Siemens, and Sprint to name a few) to extend the capabilities of bluetooth, camera, 3D graphics, etc.\r\n\r\nCurrently, most J2ME phones you find are with MIDP 2.1 and CLDC 1.1, which is the most common configuration for J2ME game developers. Both of them are published before 2006[^2].\r\n\r\n## 1.2. …the Fall of Java ME\r\n\r\nThe next big step in the mobile games market would come in 2007, Apple, at this point in time, was very successful, with their computers as the main commercial competitor to Microsoft’s Windows and their iPod brand being the biggest MP4 brand in the market, yet it was a fraction of what it is today. The iPhone was described then by Steve Jobs as “an iPod, a Phone and an internet communicator”, it was “not a smartphone” because those are “complicated to use” and the iPhone was meant for everyone, making it perfect for mobile games.\r\n\r\nNot long after the release of the iPhone, Google would release their response, the Android was developed by the Open Handset Alliance, a consortium of firms from different fields mostly related to mobile phones, with its biggest contributor being Google. It was the open source version of what Apple was doing with the iPhone, the Linux to their OS X.[^3]\r\n\r\nThe after story is well known, the iPhone and Android dominated the market, Windows Phone and BlackBerry OS rapidly lost market share, and Java ME was left behind. The last version of Java ME, Oracle Java ME 8.3, was released in 2018, and the last phone to support Java ME was [said to be](https://www.reddit.com/r/dumbphones/comments/ut4vko/probably_the_last_nokia_phone_to_support_java/) the Nokia 3310 3G, released in 2017.\r\n\r\n# 2. How to Build a Java ME Game in 2024\r\nOut of curiosity, I decided to try building a Java ME application a few days ago. Although most links and resources are no longer available, with some persistence, I managed to find a way to build it on my Windows 11 24H2 machine. Here’s a step-by-step guide.\r\n\r\n\r\n## 2.1. Prerequisites\r\nYou need to meet the following system requirements:\r\n\r\n- Windows (any version, as long as you can run Oracle JDK 8), or\r\n- Linux (I haven’t tested it, but it should work)\r\n- 32-bit is better; 64-bit requires some extra steps to run the emulator\r\n\r\n## 2.2. Install Oracle JDK 8\r\nThe Java ME SDK requires Oracle JDK to run, and it has only been officially tested with Oracle JDK 5. Since Oracle JDK 5 is no longer available, I installed **Oracle JDK 8** instead. You can download it [here](https://www.oracle.com/jp/java/technologies/javase/javase8-archive-downloads.html).\r\n\r\n## 2.3. Install Java ME SDK\r\n\r\nOriginally, the J2ME SDK was called \"*Java Wireless Toolkit (WTK)*\", which was formly known as \"*J2ME Wireless Toolkit*\", developed by Sun Microsystems. Later it was integrated into Oracle Java ME SDK 3.0. \r\n\r\nSince our development tools don't support Oracle Java ME SDK 8.3 and only have some partial support for Oracle Java ME SDK 8.0 (believe it or not, the previous version of 8.0 is 3.x!), and I'm very disappointed with the Java ME SDK after several failed attempts, I decided to use the old \"*Java Wireless Toolkit*\" instead. **If you managed to get Oracle Java ME SDK 8.3 working, please let me know!**\r\n\r\nGoogle *Sun Java Wireless Toolkit* or just download it [here](https://www.oracle.com/java/technologies/sun-java-wireless-toolkit.html). \r\n\r\nRun the setup, select where the JDK 8 is installed, and install it to a directory, say, `C:\\WTK2.5.2_01`.\r\n\r\n## 2.4. Install Eclipse IDE\r\nThere are only two IDEs that support Java ME development: [NetBeans](https://netbeans.apache.org/) and [Eclipse](https://eclipseide.org/). I chose Eclipse because it’s more lightweight and I’m more familiar with it.\r\n\r\nHowever, the J2ME plugin for Eclipse is incompatible with the latest version of Eclipse, so you need to download an older version of Eclipse. To be specific, the lastest version that supports J2ME development is **Eclipse 4.5** (Mars). You can download it [here](https://www.eclipse.org/downloads/packages/release/mars/r/eclipse-ide-java-developers).\r\n\r\n## 2.5. Install MTJ Plugin\r\n[MTJ (Mobile Tools for Java™)](https://projects.eclipse.org/projects/tools.mtj/) is a plugin for Eclipse that provides features for developing Java ME applications. \r\n\r\nHowever, it has been [archived due to \"lack of development activity\"](https://gitlab.eclipse.org/eclipsefdn/emo-team/emo//issues/579) and is no longer available in the Eclipse Marketplace. \r\n\r\n\u003e **Notes**\r\n\u003e\r\n\u003e If you are experimenting with J2ME SDK 8.3, note that the official *Oracle Java ME SDK 8.3 Eclipse Plugins* requires MTJ as its dependency (which should be originally automatically fetched from the Eclipse Marketplace), so you need to install MTJ first, or you will meet [\"dependency not found\" errors](https://www.eclipse.org/forums/index.php/t/1114613/).\r\n\r\nNowadays, you can only download the whole MTJ project archive [here](http://archive.eclipse.org/archived_projects/mtj.tgz), around 2 GB.\r\n\r\nAfter downloading, extract the archive and get the zip archive at `downloads/downloads/drops/\u003cversion\u003e/org.eclipse.mtj.update-site-\u003cversion\u003e.zip`. Choose the latest version (i.e. `2.0.1`) and install it in Eclipse by `Help` -\u003e `Install New Software` -\u003e `Add` -\u003e `Archive` -\u003e select the zip archive. Restart Eclipse after installation.\r\n\r\n## 2.6. Configure the Plugin with SDK\r\nAfter installing the plugin, you need to configure it before you can start developing. Go to `Window` -\u003e `Preferences` -\u003e `Java ME`, set `WTK Root` to the directory where you installed the JWT.\r\n\r\nThen turn to `Device Management`, if you see some devices under a group named `Sun Java Wireless Toolkit`, you are good to go. If not, you need to add WTK devices manually by clicking `Manual Install` and selecting the root directory of the WTK to scan for devices.\r\n\r\n\u003e **Explanation of \"Device\" in Java ME**\r\n\u003e\r\n\u003e In Java ME, a \"device\" is a set of profiles which define the language and API capabilities of a target, where the SDK libraries and tools used to build an application is located, and how the application is run and debugged in an emulator (or a real device). Generally speaking, a device defines everything the build system needs to know about the target platform.\r\n\r\nThere may be some devices named \"*SDK Provider Test Clamp*\". Do **NOT** use them, as they are dummy devices for testing the SDK itself.\r\n\r\n## 2.7. Create a New Project\r\n\r\nNow you can create a new project! Start by selecting `File` -\u003e `New` -\u003e `Java ME Project`. You can choose a project name, the MIDP version, and the CLDC version. \r\n\r\nNote that you need to select a WTK device you added in the previous step, **NOT** the *SDK Provider Test Clamp*. In my case, I chose *DefaultColorPhone*, which seems to be a common device for J2ME development.\r\n\r\n## 2.8. Write Your Code\r\n\r\nYou can now write your code in the `src` folder. The structure of a J2ME project is similar to an average Java project, with a `src` folder for source code and a `res` folder for resources. \r\n\r\nYou need at least a `MIDlet` class (like `Activity` in Android) for a GUI application. I will not go into details about J2ME programming here, and you can find some good tutorials [here](https://github.com/hstsethi/awesome-j2me).\r\n\r\n## 2.9. Run Your Application\r\nIf you are on a 32-bit system, you can run your application directly in the emulator by right-clicking the project and selecting `Run As` -\u003e `Emulated Java ME MIDlet`. But on 64-bit, you might meet the following error:\r\n\r\n```\r\njava.lang.UnsatisfiedLinkError: C:\\WTK2.5.2_01\\bin\\sublime.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform\r\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941)\r\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1824)\r\n\tat java.lang.Runtime.load0(Runtime.java:809)\r\n\tat java.lang.System.load(System.java:1086)\r\n\tat com.sun.kvem.Sublime.\u003cinit\u003e(Sublime.java:29)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat java.lang.Class.newInstance(Class.java:442)\r\n\tat com.sun.kvem.Lime.createLime(Lime.java:40)\r\n\tat com.sun.kvem.KVMBridge.\u003cinit\u003e(KVMBridge.java:46)\r\n\tat com.sun.kvem.KVMBridge.getBridge(KVMBridge.java:37)\r\n\tat com.sun.kvem.midp.MIDP.run(MIDP.java:699)\r\n\tat com.sun.kvem.environment.EmulatorInvoker.runEmulatorImpl(EmulatorInvoker.java:107)\r\n\tat com.sun.kvem.environment.EmulatorInvoker.main(EmulatorInvoker.java:135)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.sun.kvem.environment.JVM.main(JVM.java:103)\r\n```\r\n\r\nI haven't found a solution for this yet, but you can build the project to a `.jar` file and run it on a real device or an emulator like [KEmulator](https://archive.org/details/KEmulator103) or [J2me Loader](https://github.com/nikita36078/J2ME-Loader) on Android. Just click `Application Descriptor` in the project and select `Create Package` to build the `.jar` file under the deploy folder.\r\n\r\n# 3. Conclusion\r\nThat’s it! You have successfully built a Java ME application in 2024. Although Java ME is no longer popular, it’s still a fun (*cough*) way to learn old Java programming. \r\n\r\nIf you have any questions or suggestions, feel free to leave a comment.\r\n\r\n\r\n[^1]: Though in some countries (like China), many \"contract phones\" (phones that are given to you for free when you sign a contract with a carrier) continued to provide BREW downloading services and Chinese game developers continued to develop casual games for it until 2020s. I remember myself still playing a carrier-supplied version of [NS-Shaft](https://web.archive.org/web/20031225175439/http://www.nagi-p.com/) on a [ZTE-C R580](https://baike.baidu.com/item/%E4%B8%AD%E5%85%B4%20R580) around 2019. (**Edit**: Later I found that the platform may be actually *MRP* instead of *BREW*, an application format running in *SKYEngine* developed by [Hangzhou Sky Moblie Co., Ltd.](http://www.sky-mobi.com/). The time has been too long, and my memory has become blurred.) \r\n[^2]: https://stackoverflow.com/questions/35430661/java-me-version-history\r\n[^3]: https://exaud.com/blog/the-history-of-mobile-video-games-part-iii","cover":"images/j2me_phone.webp","link":"j2me-2024.html","preview":"\u003cp\u003eThe hardest way to learn Java in 2024!\u003c/p\u003e\n","title":"[EN] Notes on Java ME Development in 2024"},{"content":"\r\n\r\n![Image by: \u003ca href=https://www.maketecheasier.com/assets/uploads/2023/12/amd-ryzen-ai-featured.jpeg\u003esource\u003c/a\u003e](images/amd.webp)\r\n\r\nAMD has been making some noise in the AI space recently, with the determination to catch up with [Intel](https://www.intel.com/content/www/us/en/products/details/processors/core-ultra.html) and [Qualcomm](https://www.qualcomm.com/products/mobile/snapdragon/smartphones/mobile-ai) in the personal AI computing market. The company has released a series of processors with AI accelerators, including the Ryzen 7000, 8000 and AI 300 series, equipped with the so-called [AMD Ryzen™ AI](https://www.amd.com/en/products/processors/consumer/ryzen-ai.html) technology. These processors are designed to accelerate AI workloads, especially on Windows, such as [Windows Copilot+](https://learn.microsoft.com/en-us/windows/ai/npu-devices/) features, allowing users to upscale images, generate text, and more on the local device.\r\n\r\nWhen we talk about AMD's ***competence*** in its software stacks, I have never failed to be impressed by the company's ***incompetence*** in providing a comprehensive software ecosystem, after such a mess with the [ROCm](https://rocmdocs.amd.com/en/latest/) project: a joke of a project developed by AMD but not even compatible with the AMD consumer GPUs except for a few recent models, and [a corporate competition and personal career upheaval](https://www.tomshardware.com/pc-components/gpus/amd-asks-developer-to-take-down-open-source-zluda-dev-vows-to-rebuild-his-project) concerning [ZLUDA](https://github.com/vosen/ZLUDA), a hobby project that simulates CUDA on AMD GPUs and beats ROCm in terms of compatibility and [performance](https://opendata.blender.org/benchmarks/query/?device_name=AMD%20Radeon%20RX%207900%20XT\u0026compute_type=OPTIX\u0026compute_type=CUDA\u0026compute_type=HIP\u0026compute_type=METAL\u0026compute_type=ONEAPI\u0026blender_version=4.2.0\u0026group_by=device_name).\r\n\r\nThus, when it comes to new AI infrastructure, I am always skeptical about AMD's ability to provide a good software stack, and they don't fail to disappoint me. The Ryzen AI processors are published with a brand new architecture called [AMD XDNA™](https://www.amd.com/en/technologies/xdna.html), kind of a NPU with its own on-chip memory tiles and VLIW SMID instructions. And - ***surprise!*** - a totally novel SDK called [Ryzen AI SDK](https://ryzenai.docs.amd.com/) is provided to developers to utilize the AI accelerators on these processors (did I mention that ROCm is the abbreviation of \"Radeon Open Compute\", which uses HIP (Heterogeneous-Compute Interface for **Portability**) as its programming model?). No compatibility with ROCm or OpenCL. Oh yeah, portability, that's what AMD is ***good*** at.\r\n\r\nPutting aside the nonsense, I decided to give it a try and see how well these processors can run some LLMs. It came out that **it just works**, if you are willing to put up with the lack of documentation and the poor software support. Here is a brief documentation of my experience.\r\n\r\n## 1. System requirements\r\n\r\n- **A Ryzen AI processor.** I used a [Ryzen™ 7 8845HS](https://www.amd.com/en/products/processors/laptop/ryzen/8000-series/amd-ryzen-7-8845hs.html) in my test. Check the product page for whether your processor is supported.\r\n    - **Note:** Also check what family your processor is in on the product page. For pre-STX (i.e. Phoenix and Hawk Point) processors, you need to use the PHX variant of the SDK. For STX (Strix) processors, you need to use the STX variant of the SDK.\r\n- **A Windows 11 device.** The Ryzen AI SDK and documentation is only available on Windows, although [a Linux kernel driver](https://github.com/amd/xdna-driver) is recently published.\r\n- **Conda.** The SDK heavily relies on Conda for package management. \r\n- **A model in GGUF format.** The SDK is said to support ONNX, AWQ and SmoothQuant models, but I only tested the GGUF format. Note that the SDK only supports models with `Q4_0` quantization.\r\n\r\n## 2. Install the driver\r\nFirst, you need to install the NPU driver from the [official website](https://ryzenai.docs.amd.com/en/latest/inst.html). \r\n\r\nAt the moment, the driver is gated behind a registration wall, so you need to sign up for an AMD account to download it.\r\n\r\n\u003e **Note**\r\n\u003e\r\n\u003e You don't need to install `Ryzen AI Software` on the website above. That SDK is for image processing tasks, not for running LLMs.\r\n\r\nAfter installation, you can check if the driver is installed correctly by check `Device Manager` in Windows. You should see a new device called `NPU Compute Accelerator Device` under `Neural processors` category. And in the `Task Manager`, you should see a new device called `NPU` in the `Performance` tab.\r\n\r\n\u003e **Tip**\r\n\u003e\r\n\u003e The NPU driver also comes with a command-line tool called `xrt-smi`, similar to `nvidia-smi` for NVIDIA GPUs. You can use it to monitor the NPU usage and temperature. \r\n\u003e\r\n\u003e By default, the tool is installed at `C:\\Windows\\System32\\AMD\\xrt-smi.exe` and not added to the system PATH. You can add it to the PATH manually or run it with the full path.\r\n\r\n## 3. Build the environment\r\nMost of our following steps will be done with the offical SDK [amd/RyzenAI-SW](https://github.com/amd/RyzenAI-SW); to be specific, the llama.cpp fork at `example/transformers/ext/llama.cpp`.\r\n\r\nClone the repository first in your PowerShell:\r\n\r\n```powershell\r\ngit lfs install # Install Git LFS if you haven't\r\ngit clone https://github.com/amd/RyzenAI-SW.git # Clone the repository. Be patient, it's a large repository around 2~3 GB\r\n```\r\n\r\nThen, build the llama.cpp following the instructions at `example/transformers/models/llm_gguf`:\r\n\r\n```powershell\r\n# 1. Create the Conda environment. Be patient, it could take a while\r\ncd RyzenAI-SW/example/transformers/\r\n$TRANSFORMERS_ROOT=$PWD\r\nconda env create --file=env.yaml\r\nconda activate ryzenai-transformers\r\n\r\n# 2. Setup the environment variables. Use the correct setup script according to your processor family\r\n.\\setup_\u003cphx/stx\u003e.ps1\r\n\r\n# 3. Build \u0026 Install the RyzenAI C++ Library\r\ncd $TRANSFORMERS_ROOT\\ops\\cpp\r\ncmake -B build\\ -DCMAKE_INSTALL_PREFIX=\"$env:CONDA_PREFIX\"\r\ncmake --build build\\ --config=Release\r\ncmake --install build\\ --config=Release\r\n\r\n# 4. Build the llama.cpp\r\ncd $TRANSFORMERS_ROOT\\ext\\llama.cpp\r\ncmake -B build\\ -DCMAKE_PREFIX_PATH=\"$env:CONDA_PREFIX;$env:XRT_PATH\" -DLLAMA_RYZENAI=ON\r\ncmake --build build\\ --config=Release\r\n```\r\n\r\nAnd that's it! You can now obtain the llama.cpp executable with RyzenAI support at `$TRANSFORMERS_ROOT\\ext\\llama.cpp\\build\\bin\\Release\\main.exe`.\r\n\r\n## 4. Run the model\r\nLet's have a try:\r\n\r\n```powershell\r\n.\\main.exe -m Meta-Llama-3-8b-Instruct.Q4_0.gguf -e -t 4 -n 400 -p \"Building a website can be done in 10 simple steps:\\nStep 1:\"\r\n```\r\n\r\nAnd here it is. Bam!\r\n\r\n![Your-CPU-Is-Secretly-A-GPU™](images/llm-on-npu-screenshot.webp)\r\n\r\n# Conclusion\r\nHonestly speaking, the NPU performance is not impressive. The model I tested is a 7B parameter model with `Q4_0` quantization, and it took around 70 seconds to load the model and 80 seconds to generate \\~400 tokens:\r\n\r\n```\r\nllama_print_timings:        load time =   68599.20 ms\r\nllama_print_timings:      sample time =      13.88 ms /   400 runs   (    0.03 ms per token, 28818.44 tokens per second)\r\nllama_print_timings: prompt eval time =     773.69 ms /    19 tokens (   40.72 ms per token,    24.56 tokens per second)\r\nllama_print_timings:        eval time =   79234.49 ms /   399 runs   (  198.58 ms per token,     5.04 tokens per second)\r\nllama_print_timings:       total time =   80166.82 ms /   418 tokens\r\n```\r\n\r\nThe performance is around 5 tokens per second, which is far from the performance of an ordinary GPU or a TPU. I would say it is slower than running AVX512 or Vulkan Compute on its CPU or iGPU, Radeon 780M Graphics (did I mention that it is the most powerful consumer iGPU at the moment?).\r\n\r\nHowever, RyzenAI-SW is said to be a [proof-of-concept project](https://ryzenai.docs.amd.com/en/latest/llm_flow.html) with bare minimum functionality and no optimization. The performance could be improved in the future with better optimization and more features. AMD already has several [highly-optimized models in their hands](https://account.amd.com/en/member/ryzenai-sw-ea.html), but they are not open to the public yet and require enterprise contracts to access. [The image processing tasks are said to be more mature and optimized](https://www.amd.com/en/developer/resources/technical-articles/model-pipelining-on-npu-and-gpu-using-ryzen-ai-software.html), so if you are interested in image processing tasks, you might want to [give it a try](https://github.com/amd/RyzenAI-SW/tree/main/demo/NPU-GPU-Pipeline).\r\n\r\nIn conclusion, the Ryzen AI processors are a promising start for AMD to catch up with the AIPC hype, but they still have a long way to go to catch up with Intel in terms of software support and performance. If you are a researcher or a developer, you might want to wait for a while before investing in these processors. But if you are just a hobbyist like me, it's still fun to play around with these new toys.","cover":"images/amd.webp","link":"ryzen-ai-llm.html","preview":"\u003cp\u003eAn exploration of running Large Language Models on recent AMD CPUs with AI accelerators\u003c/p\u003e\n","title":"[EN] Running LLMs on AMD Ryzen AI Processor"},{"content":"\r\n\r\nSpaceDesk 是一个 Windows 和 Android 平台上的软件，可以让你把 Android 平板当成 Windows 的扩展屏幕使用。\r\n\r\n# 1. 无解的问题？\r\n\r\n自从切换到 Linux + Wayland 后，我一直在找类似的软件，但是没有找到。\r\n\r\n这种串流方式对刷新率和延迟要求都很高，而对画质要求并不高。因此更接近于游戏串流。我在这个[这个 Reddit 帖子](https://www.reddit.com/r/pcgaming/comments/hfp4vy/absolute_lowest_latency_inhome_streaming_option/)找到了一些专为低延迟设计的解决方案。然而研究后发现均不适用：\r\n\r\n1. **[Parsec](https://parsec.app/)**：[据称](https://www.reddit.com/r/cloudygamer/comments/eq0pf5/best_low_latency_in_home_solution/)延迟低至 1 ms。然而它[不支持 Linux 主机](https://www.reddit.com/r/ParsecGaming/comments/1bk0xek/parsec_linux_host/)；\r\n2. **[Moonlight (NVidia Game Stream)](https://moonlight-stream.org/)**：同样，只支持 Windows 和 NVidia GPU；\r\n3. **Steam 的[远程同乐](https://store.steampowered.com/remoteplay)**：似乎只在有线场景下表现良好，而且只能串流单个游戏画面（而不是显示器画面）。\r\n\r\n另一个老大难问题是**「如何创建虚拟显示器」**。这个问题在 X11 时代非常麻烦，好在 KDE Plasma Wayland 在其 XDG Desktop Portal 的接口中实现了添加虚拟显示的功能：\r\n\r\n![KDE 上可选择「新建虚拟输出」](images/kde-screencast.png)\r\n\r\n我还找到了[这篇博文](https://blog.chyk.ink/2022/07/17/linux-virtual-display/)，提到的投屏方法是 **[Deskreen](https://www.deskreen.com)**。用确实是能用，但我实测：\r\n\r\n1. 该 Electron 应用性能非常拉胯，延迟很高，还有残影；\r\n2. 每次连接都要输一串验证码，不方便；\r\n3. 截至目前已 2 年不在维护中；\r\n4. 主页和主界面充斥着政治宣传广告，进入应用还必须点个「天佑乌克兰」的按钮，我觉得很不舒服。\r\n\r\n此外尝试过的方法还包括 **OBS Studio + [OBS-RTSPServer](https://github.com/iamscottxu/obs-rtspserver) + VLC for Android**，但是不知为何延迟高得离谱，目测 4000 ms 以上，无论如何调节参数都无法降低。\r\n\r\n# 2. 一个新的思路\r\n\r\n我偶然想起了 Moonlight 似乎有一个 Linux 端的主机实现，很快就找到了 **[Sunshine](https://github.com/LizardByte/Sunshine)**。安装、连接都很顺利，延迟也很低。\r\n\r\n然而一个关键问题是：Sunshine 串流时直接从 KMS 显示器列表中读取数据，这意味着 KDE 创建的 Wayland 虚拟输出对其无效。咨询群友后发现最简单的办法可能是购买一个 HDMI 显示器欺骗器，然而我实在不想再买个硬件了。\r\n\r\n天无绝人之路，我在 Reddit 上又看到最近一篇关于[如何欺骗 amdgpu 驱动添加虚拟显示器的帖子](https://www.reddit.com/r/linux_gaming/comments/199ylqz/streaming_with_sunshine_from_virtual_screens/)，测试之后惊喜地发现有效。分享给群友后，发现这一方法对 NVIDIA 显卡也有效。\r\n\r\n我将这个方法总结如下：\r\n\r\n1. 在电脑上安装 Sunshine，平板上安装 Moonlight，确保能搜索到并能正常控制电脑；\r\n2. 用下面的命令枚举所有设备接口的连接情况，选择一个未连接（`disconnected`）的 HDMI 接口（如 `HDMI-A-1`），记下它：\r\n\r\n    ```shell\r\n    for p in /sys/class/drm/*/status; do con=${p%/status}; echo -n \"${con#*/card?-}: \"; cat $p; done \r\n    ```\r\n3. 从[这里](https://git.linuxtv.org/edid-decode.git/tree/data)获得一个 EDID 文件，如 `samsung-q800t-hdmi2.1`；\r\n4. 在 `/usr/lib/firmware/` 下创建一个新的 `edid` 目录（如果没有），并将你的 edid 文件放在那里。例如 `/usr/lib/firmware/edid/samsung-q800t-hdmi2.1`；\r\n5. 编辑内核参数，添加以下内容。其中 `HDMI-A-1` 是你选择的接口，`edid/samsung-q800t-hdmi2.1` 是你的 EDID 文件。注意不要漏了最后的 `:e`：\r\n\r\n    ```shell\r\n    drm.edid_firmware=HDMI-A-1:edid/samsung-q800t-hdmi2.1 video=HDMI-A-1:e\r\n    ```\r\n6. 重启电脑。如果一切正常，你的电脑会认为有一个新的 HDMI 显示器连接上了，而实际上它是一个虚拟显示器；\r\n7. 在命令行中运行 `sunshine`，查看其输出的 `KMS Monitor List`，找到你的 HDMI 接口对应的编号，停止 Sunshine；\r\n8. 在正常启动的 Sunshine 的设置中填入上一步的编号，应用设置，确定其投屏的来源是你的虚拟显示器。\r\n\r\n这样就完成了，你可以在 KDE 设置中像普通显示器那样配置该虚拟显示器的分辨率和空间位置，甚至可以在不用时禁用该显示器。\r\n\r\nMoonlight 连接体验很好，基本和 SpaceDesk 差不多。","cover":"images/lauren-mancke-qc3sE5lGLbA-unsplash.webp","link":"spacedesk-on-linux.html","preview":"\u003cp\u003e把 Android 平板当成 Linux (Wayland) 的扩展屏幕\u003c/p\u003e\n","title":"在 Wayland 上实现类似 SpaceDesk 的平板副屏"},{"content":"\r\n\r\nU-Boot 是一个开源的引导加载程序，用于嵌入式系统的引导。\r\n\r\n调试内核时需要手动切换内核，由于其命令非常不直观，这里记录一下如何在 U-Boot 中启动 Linux 内核。\r\n\r\n\u003e **以下假设**：\r\n\u003e\r\n\u003e - 你能进入 U-Boot 命令行\r\n\u003e - 你的 Linux 内核位于 mmc 第 0 分区下，路径为 `/vmlinuz`\r\n\u003e - 你的设备树位于 mmc 第 0 分区下，路径为 `/dtbs/rk.dtb`\r\n\u003e - 你是 ARM 架构，且 U-Boot 正确定义了 `kernel_addr_r` 和 `fdt_addr_r` 等[环境变量](https://docs.u-boot.org/en/latest/usage/environment.html)\r\n\r\n\r\n## 1. 加载内核\r\n将 `/vmlinuz` 载入到内核载入地址 `$kernel_addr_r`：\r\n\r\n```shell\r\nload mmc 0 ${kernel_addr_r} /vmlinuz\r\n```\r\n\r\n## 2. 加载设备树\r\n将 `/dtbs/rk.dtb` 载入到 `$fdt_addr_r`：\r\n\r\n```shell\r\nload mmc 0 ${fdt_addr_r} /dtbs/rk.dtb\r\n```\r\n\r\n## 3. 设置启动参数\r\n\r\n指定内核的启动参数。请根据实际情况来，不要直接复制：\r\n\r\n```shell\r\nsetenv bootargs initrd=/initramfs-linux.img console=ttyS2,1500000 root=PARTUUID=2f3fd9c7-cb58-43ae-978e-60f136cfd91c rw rootwait loglevel=2\r\n```\r\n\r\n其中重要的参数有：\r\n\r\n- `initrd`：指定 initramfs 文件路径\r\n- `console`：指定控制台串口和波特率\r\n- `root`：指定根分区\r\n- `loglevel`：指定内核日志级别\r\n\r\n## 4. 启动内核\r\n\r\n用 [`booti`](https://docs.u-boot.org/en/latest/usage/cmd/booti.html) 或 [`bootz`](https://docs.u-boot.org/en/latest/usage/cmd/bootz.html) 启动内核。\r\n\r\n\u003e **你知道吗？**\r\n\u003e\r\n\u003e Linux 内核镜像有[多种不同格式](https://unix.stackexchange.com/questions/5518/what-is-the-difference-between-the-following-kernel-makefile-terms-vmlinux-vml)：\r\n\u003e \r\n\u003e - `vmlinux`：未压缩的内核镜像，一个普通的可执行文件，包含调试符号\r\n\u003e - `vmlinuz`：经过 `zlib` 压缩的 `vmlinux`，可以直接启动，不包含调试符号\r\n\u003e - `Image`: 移除了调试符号的 `vmlinux`\r\n\u003e - `zImage`：经过压缩的 `vmlinux`，与 `vmlinuz` 不同的是镜像本身包含在 `piggy.o` 中，添加了一些额外的启动代码以解压缩\r\n\u003e - `bzImage`：和 `zImage` 类似，但允许携带更大（**b**igger）的内核\r\n\u003e\r\n\u003e **对于最后两种格式，需要用 `bootz` 启动。** 其他可先尝试 `booti`。\r\n\r\n```shell\r\nbooti ${kernel_addr_r} - ${fdt_addr_r}\r\n```\r\n\r\n其中，`booti` 的三个参数分别为「内核地址」、「ramdisk 地址」和「设备树地址」。由于我们没有 ramdisk，所以用 `-` 占位。\r\n\r\n","cover":"images/u-boot.webp","link":"boot-from-uboot.html","preview":"\u003cp\u003e字面意思的短文\u003c/p\u003e\n","title":"如何在 U-Boot 中启动 Linux 内核"},{"content":"\r\n\r\n\u003e 这篇文章基本是 [Disambiguating Arm, Arm ARM, Armv9, ARM9, ARM64, AArch64, A64, A78, ...](https://nickdesaulniers.github.io/blog/2023/03/10/disambiguating-arm/) 的翻译，添加了一些自己的理解和补充。\r\n\r\n在技术复杂的地方，总有不成规范的术语表达存在。我常常听到有人说「arm 架构」「aarch64 指令集」，但这些说法并不准确。本文将尝试澄清绝大多数与 ARM 有关的术语的含义。\r\n\r\n## Arm 公司和产品\r\n\r\n**Arm 架构**是*一组精简指令集架构* （RISC）的统称（注意，是**一组**，不是**一个**）。「精简」是指具有简单的寻址模式，例如数据处理是在寄存器操作数上完成的，而不是依靠加载和存储将数据移入或移出寄存器。\r\n\r\n英国公司 **Arm Limited** 是这个架构的*设计公司* ，但它不生产芯片，而是收费授权给其他公司。这就是为什么你会看到很多种 ARM 芯片，例如高通的骁龙、华为的麒麟、苹果的 A 系列等。\r\n\r\n字母大写的 **ARM** 在很久以前是对 Acorn RISC Machine（橡果 RISC 机器）和 Advanced RISC Machines（高级 RISC 机器）的称呼，这些架构今天已经不再使用，但如果你想避免歧义，请尽量使用「Arm」。\r\n\r\n## 架构和指令集\r\n\r\n**Armv9** 和 **Armv8** 等是指 Arm 公司发布的*一个架构版本* 。这些版本包含了更新的指令集和特性。例如 Armv9 引入了 SVE2（Scalable Vector Extension 2）指令集。\r\n\r\n**Armv9.4-A** 是 **Armv9** 的一个最新的扩展，相当于*补丁版本* 。这个版本引入了一组新的功能，有些是可选实现的，有些在未来的 Arm 架构中可能会成为必选标准的一部分。\r\n\r\n后面的 **-A** 是一个*子版本* ，类似于「QQ」「QQ 极速版」「QQ 办公版」的区别，**-A** 指这个架构是用于应用场景（Application Profile）的，比如手机、电脑，还有 **-R** 用于实时场景（Real-time Profile），例如无人驾驶和工业生产控制，**-M** 用于微控制器（Microcontroller Profile），例如树莓派。不同版本的架构定义也有很大的差别。\r\n\r\n\u003e 也许是命名者为了凑出一个巧合，这里的后缀恰好包含 ARM 三个字母。\r\n\r\n**AArch64** 是处理器的一种*执行状态* （注意，不是指令集！），在这个状态下，可以使用 64 位的寄存器、专用的栈指针和只读的程序计数器，这一状态在 Armv8 中首次引入（**所以 Armv7 及以前都是 32 位架构**）；相对应的，原先的 32 位状态被称为 **AArch32**。同一个处理器可以通过设置一个专门的寄存器，在这两种状态之间切换，这就是为什么你可以在 64 位的系统上运行 32 位的程序。\r\n\r\n**A64** 是 AArch64 状态下唯一的*指令集* （虽然它操作 64 位寄存器，但每个指令本身 32 位定长）；相应地，**A32** 现在用来指代早期的 32 位指令集（大部分指令本身也是 32 位定长的，除了 T32）；**T32** 是 A32 的一个子集，它特指 Thumb2 指令集（指令 16 位和 32 位长混合，具体见「其他杂项术语」一节）。\r\n\r\n## 移植\r\n\r\n奇怪的是，Arm 公司自始至终没有说过 **arm64** 这个术语，这似乎是苹果、微软和 Linux 喜欢使用的术语。**arm64** 现在被广泛作为一个*移植* （Port）称呼。\r\n\r\n\u003e **译者注**\r\n\u003e\r\n\u003e *移植* （Port）有很多不同的解释，它似乎不是一个规范的术语。在我的理解中，它指一个代码实现，这个实现可以在一组具有类似特征的架构和指令集下运行。例如 Linux 内核的 arm64 移植可以在所有 Armv8 和 Armv9 架构的处理器上运行，i686 移植可以在所有奔腾 4 及以后的 32 位和 64 位处理器上运行，x86\\_64 移植可以在所有支持 amd64 指令集的处理器上运行。\r\n\u003e\r\n\u003e **总而言之：架构和指令集是硬件设计者规定的，移植是软件（例如编译器、内核）开发者分类的。**\r\n\r\n移植名称通常不是一个标准而是一些惯例。Arm 相关的其他移植名称包括：\r\n\r\n* **armel**：针对 Armv4t 直到 Armv7 架构所支持的 Arm EABI（Embedded Application Binary Interface，嵌入式应用二进制接口）的移植，它是 32 位环境。它的兼容性一般是最好的；\r\n* **armhf**：针对 Armv7 架构 + VFP3-D16 指令集 + Thumb-2 指令集 + 硬件浮点支持的移植，「l」表示它是小端顺序（相应还有大端「b」），它是 32 位环境；\r\n* **armv7hl**：和 **armhf** 基本可以认为相同，在[某些编译器](https://together.jolla.com/question/134877/difference-between-armv7hl-armhf/)中指 armhf 再加上 NEON 指令集；\r\n* **armv7l**：和 **armhf** 类似，去掉了硬件浮点支持（「h」）的要求；\r\n* **armv8l**：针对 Armv8 架构的移植，小端顺序。注意，尽管 Armv8 已有 64 位支持，但这个移植是 32 位环境（什么，你问我 64 位环境的移植叫什么？笨，不就是 **arm64** 嘛）。\r\n\r\n更多可以参考 [Debian 的 ARM Ports](https://www.debian.org/ports/arm/index.en.html) 和 [OBS 的架构说明](https://wiki.merproject.org/wiki/OBS_architecture_naming)。\r\n\r\n再强调一次：**这些名称不是标准，不同的发行版、公司、系统和项目可能有不同的定义**。例如，同一个架构，苹果设备上可能用「arm64」，但在一些 Linux 中可能又用「aarch64」了。这也许是为什么 Arm 公司不喜欢「arm64」的原因之一……\r\n\r\n![我自己构建的一个香橙派 Linux 内核，可以看到移植名为「aarch64」](images/Screenshot_20240207_113006.webp)\r\n\r\n## 微架构\r\n有些人也许会提到某某处理器是一个「**A78** 处理器」，请不要将其与 A64 指令集混淆！A78 更正式的名称是 **Cortex-A78**。Arm 公司不仅设计架构，还设计架构的实现，我们称为**微架构** ，可以理解成给硬件工程师一个更清晰的硬件框架规定。\r\n\r\n微架构可能会有一些特定的优化、指令集扩展、缓存大小等等，例如 Cortex-A78 微架构最高可实现 Armv8.3 架构扩展。\r\n\r\n无论后面的数字是什么，只要看到 Cortex 或 Neoverse，那么这些都是 Arm 的微架构。\r\n\r\n在一些不愿意给 CPU 起名的 Linux 设备中，你可能看到 Linux 读取出的 CPUID 字段就是 `Cortex-xxx`。\r\n\r\n![香橙派 3B 的 CPU 名称是 Cortex-A55](images/Screenshot_20240207_122622.webp)\r\n\r\n## 其他杂项术语\r\n下面是一些不太常见但容易混淆的术语。\r\n\r\nARMv4t 架构引入了称为 **Thumb** 的压缩*指令集* ，指令是 16 位固定宽度；随后在 ARMv6t2 中，**Thumb2** 指令集为其添加了一些 32 位长度的指令。正如上面所说，Thumb2 在 ARMv8 发布以后已经主要被称为 **T32** 了。\r\n\r\n","cover":"images/arm-logo.avif","link":"arm-disambiguation.html","preview":"\u003cp\u003eArm？Armv8？armhf？AArch64？这些术语是什么意思？\u003c/p\u003e\n","title":"Arm 相关术语辨析"},{"content":"\r\n\r\n\u003e **2024-02-07 更新**\r\n\u003e\r\n\u003e 昨晚读到了[瑞芯微的技术手册（Technical Reference Manual）](https://github.com/heitbaum/rk3568/)，发现本文中**我的说法存在一些错误，尚未修正**。我会在近期抽空修正这些错误，同时也会对本文进行一些补充。\r\n\u003e \r\n\u003e **2024-02-29 更新**\r\n\u003e\r\n\u003e 错误的部分已经修复。\r\n\r\n这篇是关于瑞芯微 RockChip 系列芯片启动流程的简析，基本是基于官网过于杂乱的 [Wiki](https://opensource.rock-chips.com/wiki_Boot_option)。很多东西并没有说明白，所以我在这里做一个~~并不~~简单的总结。\r\n\r\n## 参考信息\r\n\r\n- [RK3399 boot sequence](https://wiki.pine64.org/wiki/RK3399_boot_sequence)\r\n- Rockchip TRM\r\n\r\n\r\n## 启动流程\r\n\r\nRockChip 系列芯片的启动流程大致分成五个阶段，分别为：\r\n\r\n### 1. 一级程序载入器（Primary Program Loader）\r\n这一部分位于不可擦除的 ROM 中（又名 BootROM），主要负责初始化一些硬件设备，以及加载第二阶段的启动程序。其地位相当于电脑上的 BIOS 或 UEFI。\r\n\r\nBootROM 本身在上电时会被加载到内存 `0xFFFF0000` 处，然后执行。\r\n\r\n它按如下顺序搜索设备中是否存在有效的 ID Block：\r\n\r\n1. SPI NOR Flash\r\n2. SPI NAND Flash\r\n3. eMMC\r\n4. SD 卡\r\n\r\nID Block 是一个 Rockchip 定义的 512 字节的数据结构，用于标识设备的可启动性。一般以 0x3b 8c dc fc 开头，包含二级程序载入器的起始地址、大小等信息。\r\n\r\n如果第二阶段的启动程序加载失败了（例如，在以上设备中均未找到），它会负责启动 MaskROM 烧写模式，以便用户可以线刷固件。\r\n\r\n### 2. 二级程序载入器（Secondary Program Loader）\r\n这一部分（和以下部分）均是可以自定义（也就是说，位于 SPI Flash、eMMC、SD 卡等）的，主要负责初始化 DDR 并加载下一阶段的启动程序（如 U-Boot）。\r\n\r\n常用文件名是 `idbloader.img`，意为 Initial Device Boot Loader。\r\n\r\n它有两个不同的实现，一个是开源的 U-Boot TPL/SPL，一个是瑞芯微自己的 MiniLoader。\r\n\r\n\u003e **备注**\r\n\u003e\r\n\u003e **U-Boot TPL/SPL 说是开源，其实使用时不完全开源。**因为有一些组件的源码依然是闭源的，需要从瑞芯微的仓库中下载。\r\n\u003e \r\n\u003e 试举例来说，RK3566 编译 U-Boot TPL/SPL 时依赖 [rkbin 仓库](https://github.com/rockchip-linux/rkbin)中的 `rk3566_ddr_1056MHz_v1.10.bin` 这个二进制文件，它是 TPL/SPL 用于初始化 DDR（DRAM）的程序，而这个程序并没有开源。\r\n\r\n### 3. U-Boot\r\n[U-Boot](https://docs.u-boot.org/) 是一个开源的启动程序，它可以从各种设备中加载内核镜像，然后启动操作系统内核。其地位相当于电脑上的 GRUB 或者「Windows 启动管理器」。\r\n\r\n\u003e **备注**\r\n\u003e\r\n\u003e U-Boot 有一些组件的源码也是闭源的，需要从瑞芯微的仓库中下载。\r\n\u003e \r\n\u003e 依然以 RK3566 为例，编译 U-Boot 时依赖 `rkbin` 仓库中的 `rk3568_bl31_v1.32.elf`，它是 TF-A（Trusted Firmware-A）固件，用于初始化 AArch64 处理器的安全状态。对另一些型号来说，可以从 [ARM 的仓库](https://github.com/ARM-software/arm-trusted-firmware.git) 中自行编译，但至少 RK3566 是不行的，没开源。\r\n\r\n**二级程序载入器一般和 U-Boot 一起打包成一个镜像**，然后写入一个设备中。U-Boot 也支持直接编译出单个可以烧写的、同时包含 SPL 和 U-Boot 的镜像，**无需编译两次**。\r\n\r\n有关如何编译 SPL 和 U-Boot，可以参考[我的仓库](https://github.com/w568w/u-boot-orangepi-3b)。[U-Boot 的 Wiki 页](https://docs.u-boot.org/en/latest/board/rockchip/rockchip.html)中提供了更多关于如何编译、如何烧写的信息。\r\n\r\n### 4. 引导分区（内核）\r\nU-Boot 会从设备（即 Flash、eMMC、SD 卡等）中扫描所有分区，找到标记为可引导的分区，然后加载其中的内核镜像。\r\n\r\n\u003e **备注**\r\n\u003e\r\n\u003e 从这里开始，启动程序已经有能力理解「分区」和「文件系统」的概念，也可以任意读写文件了，所以**第 4 和 5 阶段都只是普通的文件系统上的俩分区而已（甚至可以在网络上，TFTP 了解一下？）**，可以任意规划，可以用你喜欢的分区工具，而不像前面几个阶段那样需要特定的格式和烧写工具。\r\n\r\n引导分区一般是一个 FAT32 分区，里面包含了 `zImage` 或 `Image` 内核镜像、`dtb` 设备树文件、`extlinux.conf` 引导配置文件等。在 Linux 系统中，这个分区一般会被挂载在叫 `/boot` 的目录下。\r\n\r\n### 5. 根分区（文件系统）\r\n这已经是特定于 Linux 操作系统的内容了。它可能包含了你操作系统上一切重要的配置文件和关键程序，例如 `/etc`、`/usr` 等等。\r\n\r\n**所谓的「制作一个发行版」，其本质一般就是制作一个根分区而已**。Ubuntu、Debian、ArchLinux、OpenWrt 等等，**它们的区别主要就是这个分区的内容不同**。\r\n\r\n\r\n\r\n## 官网示意图勘误\r\n下面是官网 Wiki 上的一张图，展示了这个启动流程：\r\n\r\n![RockChip Boot Process](images/Rockchip_bootflow20181122.webp)\r\n\r\n这张图其实有些地方画得很清楚，有些地方画得很烂。比如说：\r\n\r\n1. 并没有人规定说 BOOT 分区和 ROOTFS 分区必须从 0x8000 和 0x40000 开始，这可能只是官方的推荐值而已；\r\n2. loader1 是指「二级程序载入器」，不是「一级程序载入器」，loader2 是指 U-Boot；\r\n3. loader1 的部分画得模糊不清：使用右边的 U-Boot TPL/SPL 时，也可能需要 DDR 程序（见上面的备注）；\r\n\r\n另外，这张图也没有详细解释左边蓝色的 `rkxx_loader_vxxx.xxx.bin` 是什么东西，它其实是一个临时的启动器。\r\n\r\n当你用官方的烧写工具烧写镜像时，通常需要选择一个叫 `MiniLoaderAll.bin` 的文件，它就是这个临时的启动器。它的作用是，当你按下烧写工具上的「烧写」按钮时，这个临时的启动器会被首先直接复制到内存里开始执行，然后它会负责完成接下来的烧写工作（因为 BootROM 没有写设备的能力，必须有额外的程序来读写这些设备）。这个临时的启动器本身也是闭源的。\r\n\r\n最后，这张图中展示了两个不同的启动流程，一个是使用 MiniLoader，一个是使用 U-Boot TPL/SPL。它们的区别在于左边闭源，右边开源，**通常我们推荐尽可能开源的解决方案，方便进一步开发调试。**\r\n\r\n\r\n## Orange Pi 的 U-Boot 启动缺陷\r\n在使用 Orange Pi 的 RockChip 开发板时，你可能常常遇到无法启动的问题，官方建议都是「清空 SPI Flash」，但没有解释为什么。\r\n\r\n实际上，这个问题的根源在于 **Orange Pi 的 OpiOS 镜像（以及 SPI Flash）中的使用的 U-Boot TPL/SPL 过于古老，导致表现出奇怪的行为**。\r\n\r\n例如，它以以下顺序尝试启动下一阶段（即 U-Boot）：\r\n\r\n1. SPI Flash\r\n2. TF 卡\r\n3. eMMC\r\n4. USB / NVMe\r\n\r\n对于其中任何一个设备，只要存在（且不为空），它似乎就会尝试启动 U-Boot，**而且一旦失败，就不再继续下一步。比如，如果你的 TF 卡插上了，那么它就会尝试从 TF 卡启动，然后直接失败卡住，而不管 eMMC 上有没有系统。**\r\n\r\n更糟糕的是 Orange Pi 系列的开发板出厂时 SPI Flash 里面已经预装了 U-Boot（和镜像里的版本一样古老）和一个微型 Linux 系统，这个系统启动后什么都不做。这意味着，**如果你不清空 SPI Flash，那么你的板子就会一直启动到这个系统，而不管你的 TF 卡或 eMMC 上有没有系统**。\r\n\r\n而即使清空之后也有问题。假设你的目的是「系统放在 eMMC 里、TF 卡作为储存空间」，所以往 eMMC 里烧写了一个 OpiOS（包括 U-Boot），那么这个 eMMC 上的 U-Boot TPL/SPL 也会直接去尝试启动 TF 卡，然后失败。\r\n\r\n这个问题的目前的解决方案有两个：\r\n\r\n1. 自己编译一个新的 U-Boot（回忆我们说的，编译 U-Boot 其实是指编译一个 SPL+U-Boot 的镜像），然后烧写到 eMMC；\r\n2. 把 eMMC 上的 U-Boot 部分复制到 TF 卡里。\r\n\r\n\u003e **备注**\r\n\u003e\r\n\u003e 有网友反馈把 eMMC 上的 BOOT 分区复制到 TF 卡上才能解决这个问题，复制 U-Boot 不行，这意味着我的推理可能是错误的。但是，通过控制变量我认为这个问题的根源在于 U-Boot 的问题，所以这个解决方案的原理是一样的。","cover":"images/rockchip.webp","link":"rockchip-boot-process.html","preview":"\u003cp\u003e基于 RK3566 开发板分析\u003c/p\u003e\n","title":"瑞芯微 RK 系列芯片启动流程简析"},{"content":"\r\n![Photo by \u003ca href=\"https://unsplash.com/@virussinside?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText\"\u003eArtiom Vallat\u003c/a\u003e on \u003ca href=\"https://unsplash.com/photos/mx9axbKqKW8?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText\"\u003eUnsplash\u003c/a\u003e](images/artiom-vallat-mx9axbKqKW8-unsplash.webp)\r\n\r\n约莫一周前，我在闲暇时间探究给 AMD CPU（下简称 APU）降压的办法。诸如使用 [amdctl](https://github.com/kevinlekiller/amdctl/) 等工具修改 P0 State 电压 ID（Vid）的操作都失败了，其他用户猜测[可能移动 APU 简单地忽略了所有的设置值](https://github.com/kevinlekiller/amdctl/issues/40)，这让我大失所望。不过随后，我在[另一个 issue](https://github.com/kevinlekiller/amdctl/issues/18#issuecomment-1357208023) 下看到了一个用户声称 Ta 找到了一个方法，可以通过 [Smokeless_UMAF](https://github.com/DavidS95/Smokeless_UMAF) 修改 BIOS 中的某个值来降低 Mobile APU 的电压。我立即下载了这个工具，并从 U 盘启动了它，修改了 P0State Vid 的值，然后保存了 BIOS。\r\n\r\n然后，我重启了电脑，但是电脑却无法启动了。开机后风扇会转，电源灯和键盘灯会亮，除此之外什么都没有发生——连屏幕的背光都没有启动。按照 Dell 提供的[《如何在戴尔计算机上执行 BIOS 或 CMOS 重置和清除 NVRAM》](https://www.dell.com/support/kbdoc/zh-cn/000124377/%E5%A6%82%E4%BD%95-%E5%9C%A8-%E6%88%B4%E5%B0%94-%E8%AE%A1%E7%AE%97%E6%9C%BA-%E4%B8%8A-%E6%89%A7%E8%A1%8C-bios-%E6%88%96-cmos-%E9%87%8D%E7%BD%AE-%E5%92%8C-%E6%B8%85%E9%99%A4-nvram) 一文，我尝试了各种方法，包括：\r\n\r\n- 重新拔插电池和 CMOS 电池的排线，然后按住电源键 10-15 秒清空电容，从而重置 NVRAM\r\n- 按住电源键 30 秒以上以执行 RTC 重置\r\n\r\n\r\n无一例外失败了。电脑依然只会黑屏，只有风扇转动的声音提示我它还没死透。看起来，**我把电脑变砖了**。\r\n\r\n当我回去读 Smokeless_UMAF 的 README 的时候，我才意识到它写道：\r\n\r\n\u003e For most options a bios clear is suitable, however for some of the more **dangerous settings, you might need a proper reflash**, which is why they are classed as \"dangerous settings\".\r\n\u003e \r\n\u003e ...\r\n\u003e\r\n\u003e **Known Problem (Read This)**\r\n\u003e\r\n\u003e Known settings that will make your **brick your device** - Note this primarily refers to the \"locked\" intergrated **laptop / handheld APUs** rather than unlocked desktop APUs or CPUs.\r\n\u003e\r\n\u003e - P0State Vid\r\n\r\n另外一个用户和我遇到了一样的问题，而[作者在 Discussions 下回复道](https://github.com/DavidS95/Smokeless_UMAF/discussions/13)：\r\n\r\n\u003e It's recoverable **if you manage to have a way to reflash the bios**. Either through an OEM designated way, for example (omitted). Or by using a manual flashing device which requires you to by that and flash the bios chip yourself. Either way would work as long as you can get a bios entirely reflashed. Yea for some reason this setting does not get cleared when bios does normally thus needing a new bios to then be cleared.\r\n\r\n……好吧，鉴于这是我的主力笔记本，无论如何我都要修好它。看起来这困难重重——既然 BIOS 都无法启动了，我怎么可能用软件来重刷它呢？我需要一个硬件解决方案，而我——在任何意义上——都不是一个电子发烧友，手头没有万用表、烙铁、焊锡、热风枪之类的工具或者杜邦线之类的器材，我也不知道怎么使用它们。\r\n\r\n幸运的是，最后我确实成功了，而且这只花了我不到 30 块钱和不到 1 个小时的时间。\r\n\r\n在开始之前，先了解我的配置：\r\n\r\n- 笔记本电脑：[Lenovo Legion R7000 2020](https://newsupport.lenovo.com.cn/products_index.html?fromsource=products_index\u0026selname=Lenovo%20Legion%20R7000%202020)\r\n- CPU：AMD Ryzen 7 4800H\r\n\r\n我想这个教程对于其他笔记本电脑也是通用的，只要你能找到 BIOS 芯片、下载到对应的驱动程序和工具，就可以尝试修复它。\r\n\r\n# 拆机\r\n在做任何硬件操作前，我们都需要先拆开笔记本电脑，然后找到 BIOS 芯片。\r\n\r\n然而单单拆开电脑就花费了我约 2 个小时的时间。不得不说，拯救者的模具实在太牢固了，而我也没有卡扣之类的专门拆卸工具，用手指和一张卡片拆卸的过程非常艰难。如果你也是拯救者的用户，建议你先看看[这个视频](https://www.bilibili.com/video/BV1pa41187nV/)，它会教你如何拆卸笔记本的后壳。\r\n\r\n拆卸后还需要断开 CMOS 和笔记本电池的供电，这样才能保证电路不会有电流通过。而我这款笔记本的三个插头是如此小且紧密地排列在一起，以至于我为了拔掉它们，又用了半个小时的时间。\r\n\r\n![拆卸后的笔记本电脑](images/laptop_d.webp)\r\n\r\n# 了解 BIOS 芯片\r\nBIOS 芯片是笔记本电脑上的一个小小的独立芯片，它存储了 BIOS 的固件程序，而且可以被重写。\r\n\r\n我笔记本的 BIOS 芯片在主板上的位置，约莫是上图的食指所操作的地方，再向上约 3 厘米（目测）的位置。它恰好被上面的整体散热板挡住了，所以需要把散热板也拆下来。\r\n\r\nBIOS 芯片的特点是通常采用 8-SOP 封装，这会表现为很有特色的球形引脚，如下图所示。\r\n\r\n![BIOS 芯片（图正中）](images/bios_chip.webp)\r\n\r\n表面写了 BIOS 芯片的型号：\r\n\r\n```\r\nWinbond\r\n25Q128JWSQ\r\n```\r\n\r\n这个型号是非常重要的，因为它决定了我们后续的设置。就我的芯片来说，它是台湾华邦电子（Winbond）生产的 128Mbit（16MB）的闪存芯片，而且型号是 25Q128JWSQ。\r\n\r\n我在[华邦官网](https://www.winbond.com/)上的 [Serial NOR Flash](https://www.winbond.com/hq/product/code-storage-flash-memory/serial-nor-flash/) 分类下找到了 25Q128JW 系列的数据手册，下载作备用。最后的两位 SQ 是指这个芯片的封装是 8-SOP，而且它的引脚排列是 208-mil。\r\n\r\n# 一个编程器？\r\n既然现在只有芯片，当然不可能把芯片拔下来插到其他电脑上去复制文件（这又不是 U 盘）。我们需要一个**编程器**，它可以把芯片的内容读取到电脑上，或者把电脑上的内容写入芯片（称为「烧录」）。\r\n\r\n好消息是，编程器非常便宜，一个 [CH341A 芯片的编程器（注：这不是购买链接）](https://oshwhub.com/biannually/CH341Abian-cheng-qi-zhi-chi-5V-3)就可以满足我们的需求。它的价格在 15 元左右，而且可以在淘宝上买到。为了避免广告嫌疑，我就不放链接了，看官请自行搜索。\r\n\r\n**注意：下单前请务必报出你的芯片型号，和客服确认编程器是否支持你的芯片。**\r\n\r\n购买时，我选择了带有 SOP8 免拆夹的套装，这样就不需要把芯片从主板上焊下来了。\r\n\r\n![免拆夹，可以夹在引脚上（网图）](images/sop8-jz.webp)\r\n\r\n卖家还非常贴心地提供了使用教程和软件。软件主要包括：\r\n\r\n- CH341A 编程器的驱动程序\r\n- NeoProgrammer 编程软件\r\n\r\nNeoProgrammer 是基于 Asprogrammer 的一个增强修改版。新版本支持的芯片数量达近 2k 个。\r\n\r\n在另一台 Windows 电脑上安装好驱动程序后，尝试打开 NeoProgrammer，它会提示你插入编程器。用 USB 方式插入编程器后，NeoProgrammer 会自动识别。\r\n\r\n![NeoProgrammer（网图）](images/neoprogrammer.webp)\r\n\r\n# 开始烧录！\r\n## 连接芯片\r\n首先，我们需要把编程器连接到芯片上。因为我们有免拆夹，只需要把免拆夹夹在芯片的引脚上即可。\r\n\r\n**注意，免拆夹、编程器和芯片的方向必须一致，芯片的 1 号引脚连接免拆夹的 1 号线（下图中红色的线），再连接到编程器的 1 号引脚，否则轻则读取失败，重则烧毁芯片。**\r\n\r\n![免拆夹连接芯片（淘宝买家图）](images/sop8-jz-connect.webp)\r\n\r\n连接上后，打开 NeoProgrammer，点击左边的「检测」按钮，它会自动识别芯片的型号，或者提示你手动选择型号。\r\n\r\n这里有个有意思的小插曲，我的芯片在手册上标注的额定工作电压是 1.8V，然而**我购买的编程器只支持 3.3V 和 5V 两种输出电压**，NeoProgrammer 甚至在选择芯片型号后提醒我「**重要警告：请使用 1.8V 适配器！**」，但卖家说「无所谓，主板会调整电压，不会烧芯片」，于是我就相信了卖家的话。最后看来，确实也没什么问题。\r\n\r\n## 备份原始 BIOS\r\n连接好后，我们需要备份原始 BIOS，防止烧录失败后无法恢复。\r\n\r\n依次在 NeoProgrammer 的工具栏中选择「读取」「校验」，两个过程大约各需要 3-5 分钟的时间。如果读取成功，NeoProgrammer 的右边会显示芯片的内容，如下图所示。\r\n\r\n![读取芯片](images/read-chip.webp)\r\n\r\n如果都成功了，可以点击「保存」按钮，把芯片的内容保存到电脑上，一般以 `.bin` 为后缀名。\r\n\r\n如果有失败，可以尝试重新连接芯片，或者重新插拔编程器，然后再次尝试。（也可以直接问客服……）\r\n\r\n## 获取新 BIOS\r\n我们现在需要获取正确的 BIOS 的 `.bin` 文件，以便烧录到芯片上。\r\n\r\n幸运的是，我在联想官网上找到了我的[笔记本的 BIOS 更新程序]((https://newsupport.lenovo.com.cn/driveList.html?fromsource=driveList\u0026selname=Lenovo%20Legion%20R7000%202020))，下载后是一个名为 `BIOS-EUCN39WW.exe` 的可执行文件。\r\n\r\n根据网上的其他教程，打开它，选择一个空目录，然后安装方式选择 `Extract Only`，它会把 BIOS 的文件解压到这个目录下。\r\n\r\n在这个目录下，需要寻找一个大小和我们刚才导出的 `.bin` 大小相同的文件（在我这里就是 16MB），一般以 `.bin/.rom/.hex/.cap` 为后缀名。\r\n\r\n**注意：必须是正好 16MB，即 16,777,216 字节的文件，如果多一个字节少一个字节都不行，是 15.9MB 或者 16.1MB 那更不行。**\r\n\r\n如果你找到了，那么恭喜你，你可以跳过这一节余下内容，直接开始烧录了。\r\n\r\n可惜在我这里，解压出来的文件居然还是个可执行文件 `EUCN39WW.exe`，也罢，那就再执行它，直接进入了安装界面。\r\n\r\n![套娃是吧](images/bios-unpack-1.webp)\r\n\r\n启动后会报错误提示，**先放着不要关闭它**。打开「任务管理器」，在「详细信息」选项卡中找有没有名称或者图标比较可疑的程序，我这里是 `H2OFFT-W.exe`，然后右键「打开文件所在的位置」。在这里，我们能找到一个大小大差不差的可疑文件 `BIOS.fd`。先把他复制出来，然后关闭 BIOS 更新程序。\r\n\r\n![BIOS 文件](images/bios-unpack-2.webp)\r\n\r\n这个 `.fd` 是什么呢？根据[这篇 UEFI 开发博文](https://blog.csdn.net/jiangwei0512/article/details/83685694)的介绍，它是所谓的烧录设备二进制镜像（Flash Device binary image）文件。显然它的大小不是 16MB，我们需要把它变成可用的 `.bin` 文件。\r\n\r\n我查到了[2013 年的这篇帖子](https://www.chinafix.com/thread-608146-1-1.html)，它转载了一个从 `BIOS.fd` 中提取 `.bin` 文件的方法，即去除 `.fd` 文件的前 0x80000 个字节。然而我们的文件即便这样也远大于 16MB，这提示我们还需要去除一些东西。\r\n\r\n回头看第一篇 UEFI 博文，它介绍了 `.fd` 文件的结构。我们基本可以认为：它的二进制结构是：\r\n\r\n```text\r\n---------\r\n固件卷头部\r\n---------\r\n固件文件1\r\n---------\r\n固件文件2\r\n---------\r\n固件文件3\r\n---------\r\n...\r\n---------\r\n```\r\n\r\n这说明我们的现代 BIOS 可能包含了多个固件文件，而我们只需要其中放在 BIOS 芯片中的那个。\r\n\r\n为了抽取出这一部分，我们使用 WinHex（UltraEdit 也可以）打开 `BIOS.fd` 和刚才备份的 `.bin` 文件，然后对比它们的二进制结构。我们直接在前者中搜索后者的头部，例如我的 `.bin` 的头部前几个字节是：\r\n\r\n```\r\n02 00 00 83 FF FF\r\n```\r\n\r\n在 `BIOS.fd` 中搜索，一般只能找到一个匹配的位置，这就是我们需要的固件文件的起始位置。把它之前的部分全部选中删除。\r\n\r\n然后搜索 `.bin` 的尾部。我们可以直接从头部向后加 16MB 的位置，对比一下两个文件的二进制内容，很容易找到明显的分割点。从这里开始，把它之后的部分全部选中删除。\r\n\r\n在右边的详情中确保你的文件大小是 16MB（16,777,216 字节），**一个字节也不能差**，然后从 WinHex 中保存为新的 `.bin` 文件。\r\n\r\n## 正式烧录\r\n现在我们已经有了正确的 `.bin` 文件，可以开始烧录了。\r\n\r\n在 NeoProgrammer 中，依次点击「擦除」「校验」，清空芯片上原有文件并校验是否成功。\r\n\r\n然后点击「打开」，选择我们刚才保存的 `.bin` 文件，然后点击「写入」，开始烧录。烧录过程大约需要 3-5 分钟的时间。完成后，再点击「校验」，确保烧录成功。\r\n\r\n![烧录中](images/flashing.webp)\r\n\r\n# 开机\r\n烧录完成后，我们可以把免拆夹从芯片上拿下来，然后重新连接笔记本电池和 CMOS 电池，把电脑重新组装起来。\r\n\r\n接下来就是通电，开机！\r\n\r\n首次开机时也有一个小插曲，因为按电源按钮后黑屏了将近一分钟，我以为又失败了，但最后屏幕终于亮起来了，成功启动了系统。我猜想这是因为之前 BIOS 芯片中的内容被清空了，需要重新初始化，所以需要一些时间。\r\n\r\n花费了 5 天时间后，我终于让电脑重新亮起来了。\r\n\r\n而我的心情，正如[我所参考并想感谢的这篇教程贴](https://forums.mydigitallife.net/threads/solved-lenovo-legion-y740-15irh-bios-recovery.83063/page-2#post-1644758)中的一句话：\r\n\r\n\r\n\u003e **F\\*CK that s\\*cker Lenovo!** I can now update BIOS whichever version I like...\r\n\r\n---\r\n\r\n插曲：我曾经试图把我的电脑抱去联想售后，但他们直接鉴定为「主板故障，需要更换」，并且要价 1000+ 元。所以 **f\\*ck you, Lenovo**...\r\n\r\n另外，如果你认为自己足够「发烧」，而且手边有树莓派、Arduino 之类的单片机以及插线板、电焊和杜邦线，还有一台 Linux 电脑，那么你可以尝试[这篇教程](https://www.partsnotincluded.com/flashing-the-bios-to-fix-a-bricked-lenovo-laptop/)，我没有这篇文章的作者那么巧妙的设备和技术。","cover":"images/artiom-vallat-mx9axbKqKW8-unsplash.webp","link":"how-to-fix-bricked-lenovo-laptop.html","preview":"\u003cp\u003e而且只花了不到 30 块钱\u003c/p\u003e\n","title":"我如何修好一个变砖的笔记本电脑"},{"content":"\r\n![Photo by \u003ca href=\"https://unsplash.com/@goian?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText\"\u003eIan Schneider\u003c/a\u003e on \u003ca href=\"https://unsplash.com/images/events/happy-new-year?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText\"\u003eUnsplash\u003c/a\u003e](images/ian-schneider-PAykYb-8Er8-unsplash.webp)\r\n\r\n距离上一次跨年又过去一年了。\r\n\r\n这一年里，我的记忆大致可以分为几个阶段：\r\n\r\n1. **1-3 月，风平浪静。** 尽管国外的疫情一波猛于一波，但得益于疫情防控政策，国内的生活基本不受影响。少数的几次核酸也只有上大学时出入上海市会要求；\r\n2. **4-6 月，波涛汹涌。** 几乎是刚刚三月底，上海的疫情突然就爆发了：从日增几百人、几千人到数万人，只有短短的十几天时间。学校从封校逐步加码到封寝，也难以阻挡病毒的脚步。很快，每周核酸、线上教学、寝室间轮流早起带饭成为了大学生的生活常态。这段时间里我并不怎么关注媒体和公共社区，只是在微信群和朋友圈里看到了一些同学的疫情动态，以至于后来听说「上海的精准防疫让全国人的两年苦心经营毁于一旦」之类的说法，还颇为惊讶；\r\n3. **7-11 月，波澜不惊。** 从 7 月底开始，疫情在上海基本得到控制，学校也陆续恢复了线下教学。从这时开始，「动态清零」一词算是正式进入了大众视野，各地很快发现给传染事件溯源的老办法在超强的 Delta 和 Omicron 变种面前已经失去了有效意义，唯一手段就是反复的、大批量的全员核酸筛查。尤其是进入了十一月，一些地区的恶性事件（包括但不限于游行示威、财政崩溃等等）让人触目惊心，倍感难以持续。好在，这学期的日常作业很繁重（**没空更新博客的原因找到了！**），我可以把自己埋进作业里，不用去关注这些事情；\r\n4. **12-1 月，重生。** 12 月 7 日，突然地，身边的核酸检测点随着「动态清零」政策一起如潮水退去，各地的感染高峰像洪水一样扑面而来。早在 11 日，我就预感上海不宜久留，急匆匆地逃离了这个城市。谁想「躲得过初一，躲不过十五」，随着本地高峰的爆发，终究是挂彩了：18 日，开始发低烧；19-22 日，连续 4 天的 39 ℃ 高烧；直到 25 日之后才逐渐进入康复阶段。这段时间里，我更没有太多的精力去关注各种事，更何况还有期末考试，唯一的可靠信息来源变成了百度大数据统计的疫情指数。\r\n\r\n很难形容对过去一年生活的印象，现在回想起来，它恐怕是过去三年受疫情影响最严重的一年了。我不知道这一年对各位看官的影响有多大，但我想，至少对于大学生来说，这一年，我们都在经历着一种「重生」。\r\n\r\n# 关于《零基础微积分入门基本教程》系列\r\n拖更了三四年时间，每天依然有小伙伴在问我什么时候更新，我也很惭愧：真的是让各位等太久了！\r\n\r\n原先的版本发布在[作业部落](https://zybuluo.com/w568w/note/1081202)上，截至写文时，已经有 8 万多阅读了。虽然没有动笔，但我一直在思考如何将这个系列继续下去，可以肯定的是：**今年一定会将这个系列更新完毕。** \r\n\r\n作业部落目前不太适合写作长文了，很多图片使用外链，也带来了很差的阅读体感。稍后，我可能会考虑将其完全迁移到**[本站](https://w568w.eu.org/calculus-1st.html)和简书**等国内平台上，请关注[作业部落](https://zybuluo.com/w568w/note/1081202)或[本博客](https://w568w.eu.org/)等平台的更新信息。\r\n\r\n\u003e 另外，新的一年我也许会购买新的域名，但目前的域名 https://w568w.eu.org/ 仍然可以长期使用一年以上，无需担心。如果担心找不到正确的博客位置，可以查看我 GitHub 上[个人主页](https://github.com/w568w)左侧的链接，或者直接访问 https://w568w.github.io/ 。\r\n\u003e\r\n\u003e 任何时候都欢迎新的[友情链接](https://w568w.eu.org/gays.html)！","cover":"images/ian-schneider-PAykYb-8Er8-unsplash.webp","link":"2023-sweep.html","preview":"\u003cp\u003e打扫心情，迎接下一年\u003c/p\u003e\n","title":"2023 和新年"},{"content":"\r\n\r\n![Photo by Gabriel Heinzer on Unsplash](images/photo-1629654297299-c8506221ca97.webp)\r\n本文分为两部分，第一部分阐明问题，第二部分则列出博主个人的 Linux 配置记录。\r\n\r\n---\r\n\r\n上个月把各个备受互联网推崇的 Linux 发行版试用了一遍。浅浅地发表一下个人感想。\r\n\r\n作为一个有 Linux 4 年使用史的老用户，自然也有将 Linux 完全充当日常使用操作系统的经历。从最大众的 Ubuntu、Mint，到（当时）更为小众的 Arch Linux，再到国产的 Start OS、Deepin、UOS，如果要用两个字形容 Linux 相比于 Windows 的使用体验，那就是「**折腾**」：安装要折腾分区，开机要折腾图形驱动，使用要折腾软件包源、桌面管理器、输入法、Wine……\r\n\r\n2022 年，已经有一众的 Linux 桌面版号称能给用户带来大众级的桌面体验。那么，这些平台的体验到底如何呢？\r\n\r\n鉴于互联网上吹嘘 Linux 优点的文章、视频已经多到让人审美疲劳，**本文仅限于记录部分 Linux 发行版的缺点和不足，以便帮助读者擦亮眼睛，认清现状，减少折腾。** 也希望社区不断查漏补缺，让「Linux 桌面年」别再永远是「下一年」。\r\n\r\n![Linux 桌面元年来了吗？](images/Snipaste_2022-08-25_14-37-58.png)\r\n\r\n*PS：* 当然，下文中大部分问题，都与系统环境、个人配置有关，可能你根本不会碰到，因此仅供参考。也欢迎在评论区分享你自己的 Linux 使用体验。\r\n\r\n# Ubuntu 22.04 的问题\r\nUbuntu 作为目前号称拥有最高支持率、最全驱动厂家支持和最活跃社区支持的发行版，自然被放在试用的第一位。\r\n\r\n## 第一次开机就报错\r\n第一次开机后提示系统更新。点击「立即更新」后，报错如下：\r\n```\r\n无法解决软件包依赖\r\n这个错误可能是需要不存在或不可安装的软件包引起的。或者可能在软件包之间有冲突，它们不能同时安装。\r\nTransaction failed: 无法解决软件包依赖\r\n 下列软件包未满足的依赖关系：\r\n\r\nlibmutter-10-0: Depends: mutter-common (\u003e= 42.2-0ubuntu1) 但是将要安装 42.2-0ubuntu1\r\n                Depends: libgudev-1.0-0 (\u003e= 232) 但是将要安装 1:237-2build1\r\n                Depends: libice6 (\u003e= 1:1.0.0) 但是将要安装 2:1.0.10-1build2\r\n                Depends: libsystemd0 (\u003e= 226) 但是将要安装 249.11-0ubuntu3\r\n                Depends: libudev1 (\u003e= 183) 但是将要安装 249.11-0ubuntu3\r\n                Depends: libx11-6 (\u003e= 2:1.7.0) 但是将要安装 2:1.7.5-1\r\n                Depends: libx11-xcb1 (\u003e= 2:1.7.5) 但是将要安装 2:1.7.5-1\r\n                Depends: libxau6 (\u003e= 1:1.0.9) 但是将要安装 1:1.0.9-1build5\r\n                Depends: libxcomposite1 (\u003e= 1:0.4.5) 但是将要安装 1:0.4.5-1build2\r\n                Depends: libxdamage1 (\u003e= 1:1.1) 但是将要安装 1:1.1.5-2build2\r\n                Depends: libxext6 (\u003e= 2:1.3.0) 但是将要安装 2:1.3.4-1build1\r\n                Depends: libxfixes3 (\u003e= 1:6.0.0) 但是将要安装 1:6.0.0-1\r\n                Depends: libxi6 (\u003e= 2:1.6.99.1) 但是将要安装 2:1.8-1build1\r\n                Depends: libxinerama1 (\u003e= 2:1.1.4) 但是将要安装 2:1.1.4-3\r\n                Depends: libxkbfile1 (\u003e= 1:1.1.0) 但是将要安装 1:1.1.0-1build3\r\n                Depends: libxrandr2 (\u003e= 2:1.5.0) 但是将要安装 2:1.5.2-1build1\r\n```\r\n\r\n这个问题**自从 Ubuntu 有「系统更新」的图形化程序以来，就从未得到真正的解决。** 每一次尝试「系统更新」，就像玩俄罗斯轮盘，你永远不知道这次更新又要爆出什么稀奇古怪的错误。\r\n\r\n而这一错误信息，即便对于有经验的用户也是非常棘手的。考虑到第一次进入桌面就「开门见山」地报错，一般的桌面用户很难对这样一个操作系统有非常高的评价。\r\n\r\n## 大批中英文混杂\r\n系统设置、桌面右键菜单、商店显然都没有做到完全的翻译，在各个不主要的页面上基本都是中英文参半，或者干脆报出中英文混杂的错误信息。\r\n\r\n尽管 Windows 11 在 21 年 6 月发行之初，也有过[汉化不完全](https://www.appinn.com/windows-11-insider-preview-10-0-22000-51/)的问题，但在之后的正式版中很快就补全了所有细枝末节位置的本地化语言。相比之下，Ubuntu 作为正式版发行的 22.04 版，依然大面积出现「三明治」语言页，让人不禁疑问：Ubuntu 的语言社区贡献人力真的足够吗？\r\n\r\n## 应用商店差强人意\r\n相比于我使用 Ubuntu 16.04 时，Ubuntu 自带的应用商店有了比较大的改观。主要在两点：\r\n\r\n1. **可以打开。** 是的，在 16.04 中，我甚至无法在不科学上网的情况下打开商店，常常展示为白屏或者直接闪退。现在？或许是添加了镜像源吧；\r\n   \r\n2. **可以安装软件。** 直到 Ubuntu 的第 20 版，我都从未成功在软件商店里安装过一个软件——它在下载时卡住，安装中崩溃，报出莫名其妙的未知错误，白屏，或者干脆在点击「安装」按钮时没有任何反应。我很高兴在 22.04 上，我*终于*可以使用它安装软件了。\r\n\r\n然而，令人恼火的问题依旧存在。例如，当我在应用商店的更新页面选择「全部更新」后，**它只更新了一半的软件，在没有任何错误提示的情况下，自己停止更新了**。而且，当我再次尝试点击「全部更新」时，**整个页面直接白屏**。关闭重开才恢复正常。\r\n\r\n即便反复这个恼人的过程几次、全部升级好后，应用商店仍继续白屏，再一次关闭重开后才显示「All Update to date」（全部最新）的字样——是的，在中文系统里仍是英文提示，即便应用商店其他文本都是中文！\r\n\r\n其他的小问题数不胜数，我甚至有些担心社区开发人员能否修复它们——**包括对部分自带软件点击「卸载」总是提示「未安装」、切换安装版本（Snap 和 APT）时白屏**，等等。\r\n## 高分屏效果感人\r\n由于显卡驱动，或者是由于窗口管理器的年久失修，Ubuntu 无法很好地支持 150% 缩放。在系统设置里只能选择 100%、200% 等整数倍窗口缩放，分数倍数的缩放则只有软件支持，非常模糊且消耗性能。在我的 15 吋显示屏上，**要么字太小无法辨清，要么字太大影响阅读。**\r\n\r\n有人说，可以自行安装 gnome-tweak，设置字体缩放比例。但是，仅仅设置字体缩放会使得按钮和其他控件的视觉大小过小，而且**部分软件（如网易云音乐）甚至都不遵循系统的字体缩放设置，而是自己决定缩放比例。**\r\n\r\n## 其他瑕疵\r\n零零散散的小问题还有很多，试举几例：\r\n\r\n1. 点「注销」直接黑屏，回到 Linux 终端模式，而不是「切换用户」界面。\r\n\r\n2. 部分主要应用不支持暗色模式，如 Edge、Gedit（是的，Gnome 自家出的编辑器不适配自家桌面环境的暗色模式！）。\r\n\r\n还有一些比较强迫症的，比如「应用程序」的文件夹内的项目数超过一页时，第一列的图标左半边显示不全，等等。\r\n\r\n# OpenSUSE Tumbleweed、Linux Mint 的问题\r\nOpenSUSE 被部分爱好者评价为「最新、最稳定的桌面操作系统」，Linux Mint 则是「最接近 Windows 的桌面体验的发行版」。\r\n\r\n然而，这两款发行版在我的笔记本上都吃了「闭门羹」。具体来说，两者都在第一步，也就是安装上就跌了跟头：**OpenSUSE 在安装界面直接控件重叠、中文字间距怪异且缺字，按钮全部无法点击，根本不能进行下一步安装；Linux Mint 则更进一步，安装界面直接黑屏，连 Live 版系统都无法进入。**\r\n\r\n我尝试了一些常见的解决办法，例如 Safe graphic 或者禁用独显，但均以失败告终。或许是天时地利人和均不沾，God (~~Linus~~) 也不想让我使用吧。\r\n# Deepin 20 的问题\r\nDeepin 作为国产发行版，也是 UOS 的公用开源版本，自然对本地化有着完全的支持，但这并不代表 Deepin 是完全有能力替代 Windows、macOS 使用体验的作品。实际上，它的问题也有不少。\r\n\r\n## 托盘体验差\r\nDeepin 有自己的桌面环境 [DDE](https://www.deepin.org/zh/dde/)，这很好。但在 Linux 桌面永远的痛——Wine 托盘图标上，依旧问题不断。\r\n\r\n例如，Deepin QQ 挂在后台，托盘图标一会儿就自己消失了，而实际上还在运行（重新登录提示已经登录）。这时没有任何办法，只能自行在进程管理器中寻找 Wine QQ 进程并结束。\r\n## UI 混乱\r\nDeepin 在 15 前后有过一次非常棒的 [UI 变更](https://blog.csdn.net/qq_33154343/article/details/106195055)，直接让我爱上了 DDE 的质感。但在目前的 20 版本中，或许是为了迎合大众感受，或许是为了「深度抄袭」macOS，换用了现在的 UI 风格。\r\n\r\n而这套风格，给我整体感受是：**不伦不类**。任务栏图标风格严重不统一（**黑白扁平、彩色拟物风混杂**），使用字体不抗锯齿；**任何按钮、图标均无悬停、点击动效**，只能通过是否弹出新窗口来判断是否点击上了、是否打开了相应功能；最离谱的是，默认是半透明任务栏、暗色系壁纸，任务栏和开始菜单字体颜色却默认也是黑色，你细品能不能看得见字。\r\n\r\n![Deepin 20 桌面现状](images/deepin-20.png) \r\n\r\n## 应用商店同样略有瑕疵\r\n虽然 Deepin 的应用商店为国人使用习惯下足了功夫，但并不意味着它已经完美无瑕。除了从很多个版本之前以来就有的「常常安装失败，且无任何错误信息」的问题，这一版本也仍未修复一些更难察觉、但一旦察觉使用体验就会打折扣的问题。\r\n\r\n例如，**在系统更新时，于应用商店下载任何软件均立刻安装失败，且点击「查看失败详情」无任何反应**。必须等到更新完成，并且重新打开应用商店才恢复正常。\r\n\r\n由于 Linux 的系统更新频率远胜于 Windows 和 macOS，很难说诸如此类的设计缺陷是用户友好的。\r\n\r\n---\r\n下面是第二部分，列出了个人的 Ubuntu 常用软件的配置流程，希望对执意体验 Linux 的你有帮助。\r\n# 个人 Ubuntu 配置过程\r\n## 安装 VSCode\r\n应用商店为 Snap 版本，性能低。到官网下载 deb 包安装。\r\n## 安装 Git\r\napt 安装。使用 Git Pull 时若提醒：\r\n```\r\n$ git pull --tags origin master\r\nssh_askpass: exec(/usr/bin/ssh-askpass): No such file or directory\r\nHost key verification failed.\r\nfatal: 无法读取远程仓库。\r\n\r\n请确认您有正确的访问权限并且仓库存在。\r\n```\r\n安装提示的库后即恢复正常。\r\n## 安装 Edge\r\n使用 Edge 的主要原因是我在 Windows 上也是 Edge 主力，方便同步；另一个原因是，Ubuntu 预装的 Firefox 是 Snap 版，打开速度慢不说，由于用到了沙盒机制还无法连接到外部应用程序，比如 Keepass、Gnome Extension 等。\r\n\r\n直接到官网下载即可。\r\n\r\n实际使用时，第一次登录账号后崩溃了一下，之后就没啥问题了。\r\n## 安装 Clash\r\n到 https://github.com/Fndroid/clash_for_windows_pkg 下载即可。\r\n## 替换软件源\r\n官方源问题一堆，选择了中国依然连接不上。到「软件与更新」里切换到清华源（或者别的）。\r\n## 安装 Onedrive\r\n从 https://github.com/abraunegg/onedrive 安装 Onedrive。注意查看它关于 Ubuntu 的特别安装提醒，应当安装来自 OpenSUSE 的包。\r\n\r\n还可以安装 https://github.com/bpozdena/OneDriveGUI/ 的 GUI。\r\n\r\n\u003e **注意：** 若使用 AppImage，首先要根据执行 AppImage 时的提示安装 Fuse；其次，首次运行该工具时必须通过命令行创建 profile，再导入 GUI 工具中。GUI 工具本身不支持直接创建。\r\n\u003e\r\n\u003e 详见 OneDriveGUI 的官方文档。\r\n\r\n## 安装 Keepass\r\n应用商店下载 `KeePassXC` 即可，注意不要选择 Snap 版。浏览器安装 `KeePassXC-Browser` 集成。\r\n## 安装 QQ\r\n使用 `Icalingua-plus-plus` 项目，初步实际体验较佳。但由于是基于 Electron，系统占用相比 Windows 原生版有过之而无不及。\r\n## 安装飞书\r\n直接去官网下载就好了。\r\n## 安装 uTools\r\n直接去官网下载就好了。\r\n\r\nuTools 安装后出现打不开的问题。根据[官方论坛](https://yuanliao.info/d/5224-ubuntu-2204/22)，安装旧版 `libssl1.1` 的 DEB 包后可解。\r\n## 安装网易云音乐\r\n直接去官网下载。\r\n\r\n安装后也出现打不开的问题。根据 https://blog.csdn.net/u010457081/article/details/124544601 的解决办法，在启动脚本中加一行命令就行了。\r\n\r\n## 调整字体大小\r\napt 安装 `gnome-tweaks`。在 `字体` 页面调整缩放比例即可。\r\n\r\n## 安装独显驱动以及调节亮度\r\n安装独显驱动很容易，装完后不能调节亮度很痛苦。根据 https://zhuanlan.zhihu.com/p/348624522 设置一下就行了。\r\n\r\n## 关闭 Bracketed paste mode\r\n它使得你在粘贴文本到终端时，会在首部添加类似于 `^[[200~` 的东西。根据 https://askubuntu.com/questions/662222/why-bracketed-paste-mode-is-enabled-sporadically-in-my-terminal-screen 关闭即可。\r\n\r\n---\r\n# 后记\r\n在试用了一圈主流 Linux 发行版后，我有些泄气：Linux 发行版在最近几年，大多数只能以「毫无长进」来形容。\r\n\r\n但我又安慰自己：毕竟，这是由爱好者组成的开源社区志愿开发的。没有厂家的官方驱动，没有商业的资金支持，大多数开发者都寸步难行，取得[这样的成就](http://healthnews.sohu.com/a/575728185_223764)实属不易。\r\n\r\n不过，我个人认为，**Linux 各个发行版目前最大的问题是**：发行版的数量实在太多，光是包管理器就有数十种：apt、pacman、yum、pkg、apk…… 碎片化情况比 Android 还严重，几乎每月都有新的发行版出现，又有老旧的发行版宣布停止开发。新的发行版带来了新的包格式、新的窗口管理器、新的桌面环境……需要花大量开发者的人力物力予以适配；而老的则让一部分应用程序的运行机会又消失在历史的长河中。如此下去，没有哪一个发行版真正有机会覆盖每一种需求、修复每一个 Bug、添加每一项支持，只是重复「出现——造轮子——失去资金/社区支持——倒闭」的循环，Linux 桌面系统也会一直原地踏步，无法前进。\r\n\r\n坚信 Linux 越变越好并不会让它越变越好，自由软件也不是所有问题的答案。只有 Linux 这些桌面发行版愿意抛弃各自建立的代码堡垒、联合起来，制定统一的标准，发出一致的声音，才会有厂家愿意提供驱动支持，有大众消费者愿意接受这一崭新的平台。\r\n\r\n","cover":"images/photo-1629654297299-c8506221ca97.webp","link":"ubuntu-usage-test.html","preview":"\u003cp\u003e因为它并不好用。\u003c/p\u003e\n","title":"2022 年，为什么我依然不推荐 Linux 作为日用环境"},{"content":"\r\n![Photo by \u003ca href=\"https://unsplash.com/@nate_dumlao?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText\"\u003eNathan Dumlao\u003c/a\u003e on \u003ca href=\"https://unsplash.dogedoge.com/?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText\"\u003eUnsplash\u003c/a\u003e\r\n](images/nathan-dumlao-ewGMqs2tmJI-unsplash.webp)\r\n\r\n嗨，各位。距离上一次更新博客已经过去了整整一年——准确地说，是一年零三个月多。毕竟我把每年必更的年度总结都鸽掉了……\r\n\r\n一年时间吧，说长也不长，说短也不短。进入大学之后的生活格外悠闲。没有繁重的作业和考试（期中季和期末季除外），相比于高中，每天的课程量也约等于零…… 但是，时间却不可思议地自我收缩了。虽然在大学生活了一年半的时间，却感觉收到录取通知书仿佛是昨天才发生的事。\r\n\r\n可能这就是所谓的 Routine 吧。重复了数百遍的同一天，和经历了数百天的生活，完全是两码事，而我现在就落在了前者中。\r\n\r\n# 生活现状\r\n总之呢，博主现在已经从刚进大学时懵懵懂懂的高中生「升级」为了懵懵懂懂的大学生。具体就表现在缺乏探索的热情，精通烂泥扶不上墙的精神品质，哈哈。\r\n\r\n每天忙着完成各种作业、实验和讨论，工作量上来说倒也不至于很忙，但是因为相比于疯狂压榨的高中生活，可利用的日均工作时间大大减少，所以实际上繁忙程度也差不多。\r\n\r\n不过，留给自己的时间变得很多就是了，不然我也不会有空写代码、学习感兴趣的新东西。\r\n\r\n# 为啥一直不更新？\r\n还记得我在 [2020 年的日志](2020-hopes.html) 里说的吗？\r\n\r\n当初因为工具问题，停更了一段时间，**而这次又是工具问题**……\r\n\r\n现在我所使用的博客构建系统「纸小墨」，由于开发者弃坑很多年，使用的模板中的第三方库已经非常老旧，被报出了一大堆 Bug……\r\n\r\n最近几周，我一直在着手升级这一块，但是苦于对前端技术了解不多，越修越烂，最后彻底坏掉不能用了。一气之下，我就把代码扔在那里摆烂了，而博客也因此一直没有更新。\r\n\r\n上周因为上海疫情严重，我们改成了网络授课，学生都只能留居寝室区，过着食堂-寝室两点一线的生活。今天上午一时兴起，又把代码扒拉出来研究研究。经过和同寝前端大佬痛苦的 Debug，终于修到了能用的地步。\r\n\r\n于是，才有了今天下午的这篇小短文的更新。\r\n\r\n**之后的话，我会尽量提高更新频率，也希望各位多多关注……我这个~~年更的~~博主吧！**\r\n\r\n# 关于《零基础微积分入门基本教程》系列\r\n如各位所见，这个系列是我上**高二**的时候，一时兴起写的文章。高三之后因为时间不足，基本上就没怎么更新过了，等上了大学就彻底把这事给忘干净了。（**为了避免你没看我的个人简介，再提一嘴：我现在是大学二年级。**）\r\n\r\n最近突然有很多小伙伴加我 QQ，希望了解系列的后续，也不知道是哪些好心的同学在帮我宣传。如果你们中有人看到了这篇文章，**真心感谢你们！**\r\n\r\n怎么说呢？**在大学里真正系统学习了微积分的入门知识后，现在我已经有点不忍直视我以前写的东西了……** 感觉逻辑上有点混乱，也不是很确定这些内容是否是真的对大家有用。\r\n\r\n**不过，既然承诺过要更新的，最近还是尽量多写一点，争取周更，尽快把求导的部分知识介绍完！**\r\n\r\n不过，因为视角不太一样，经过大学数学的系统训练之后，感觉自己已经很难摆脱那种满嘴「显然」「易得」「假设」「被定义为」「当且仅当」的「数学腔」了……**可能之后写的内容的画风和之前有一点点不一样，我自己都察觉不到的那种细微差别。还请大家多多包涵！**\r\n\r\n# 其他碎碎念\r\n有人说 2022 是 2020 too，因为今年的疫情一波来得比一波猛，大有重返 2020 之势。 当下，连上网课都已经经典复刻 2.0 版了。\r\n\r\n2020 年，我还在准备高考，坐在家里听智学网讲语数英物化生。眼下，我坐在大学寝室里，听腾讯会议讲离散数学、统计学、最优化方法……\r\n\r\n但愿我也能有 2020 那样的探索欲和勇气，去走完这一年的历程吧。\r\n\r\n![2022 年 3 月 12 日晚，摄于复旦大学宿舍楼](images/2022-fudan-dorm.webp)\r\n","cover":"images/nathan-dumlao-ewGMqs2tmJI-unsplash.webp","link":"2022-and-about-me.html","preview":"\u003cp\u003e关于我鸽了一年多这件事\u003c/p\u003e\n","title":"2022 和我自己"},{"content":"\r\n\r\n（以下更新于：2020年12月26日13点）  \r\n\r\n眼见着2020年还剩下几天的时光，回想这一年，真的是感慨万千。  \r\n  \r\n越是繁杂的时光，渡过后的回忆尺度就越是渺小。而2020年，简直就是如水般无声流过，待到想起，已是新年钟声临近时分。  \r\n\r\n# 2020 \r\n上半年的记忆是灰色的。  \r\n  \r\n还记得2019年12月31号那天，我特地熬到了凌晨零点，卡着点假模假式地写了点作业，寓意“新的一年要一直学习”。  \r\n（但很奇怪的是，详细的场景，到了今天却已经模糊了。就像上半年的其他记忆一样，现在回想起来都是支离破碎。只记得一些零散的片段。）  \r\n  \r\n  \r\n然后到了一月份。我和同学一起为期末考试做准备，并苦苦等着放假。学校期末考试之后还要上一段时间的课，美其名曰“期末讲评”。  \r\n20号，我们终于结束了高三上学期。收拾了半天东西，我骑上自行车，拎着大包小包回家了。  \r\n  \r\n然后，病毒的消息从武汉传来。然后，武汉封城了。  \r\n\u003c/br\u003e\r\n从未知肺炎，到新型冠状病毒，到`Wuhan-CoV`，到`2019-nCoV`，到`SARS-CoV-2`，再到`COVID-19`，病毒的真面目被一步步揭开。从回顾的角度来说，或许我们当时没必要那么恐慌。但是，我们当时一无所知。  \r\n  \r\n像其他所有重要的记忆一样，一月份底的那段时光，被奇怪地从记忆中抹去。回想起来，记得的只有电视上很多很多人恐慌的面孔、不断被渲染发酵的本地疫情信息、一天12小时循环播放的社区抗疫的嘈杂广播、菜市场里抢购一空的蔬菜、千方百计搞来的一两把白色口罩、每天疯狂跳动的疫情数字、摆在家门口的酒精消毒喷剂...  \r\n  \r\n![2020年2月15日，摄于家中](images/winter-house.jpg)\r\n\r\n二月份，网课时代开始了。第一次，我在一个完全不同的地方——家里——开始了朝七晚十二的生活。那个月里，尽管不在学校，每天的作息却一样固定：早起打卡（~~还记得一张早读照片用了一个礼拜hhh~~），上午上课，中午午休，下午再上课（通常是在床上报到），傍晚打印一天的作业，晚上熬夜写作业并钉钉拍照提交......由于家里的环境一般不太适合学习（~~尤其是我在玩手机游戏时~~），感叹“希望早点开学”是常有的事。  \r\n哦，二月还有一件事。2月28号，是原定高考一百天的倒计时。\u003cspan style=\"background-color:black\"\u003e(为什么要刮开？你很懂诶) 具体来说，是和同学一起做了一个百日誓师视频...往事不堪回首，休提为妙。\u003c/span\u003e   \r\n三月份，疫情逐渐转好。到了四月份，终于迎来了盼望已久的开学。   \r\n\u003c/br\u003e\r\n\r\n笑笑哭哭，高三下学期过得是如此之快，以至于过得如此波澜不惊。试卷、笔记、满天飞的作业，是我高三留下的最后念想。  \r\n\r\n高考结束后的暑假，比想象中也更加无趣。大部分时间都花在了同学聚会上，还有少许时间出去匆匆自驾游了一圈，算是给高中生活划上了一个不太圆满的句号。  \r\n    \r\n（至于高考前最后几天的经历，请[参考此页](before-ncee.html)。）\r\n\r\n---\r\n\r\n下半年和上半年完全是割裂开来的两个东西。    \r\n  \r\n![自驾前往上海途中，摄于马鞍山长江大桥](images/bridge.webp)   \r\n\r\n\u003e \t下半年的第一件大事就是收到录取通知书。想象中十分遥远的大学生活，如今已经近在眼前，让我有一种不真实感。然而拿在手里的红色信封真切地告诉我，一段新的人生旅程即将开始。回想高三，那像是一段被精致提炼的时光，除了学习以外，再难找到一件能花时间做的事，更不用说培养任何爱好了。我想到曾经听说大学生活的自由、开放、多元、独立……不禁对这样的生活充满了憧憬和希望。  \r\n\u003e 但事实状况往往事与愿违，最初的大学生活就让我品尝到了受挫感。我不知道我为大学生活做的准备是否充足，但是刚开学的那一段时间，我显然过得不太顺利。行程数百公里，来到一座陌生的城市，和志愿者一起搬运行李，到了在宿舍住下时，已然风尘仆仆。面对自己的生活，从未独自打点生活的我感到手忙脚乱，常常惹出一些啼笑皆非的麻烦来。但是，麻烦不止于此。在社交方面，作为一个不善言语、又不曾有过广泛爱好的人，在新的学校结交新朋友同样困难重重。大多数情况下，我只能看着旁人结伴出游，听着他人聊着完全不熟悉的话题，而未曾有过加入他人行列的勇气。在大学的第一个月，我几乎都是以这样的懵懂心态度过。  \r\n\u003e （———摘自期末作业之一）\r\n\r\n而当下毛手毛脚地处理DDL的日子，更让忙里偷闲的我怀念起高中的日子来。想念高中阳台上的三国杀局，想念高中的上课节奏，想念高中融洽的同学关系....  \r\n下半年比上半年过得更轻松，也更累。\r\n\r\n\r\n要是让我给2020一句话作为终结的话，我觉得这句不成诗意的话是——  \r\n  \r\n**漫长而短暂的一年又一年。**\r\n\r\n---  \r\n（以下更新于：2020年12月31日23点）  \r\n  \r\n离跨年不到一个小时。室友们在联机打`xBox`，高中同学们在看B站跨年晚会直播消遣；我一边听歌，一边慢吞吞地在笔记本上打着字。  \r\n眼前，我编织不出什么诗一样的语言来形容现在的心情，因为它与平时晚上似乎没什么两样——当然嘛，「跨年夜」作为人为规定的历法、人为规定的计时方式、人为规定的时区制度之下的人造事件，本身确实没有太多的天然意义。  \r\n  \r\n但它确确实实联系起了每一个人，最终酝酿出了一种属于人类的集体情愫。在这样的一个日子里，你吃的每一种食物、走过的每一条街、路过的每一个行人，在你的记忆里，仿佛都拥有了与众不同的含义——更难怪我会写这么一篇短文来记叙一年的时光了。人之所以为人，有一部分原因可能就是拥有这样完全熟悉而陌生的时空体验吧。  \r\n  \r\n说回我自己。上海的冬天比想象中要冷，虽然只有零下几度，但是海风阵阵劲吹下，依然有身处北方的寒冷。\u003cspan style=\"background-color:black\"\u003e在这样的天气里，想扫除困意而静下心来复习也是一件困难的事。事实上，面对期末只有十几天的事实，我确认自己还没有做好充足的准备...\u003c/span\u003e  \r\n  \r\n无论如何，想想停停地写到这里，已经是23:30了。  \r\n还有半个小时，人类格里高利历法在东八时区即将迎来一个新的轮回。   \r\n\r\n\u003ciframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2\u0026id=434902428\u0026auto=0\u0026height=66\"\u003e\u003c/iframe\u003e  \r\n\r\n2021，欢迎！\r\n\r\n---\r\n（以下更新于：2020年12月26日13点）\r\n\r\n# 2021\r\n新的一年就在眼前，我又有怎样的期望呢？我不太清楚。  \r\n我甚至不敢确定我是否敢于期望。毕竟，对2020的期望如此美好，而它却如此震撼。我不敢再有什么「非分之想」。  \r\n总之，2021要来了。就像每一个过去的一年一样，纵使时间流逝，有些东西是不会变的。  \r\n\r\n  ---\r\n2021，你好。  \r\n\r\n![Photo by Yohan Cho on Unsplash](images/yohan-cho-Mwvhyd22Lyw-unsplash.webp)","cover":"images/yohan-cho-Mwvhyd22Lyw-unsplash.webp","link":"2021-future.html","preview":"\u003cp\u003e时间似水如月，捉摸不定\u003c/p\u003e\n","title":"2021年，一年又一年"},{"content":"\r\n进入大学生活有一个月了。  \r\n在上海这座城市，在复旦这所大学里，我看到了很多，学到了很多，比之前三年的高中生活还要多得多。    \r\n之前常常听到老师或家人说些什么「进入大学你就轻松了」，原来事实却完全不是如此。  \r\n\u003c/br\u003e\r\n大学的生活，比想象中要精彩，比想象中更无趣。\r\n\r\n---\r\n# 自由？\r\n进入大学的第一感觉就是：真tm的自由！   \r\n\u003c/br\u003e \r\n没有人再管你上课听不听、玩不玩手机；  \r\n没有人为了你的作业迟交忙个不停；  \r\n没有人监督你几点起床，几点休息；  \r\n没有人为你通宵打游戏找你的茬；  \r\n...  \r\n\u003c/br\u003e \r\n听起来十分美好？的确，这样的自由，对高中生来说是一种奢望。  \r\n被高中体制下的生活压迫太久了的人，面对这种自由时的心情，大概只有两种：一是狂喜，二是惶恐。  \r\n刚刚接触大学生活时，只要渡过最开始的不适应期后，大多人表现为前者——毕竟，课业任务不是太重，学起来也还算轻松。  \r\n刚刚爬出了防沉迷系统的坑，和同学整天LOL、彻夜打桌游，似乎是一种新入大学的常态。我身边有些同学也在这么做。  \r\n\u003c/br\u003e \r\n当然，也有的人表现为另一种完全相反的心态——惶恐。  \r\n\u003c/br\u003e \r\n一些人害怕自由，正如在笼子里关久了的鸟儿害怕天空。  \r\n除了上课外，纯粹自主掌控的碎片时间，和尚不成熟的自我管理能力、空虚的时间规划形成了巨大的矛盾。这让他们不知道自己的手脚该往哪里放。  \r\n当惶恐成为占据心理的主导因素时，心里就容不下别的事情了。  \r\n\u003c/br\u003e \r\n看书？看不进去。  \r\n写作业？难到不想写。  \r\n学习？书都不想拿起来。\r\n...  \r\n\u003c/br\u003e \r\n开学时令人紧张兴奋的新鲜感会很快被时间磨平。  \r\n\r\n\u003e 他想，大学怎么可能这么闲呢，有那么多事等着自己去做呢。至少，他要“把中学时没精力、没能允许做的事情做一做”，“买了没看的书抽出时间读一读，每周都去独立影展或者电影资料馆看些好电影，再或者是学一门第二外语”。但进入大学后，这些打算“作为既不重要也不紧急的事情在to do list的地位不断下滑，以至于到最后几乎化成了心底的一道白月光”。  \r\n\u003e   \r\n\u003e ——《三联生活周刊》\r\n\r\n然后剩下什么呢？————空虚。  \r\n  \r\n自己好像整天无所事事，想要去做些什么，但又抓不住。他们生活得恰似《鼠疫》中描写疫中城市的人们：只是在钟表上行走时间而已。  \r\n而身边的声音又会加剧这种焦虑：A同学已经当上了某协会理事，B同学昨天代表学校参加演讲比赛，C同学在迎新晚会上出演压轴节目...  \r\n反观「闲得蛋疼」的自己，又愈发感到「我不能再闲下去了」。  \r\n有人说：\r\n\r\n\u003e 高中，累并快乐着；大学，忙却迷茫着。\r\n\r\n值得讽刺的是，自由，正是多数人高中时的愿望。  \r\n  \u003c/br\u003e \u003c/br\u003e \r\n我就是第二类人。\r\n\r\n# 光环？ \r\n人们总是把有名的大学资历看作「好生活、好工作、好人生的敲门砖」，以至于为名校加上光环。  \r\n然而，说真的，光环也只是虚无的头衔而已。在「社会化内卷」的时代，从名校走出来的学生，面临的是一个竞争激烈程度毫不逊于一般211、985高校学生的社会。  \r\n复旦每年招生 3.5k+ 人，每个人都能成功毕业么？都能找到合适的位置么？扯淡。  \r\n你是复旦，他是上交，从北边还飘来清北的大佬，浙大也来抢社会职业资源....  \r\n无论走到哪里，你我都不大可能成为「第一」，总有比你强100倍、简历也好看100倍的人。  \r\n除非你是真的「卷」。  \r\n有人讽刺「Involution」是一个被误用的、甚至被污名化的词语。但是，说真的，只有深入大学环境，我才明白什么是「绩点为上」，什么是「卷」。  \r\n\r\n\u003e ......描述的现象在清北存在，在我们这所“红专并进，理实交融”的学校更是普遍。比如，我们学校的同学总是将“科”挂在嘴边，但是并没有“学”，这是个形容词，表示一位同学很在意GPA，三句话不离4.3，而且对高绩大佬极度崇拜，但是对于知识本身的热情可能并不大，甚至只愿意学考试要求的；再看向其他地方，就我潜水的数个社团来看，活动寥寥无几，水来水去就只有那几位活跃的同学，且GPA，给分等字眼也像幽灵一样萦绕在上方；学校里也有奇怪的鄙视链，似乎出国的一定是大佬，保研的只能说没有太浪，考研工作的仿佛就抬不起头来；评课社区上，评分高的一定是老师给分好的，如果老师讲得还可以，就能封神了，但是给分不是很宽松甚至比较rigid，那一定会被同学喷的体无完肤，给差评......那除了GPA，还有什么呢？对于我们这种基础学科占大头的学校，那就是科研了。  \r\n\u003e ——中国科学技术大学 分子物理和核物理系学生 @冯 施特劳依\r\n\r\n从头说起。尽管我的大学生活才启程一个月，但我已经开始学会每天跑去图书馆“蜗居”学习了。  \r\n图书馆，当然永远是座无虚席：有人在用 Word 赶论文，有人在一大摞极厚的学科书中翻找，还有人对着笔记沉思...  \r\n一种极压抑的气氛，好像明天就要高考一样——说实在，[高考前](/before-ncee.html)也不过如此。  \r\n  \r\n当你开始大学学习时，你才会发觉：什么光环，只不过是更高层次的内卷罢了。  \r\n名校，真的只是一个高手与高手对决的角斗场。\r\n\r\n# 生活...\r\n大学生活是在湍急的水流中艰难维持航线的航行。  \r\n贴一份我自己的时间表：\r\n\r\n```python\r\n6:40 起床\r\n7:00 晨跑\r\n7:10 早餐\r\n8:00 上课\r\n11:35 下课\r\n11:55 午餐\r\n12:10 回寝室\r\n13:30 上课\r\n15:10 下课\r\n15:25 到图书馆自习\r\n18:00 离开图书馆\r\n18:30 晚餐\r\n19:00 到教学楼自习\r\n20:30 离开教学楼\r\n21:00 洗漱\r\n22:00 游戏/编程\r\n24:00 睡觉\r\n```\r\n\r\n每天都是相同的 Pattern 。  \r\n说实话，我觉得宁愿忙起来，也不要闲下去。  \r\n写到这里，实在没啥继续写下去的动力了。  \r\n  \u003c/br\u003e\r\n或许这也是一种大学新生的表现？  \r\n但愿我的大学生活会好起来。\r\n\r\n---\r\n\r\n谢谢阅读。","cover":"images/fudan.webp","link":"what-college-taught-me.html","preview":"\u003cp\u003e大学的生活，比想象中要精彩，比想象中更无趣。\u003c/p\u003e\n","title":"大学教会了我什么"},{"content":"\r\n# 写在前面的废话\r\n今天，繁重的开学前任务终于告一段落了。  \r\n然后为了庆祝（？）此事，特地把原先无比缓慢的`CloudFlare`忍痛换成了付费`CDN`。  \r\n这个`CDN`不仅**免备案**，而且有国内直连线路，网站加载起来跟原来相比真的是呼呼的~ ~~果然充钱才能变得强大...~~    \r\n\u003c/br\u003e\r\n除此之外，它最大的优点在于**巨特么便宜**！`1GB`流量才1块钱，1块钱啊...  \r\n纵览国内外各种`CDN`动辄一个月成百上千的费用，这个真的是非常香了。   \r\n\u003c/br\u003e\r\n`CDN`名叫`Node Cache`，支持欧美/亚太/中国线路无缝切换，熟悉网站的朋友应该略有耳闻。他们最近在搞新人注册送**100G无门槛流量**活动，  \r\n[用我的邀请链接注册](https://console-api.nodecache.com/f?aff=rz1q04)可以**多拿500G流量**!  \r\n（虽然有恰饭嫌疑，但是确实可以拿到啊QAQ） \r\n\r\n![Node Cache 宣传图](images/nodecache-banner.webp)\r\n\r\n# ATRI总评\r\n言归正传，不能被广告带跑了...  \r\n\u003c/br\u003e\r\n先贴一段来自[萌娘百科](https://zh.moegirl.org.cn/ATRI_-My_Dear_Moments-)的游戏介绍：  \r\n\r\n\u003e 《ATRI -My Dear Moments-》是由 ANIPLEX.EXE 和 Frontwing、枕社(The pillow) 共同制作，并由 ANIPLEX.EXE 发行的一部人机恋题材的视觉小说游戏。于 2020年6月19日 在Steam平台和DMM平台上同步发售。\r\n\r\n \r\n尽管我Galgame玩得非常少，但是我也知道AI人机恋已经是一个老得不能再老的题材了...  \r\n\u003c/br\u003e\r\n就日本方面来说，比较早的动画作品有2000年的[《人形电脑天使心》](https://zh.moegirl.org.cn/%E4%BA%BA%E5%BD%A2%E7%94%B5%E8%84%91%E5%A4%A9%E4%BD%BF%E5%BF%83)、2002年的[《最终兵器彼女》](https://baike.baidu.com/item/%E6%9C%80%E7%BB%88%E5%85%B5%E5%99%A8%E5%A5%B3%E5%8F%8B/3224767)等。  \r\n即便在中国，也有[台湾奥尔资讯](http://www.auer.com.tw/)制作的《恋爱物语：我的机器人女友》Galgame游戏（发行年份不可考，根据安装包的`Apache Ant`构建版本判断在`2007年`左右）。  \r\n\u003c/br\u003e\r\n因此，我很怀疑`ANIPLEX.EXE`——作为一个刚刚成立不到一年的工作室——在这方面炒冷饭还能炒出什么东西来。刚开始游戏时，也就是抱着 Steam 好评99%+ 以及「原画不错」的印象去玩的，权当消磨时间。  \r\n\u003c/br\u003e\r\n\r\n---\r\n\r\n（温馨提示：下面有少量剧透，**不影响游戏体验**！）  \r\n\r\n开头的剧情非常平淡，也就是捡到个张口就喊男主角「主人」的少女机器人——ATRI（亚托莉）。  \r\n然后就埋下一个巨大Flag——亚托莉不能和男主一起生活太久。  \r\n然后就是「阿西莫夫机器人三原则」的介绍。  \r\n然后疯狂发糖发到齁。   \r\n\u003c/br\u003e \r\n这样的开头基本上是所有人机恋题材的共性了，~~除了亚托莉很可爱之外，~~ 没什么可圈可点的...  \r\n![沉睡的亚托莉](images/ev003bl.webp)  \r\n![苏醒的亚托莉](images/ev003el.webp)\r\n\u003c/br\u003e \u003c/br\u003e \r\n不过剧情越到后面，越能展现出这部作品的魅力所在，越让我刮目相看——**人机之间的感情还能这么写**！  \r\n\u003c/br\u003e\r\n直至迎来第一个转折点——男主发现日志，让我对它的评价直接上升为「**大作**」（也可能是我同题材游戏玩得太少了QAQ）。这样的情节转折，是我在之前的各种作品中很少见到的。  \r\n\u003c/br\u003e \r\n一般的人机恋爱主题作品里，常常花很大的篇幅渲染机器人的感情有多么发达、多么完善、多么与人类接近，人类又有多么痴情、多么热爱....，**而《ATRI》却展现出了另一种剧情的可能性**。（至于究竟是怎样的发展，请自行探索，在此不多剧透啦）  \r\n\u003c/br\u003e \r\n同时，我也很担心往后的情节是否会一落千丈，或者至少因为前期情节太冲击而让我失去对后期的兴趣。  \r\n\u003c/br\u003e \r\n不过果然这个作品的结尾还是没有让我失望。无论是`Happy end`的激情、`Bad end`的崩坏还是`True end`的感动，都帮助我找回了曾经玩 Galgame 大作的感觉...  \r\n\u003c/br\u003e \r\n\r\n---\r\n[Bad End 的 亚托莉 CG](images/ev019bl.webp)（防剧透，**图片容易引起生理不适**，请谨慎观看）  \r\n（~~但是说实话我超喜欢这张CG！~~）\r\n\r\n---\r\n\r\n\u003c/br\u003e \r\n\u003c/br\u003e \r\n而最近的 Galgame ，越来越偏向于「成人向」、是游戏就必加色情内容的趋势，有些甚至有着一言不合就上床的神奇情节，好像不来点颜色就不算 Galgame 一样。    \r\n\r\n这样的 sex 情节当然一时间很吸引眼球，还能骗到大把新玩家，但是很容易造成内容的同质化，玩家也容易产生「过饱和」的审“色”疲劳心理而下降对 Galgame 的兴趣程度。  \r\n\r\n除此之外，这样的趋势也会给大众造成「Galgame 就是色情游戏」的片面误解，只会让 Galgame 的路越来越窄。  \r\n\r\n\u003c/br\u003e\u003c/br\u003e\r\n《ATRI》就是这样一部在如今的清一「色」的Galgame中让我耳目一新的一个「全年龄向」作品，让我重新拾起了对视觉小说的热爱。\r\n\r\n![Eden 中的斑鸠夏生与处于「某状态」的亚托莉](images/ev012bl.webp)  \u003c/br\u003e\r\n\u003cfont size=2\u003e(「某状态」是啥？————自己去玩就知道啦ww)\u003c/font\u003e  \u003c/br\u003e\u003c/br\u003e\r\n总之，如果让我给这部作品评价，我觉得完全可以称为「**神作**」。无论是有挖掘空间的剧情深度、另类末世的故事背景还是艺术性的命运巧合，抑或是游戏本身的画质和背景音乐，都达到的很高的水准。  \r\n\r\n\u003c/br\u003e\r\n如果你从未玩过Galgame，或者对Galgame失去了信心，不妨体验一下这款“炒冷饭”作品带来的新的感动。  \r\n\u003c/br\u003e\r\n这款作品目前在 [Steam](https://store.steampowered.com/app/1230140/ATRI_My_Dear_Moments/) 上可以买到PC正版，**自带官方简体中文**（包括CG也是中文）。   \r\n\u003c/br\u003e\r\n如果你没有钱钱或者没有电脑，网上也有 Android 移植版资源。这里就不直接贴链接了，支持正版！\r\n# 尾声\r\n最后以本作的名言作结吧：   \r\n\u003ccenter\u003e\u003cfont size=5\u003e「在日渐沉没的世界里，我找到了你。」\u003c/font\u003e \u003c/center\u003e\r\n\u003c/br\u003e\u003c/br\u003e\r\n\u003ccenter\u003e\u003cfont size=5\u003e「时间停止吧，你是多么美丽——」\u003c/font\u003e \u003c/center\u003e ","cover":"images/atri-wp.webp","link":"atri-galgame.html","preview":"\u003cp\u003e无剧透评价，放心观看\u003c/p\u003e\n","title":"《ATRI -My Dear Moments-》通关后感想"},{"content":"\r\n![图片来源:https://www.zcool.com.cn/work/ZMjkzMTA1Mg==.html](images/gaokao.jpg)  \r\n  \r\n今天，我得知了自己的高考考场位置。 \r\n   \r\n很幸运，我在自己的学校考试——这意味着可以省去很多不必要的麻烦。我大大松了一口气。  \r\n  \r\n看身边的同学，有的愁眉苦脸，有的兴高采烈，都躁动成一团。愁眉苦脸的，想必是分到了号称\"本地最差条件考场\"的 SQ 中学：桌椅破旧得像解放遗物，整个教学楼就一个厕所，考场考务人员还不喜给外校考生好脸色看。  \r\n  \r\n据说去年有个本校女生在那里考试，因为身份证没带，一时又不能补办，被该校老师斥责哭了。当然，最后她考得也很差。\r\n  \r\n身边的同学依旧在闹，嘈杂混乱。  \r\n  \r\n不过，幸好，幸好，这些都与我无关了。我是这么想着的。\r\n  \r\n---\r\n  \r\n下文更新时间:2020年7月2日23点\r\n  \r\n# 4天\r\n当我写下这些文字时，正是深夜11点40分，离高考还有四天。  \r\n  \r\n  \r\n有人问我高考前是什么感受？  \r\n  \r\n超级紧张？激动？惶恐？晚上辗转反侧睡不着？  \r\n  \r\n都不是。  \r\n  \r\n是平静和茫然。  \r\n  \r\n当这场号称是人生最重要的考试，真正来到你面前时，当万千考生口耳相传的\"千军万马过独木桥\"之后，终于轮到你上独木桥时，你已经没有什么感觉了。  \r\n  \r\n独木桥在前面晃悠，你在岸边走。你知道，你迟早要过去的——你可能过得很优雅，也可能过得很狼狈；你可能会被同行人挤下桥，也可能把身边的一切都甩在身后。不管你怎么想，你终究要走上去。  \r\n  \r\n经历无数次考试，号称被考得最焦的高三学生，面对考试这件事，已经麻木了。  \r\n  \r\n《高考必刷题》上有一段话说得不错[\\[2\\]](#2):  \r\n  \r\n\u003e 高考  \r\n\u003e 无非就是很多人做同一张卷子  \r\n\u003e 然后决定去哪座城市  \r\n\u003e 做什么工作  \r\n\u003e 今后和谁相知  \r\n\u003e 和谁一起旅行  \r\n\u003e 和谁走一辈子  \r\n\u003e   \r\n\u003e 不管结局如何  \r\n\u003e 那些熬过的夜  \r\n\u003e 刷过的题  \r\n\u003e 吃过的苦  \r\n\u003e 会铺成一条宽阔的路  \r\n\u003e 带你去你想去的地方  \r\n  \r\n---\r\n  \r\n   \u003cbr /\u003e\r\n下文更新时间:2020年7月3日22点  \r\n   \u003cbr /\u003e\r\n    \r\n# 狂欢\r\n今天，离高考还有3天，离学校停课还有2天。明天是我们正常上课的最后一天。       \r\n   \u003cbr /\u003e\r\n按理来说，今天也可以算作是毕业的\"前夜\"了。对于高中生活最后的时光，就算没有给老师的鲜花和掌声，至少也该有些有纪念意义的东西吧？  \r\n  \r\n——记得初中毕业的时候，我们流泪，我们拥抱，我们互赠同学录，互相留下姓名，承诺着\"一定不要忘记\"之类的幼稚的话……  \r\n   \u003cbr /\u003e\r\n   \u003cbr /\u003e\r\n然而事实是——**我们  _什么_ 也没有做**。  \r\n   \u003cbr /\u003e\r\n不知是心理和生理都太累了，还是什么别的原因，总之我们确实什么也没有做。  \r\n   \u003cbr /\u003e\r\n语文老师的课照常不听。  \r\n   \u003cbr /\u003e\r\n数学老师的课上继续写作业。  \r\n   \u003cbr /\u003e\r\n物化生课上发呆。  \r\n   \u003cbr /\u003e\r\n至于英语老师的课上，后排同学唠嗑的声音都快盖过老师的大嗓门了。略微发福的老师也不恼，就笑眯眯地看着我们继续讲卷子。  \r\n   \u003cbr /\u003e\r\n丝毫没有面对高考的紧张，一切都像是离高考还有两三年的样子。  \r\n   \u003cbr /\u003e\r\n   \u003cbr /\u003e\r\n不过，确实有一些改变发生在我们当中。  \r\n  \r\n傍晚，吃完有史以来在学校食堂吃的最豪气的一顿晚饭——毕业前要把饭卡里的钱刷光——之后，我和同学一边聊着特朗普能不能连任、肖战还能捞多少钱等等与高考毫无关系的话题，有一搭没一搭地回到教室。  \r\n  \r\n还没走到教室跟前，就听到了欢笑声，推门一看：  \r\n后排几个同学在对象棋残局指指点点，前排几个平时不大说话的女生在纸上下五子棋，阳台上一群人围坐着打三国杀身份局……   \r\n  \r\n他们真的对游戏本身感兴趣吗？或许是。不过我想，最主要的，大概是对即将到来的高考的压力的逃离，以及对同学回忆的创造吧。  \r\n  \r\n这段时间我们实在考了太多的试，有太多的错题，想了太多的心事。游戏，是解脱，是逃避，是释放，是回忆：现在不玩，以后想作为高中生的身份再聚一起，还有可能吗？\r\n   \r\n愈发减少的高考倒计时牌下，是愈发躁动的心灵。\r\n  \r\n我加入了狂欢。\r\n  \u003cbr /\u003e\r\n   \u003cbr /\u003e\r\n    \u003cbr /\u003e\r\n     \u003cbr /\u003e\r\n 晚自习时，班主任把我叫到阳台，祝贺我获得了本校高考的buff，又语重心长地跟我叮嘱了很多:不要贪凉，注意饮食，不要像Z同学和X同学一样在高考前受伤生病……讲了很多才让我离开。  \r\n  \u003cbr /\u003e\r\n   \u003cbr /\u003e\r\n  离开阳台时，我心里一阵酸楚——这个40多岁就谢顶的中年男人，大概再也无法叫我上黑板写数学问题的解答了。\r\n  \r\n\u003ciframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2\u0026id=458004314\u0026auto=0\u0026height=66\"\u003e\u003c/iframe\u003e\r\n\r\n  \r\n---\r\n  \r\n   \u003cbr /\u003e\r\n下文更新时间:2020年7月4日22点  \r\n   \u003cbr /\u003e\r\n    \r\n# 序幕 \r\n  \r\n今天是我们上课的最后一天。\r\n \u003cbr /\u003e\r\n  \u003cbr /\u003e\r\n7:30到学校。放下书包，我们就迷迷糊糊地开始了告别之旅。   \r\n \u003cbr /\u003e\r\n我知道小学生再见时的懵懂天真，知道初中生告别时的热泪盈眶，也知道大学生毕业时的激情飞扬。\r\n \u003cbr /\u003e\r\n 但是高中生与这三者都不同：我们早已经脱离了动辄哭鼻子的年龄，也远未达到大学生那样可以成熟而含蓄地表达感伤的思想水平。\r\n  \u003cbr /\u003e\r\n 再者，在依然沉闷的试卷评讲和考前指导中，我们的伤感又被再一次冲淡。\r\n  \u003cbr /\u003e\r\n  \u003cbr /\u003e\r\n 所以，戏剧性的是:**我们  _仍然_ 什么也没有做**。  \r\n \u003cbr /\u003e\r\n \u003cbr /\u003e\r\n 不过，各科老师一点点地，帮我们找回了这种情感。\r\n \u003cbr /\u003e\u003cbr /\u003e\r\n 首先是英语课。英语老师直接放弃了今天上午最后一节课上课的机会，让我们自由地听音乐。我们争相上去点歌，几个同学差点打起来，给我们最后的高中校园生活增加了一点笑意。\u003cbr /\u003e\u003cbr /\u003e\r\n 最后他说，抱歉，让你们三年，啊不，两年半都摊上了这样一个英语老师。(高一下学期重新分班。)\r\n \u003cbr /\u003e\r\n 气氛突然变得伤感，我们拼命地鼓起掌来，意图打破这种毕业前的歉意和尴尬。我们看着他微笑着退场。\r\n \u003cbr /\u003e\u003cbr /\u003e\r\n 然后是语文老师。三年来她第一次没有拖堂，读完两篇高考范文，下课时一句祝愿，扬长而去。\r\n \u003cbr /\u003e\u003cbr /\u003e\r\n 再者是物理老师。平常一口流利的方言的他，却在祝福我们高考顺利的时候，用起了标准的普通话。五十多岁的中年男教师，扭扭捏捏的，像个二十几岁的小伙子。\r\n \u003cbr /\u003e\u003cbr /\u003e\r\n 化学老师临走时开玩笑说，高考考砸了，可不要把责任怪到我头上啊。\r\n \u003cbr /\u003e\u003cbr /\u003e\r\n 生物老师一反常态地没有表示[\\[3\\]](#3)，或许是一天的课上得太累了，她一脸疲惫的来，又一脸疲惫的走。\u003cbr /\u003e\u003cbr /\u003e\r\n 一天的课结束了。我暗自思忖:我们的心情该是如何？难过，悲伤？\r\n \u003cbr /\u003e\r\n 突然想到一句诗词：\r\n \r\n \u003e 此去经年  \r\n \u003e 应是良辰好景虚设\r\n\r\n不由得吟咏出来：便纵有千种风情，更与何人说？\u003cbr /\u003e\r\n ……\r\n \u003cbr /\u003e\u003cbr /\u003e\r\n 晚自习时，数学老师聚精会神地在笔记本电脑上打字，不时还敲两下鼠标。\u003cbr /\u003e\r\n 他或许是在为明天的最后一次班会准备PPT，又或许已经在为下一届高一制作课件。\u003cbr /\u003e\r\n 我不禁想到——送走了我们，他终会迎来下一届新的高一学生，下一批崭新的面孔，下一群性情各异的学生……\u003cbr /\u003e\u003cbr /\u003e\r\n对老师来说，三年是一个周期。一届又一届，在高一与高三之间回荡。\u003cbr /\u003e\r\n我们只是他们人生中的过客，三年匆匆而来，又匆匆收拾离去。\u003cbr /\u003e\r\n人生如逆旅，我亦是行人。或许他们也是我们人生中的过客，只是，我们没法再陪伴他们走完下一程了。我们就要离开了，在离开之前留下最后的终章。\u003cbr /\u003e\u003cbr /\u003e\u003cbr /\u003e\r\n高中的结局奏罢了。\u003cbr /\u003e\u003cbr /\u003e\r\n高考的序幕拉开了。\u003cbr /\u003e\u003cbr /\u003e\r\n\r\n![今晚学生收拾学校物品回家时，校门口拥挤的家长](images/school-gate-night.jpg)\r\n\r\n  \r\n---\r\n  \r\n   \u003cbr /\u003e\r\n下文更新时间:2020年7月6日12点  \r\n   \u003cbr /\u003e\r\n    \r\n# 前夜 \r\n  \r\n明天是高考了。\u003cbr /\u003e\u003cbr /\u003e\r\n\r\n昨天上午，我们参加了最后一次班会。  \r\n   \u003cbr /\u003e\r\n一大早到校，班主任反常地主动放起了音乐————平常，他是最反对这些“扰乱心思”的东西的。  \r\n   \u003cbr /\u003e\r\n   发下准考证、毕业照、健康承诺书，他打开了临时赶做的PPT。白底黑字，内容很简单，就是一些考前注意事项。\r\n      \u003cbr /\u003e\r\n   然后，他简单交代了一些东西：考试应急处理，考后日程表，还让我们抄下了班级QQ群号。\r\n      \u003cbr /\u003e\r\n\t  我们默默听着。\u003cbr /\u003e平素这些老生常谈的东西，如今看来，如此珍贵。\u003cbr /\u003e班会一结束，我们就彻底与高中时光说再见了。\r\n      \u003cbr /\u003e\r\n\t7点半到8点半，一个小时的光阴流水而逝。\r\n\t\u003cbr /\u003e\u003cbr /\u003e\r\n\t末了，他扫视了一下我们所有人，好像在努力记住每个人的相貌。我们都沉默不语：仿佛经历生离死别，此时此刻，一切都在无言中。\r\n\t\u003cbr /\u003e\r\n\t最后，他郑重叮嘱道[\\[1\\]](#1)：\r\n\t\r\n\u003e “你们是理科生，以后免不得有人要搞科研这条路。  \r\n\u003e  \r\n\u003e 所以，一定一定要记住的是：**诚实、善良**。这比你有多大成就都重要。  \r\n\u003e \r\n\u003e 你们要知道这句话：**越聪明的人越危险**，他/她一动歪脑筋，对国家、对社会的危害都更大。  \r\n\u003e \r\n\u003e 社会首先看你的人品道德，然后看你的知识水平，等你们进入社会马上就知道了。  \r\n\u003e \r\n\u003e ————还有一件事，**一定一定要热爱祖国**。你看看，你们以后要深造，可能有人要出国留学发展。  \r\n\u003e \r\n\u003e 好多留学生在外国待久了，把家都忘了！**你们不能忘掉中国，一定要回国作贡献**！\r\n\r\n\u003cbr /\u003e      \u003cbr /\u003e      \u003cbr /\u003e\r\n\r\n\r\n\r\n今天上午，写了一张语文卷，一张理综卷。\u003cbr /\u003e简单批改了一下，成绩并不好。\u003cbr /\u003e下午要看考场，而我还在这里慢吞吞地打字。\u003cbr /\u003e父母劝我最后一天放松一下，但我到现在还没复习错题。\u003cbr /\u003e班级QQ群沉闷，无人说话。\u003cbr /\u003e\u003cbr /\u003e\r\n各种事情冲向我，但我并无所谓。\u003cbr /\u003e\u003cbr /\u003e彼方在前，\u003cbr /\u003e前夜无梦。\r\n\r\n**(完)**\r\n\r\n---\r\n  \r\n   \u003cbr /\u003e\r\n下文更新时间:2020年7月27日8点  \r\n   \u003cbr /\u003e\r\n  \r\n# 后记：彼方\r\n\r\n昨天上午10点11分，高考成绩出榜了。  \r\n \u003cbr /\u003e\r\n23日，起床之后整个人烦躁不安。我在烦躁什么？或许是在担心高考成绩吧。  \r\n当初高考之后，估分的场景历历在目。对一题，心就凉半截；对到一半，简直没劲再对下去了。只想把手机扔掉，趴上床大哭。   \u003cbr /\u003e   \u003cbr /\u003e\r\n但是分还是要面对的。10点左右，爸妈坐在客厅看电视，我在卧室里一个人对着新笔记本电脑发呆。电视上正播放着高考专题，主持人正讲解着今年安徽省控分数线，还夹杂着采访学生、新闻发布会的嘈杂声。   \u003cbr /\u003e  \r\n抱着一种似乎无所谓的心态，我假装随意点开了高考分数查询页面。不知怎么的，平时开个百度都懒得打字的我，那串复杂的网址，却输得那么熟练。   \u003cbr /\u003e   \u003cbr /\u003e\r\n望着那个橙色的查询网页，我有点胆怯。从抽屉里翻出了十几天未见的高考准考证，颤抖着手指快速输入信息，希望手的速度能超越大脑关掉网页的愿望。   \u003cbr /\u003e   \u003cbr /\u003e\r\n输完验证码，我毅然决然地按下查询。   \u003cbr /\u003e\r\n那一刻，我想到了很多。我想到前一天我们尽情玩乐的同学聚会，想到离交卷还有三分钟，仍有两道大题未完成的高考数学，想到我那惨不忍睹的估计分数……   \u003cbr /\u003e   \u003cbr /\u003e\r\n祈祷吗？我没有祈祷。现实毕竟不是影视作品，不会在关键时刻自动放慢速度，也没有扣人心弦的慢动作瞬间。   \u003cbr /\u003e\r\n   \u003cbr /\u003e\r\n   事实上，好笑的是，回应我的是屏幕上五个简单的字：   \u003cbr /\u003e   \u003cbr /\u003e\r\n   “验证码错误”   \u003cbr /\u003e   \u003cbr /\u003e\r\n诧异，但同时又松了一口气。我关掉提示框，重新输入验证码，依然是这5个字。   \u003cbr /\u003e   \u003cbr /\u003e\r\n如同临刑的犯人在受刑前一刻听到大喊“刀下留人”一样，我赶紧找到了合理的解释：查询系统还没有被准备好。   \u003cbr /\u003e   \u003cbr /\u003e\r\n我不知道这样一个小插曲给我造成了多大的影响。但是，再一次查分时，我几乎没有什么犹豫了：很快地输入准考证号，考生号和身份证号，顺手敲下回车。   \u003cbr /\u003e  \r\n页面快速呈现了出来，没有给我什么准备时间。   \u003cbr /\u003e   \u003cbr /\u003e\r\n我的成绩是——692分。安徽省120+名。   \u003cbr /\u003e   \u003cbr /\u003e\r\n我的第一反应是惊奇：我是不是输错准考证号了？但是页面上我的姓名和个人信息都清晰地呈现，不会有错。   \u003cbr /\u003e   \u003cbr /\u003e\r\n那一刻我的心理又回归了“高考前”式的沉默。   \u003cbr /\u003e   \u003cbr /\u003e692…科大倒是可以，清华估计没希望了。我的心又沉下去一点。   \u003cbr /\u003e\r\n母亲走进了我的房间，边走近边紧张地向我询问高考成绩。当我把电脑屏幕转向她时，她脸上的欣喜，我无法用文字描述。她高兴得亲了我一口。   \u003cbr /\u003e   \u003cbr /\u003e\r\n待家人都冷静下来，我心里仍是一如既往的平静。查分后感动得痛哭流涕，都是电视新闻上的桥段，我做不到。   \u003cbr /\u003e   \u003cbr /\u003e \r\n然后就是亲戚无休止的电话，是老师的祝贺，是同学在QQ群疯狂刷屏的“苟富贵无相忘”……   \u003cbr /\u003e   \u003cbr /\u003e   \u003cbr /\u003e\r\n彼方真的到来了吗？我不知道。   \u003cbr /\u003e   \u003cbr /\u003e\r\n我打开QQ，点开“红警（游戏群）”，输下“来一局”，回车。  \u003cbr /\u003e\r\n有时候，游戏真的能让人想起很多东西。 \u003cbr /\u003e比如，为什么要探寻。\r\n\r\n \r\n---\r\n### 附注\r\n\u003cdiv id=\"1\"/\u003e1:非原话，凭记忆复原。  \r\n\u003cdiv id=\"2\"/\u003e2:两段话分别在《高考必刷题》和《高考必刷卷》上。  \r\n\u003cdiv id=\"3\"/\u003e3:我记不清了。  ","cover":"images/gaokao.webp","link":"before-ncee.html","preview":"\u003cp\u003e写于高考前夜…以及高考后\u003c/p\u003e\n","title":"向往的彼方"},{"content":"\r\n \r\n# 前言  \r\n高考终于结束了。。。现在有时间干一些自己愿意做的事了  \r\n\u003c/br\u003e\r\n所以首先想到的是整理一下自己的过去。恰好，陪伴我将近10年的老年机（[ZTE-C R580]()）也该退休了，\r\n\u003c/br\u003e\u003c/br\u003e\r\n这个手机支持`J2ME`平台————当然和`Nokia`的性能比不了啦...————所以我的中学时光，大部分时间都由这些`java`游戏陪伴。\r\n\u003c/br\u003e\u003c/br\u003e\r\n话不多说，分享的内容主要分`软件`和`游戏`两部分。我的设备相关配置如下：\r\n  \r\n| 参数     | 详情                    |\r\n|----------|---------------------------|\r\n| 内存     | 3072KB                    |\r\n| 分辨率   | 240*320                   |\r\n| 按键/触屏？   | 按键                   |\r\n| MIDP版本 | 2.1                       |\r\n| CLDC版本 | 1.1                       |\r\n| 多媒体 | 支持                       |\r\n| 3D API   | 不支持                    |\r\n| 蓝牙     | 不支持                    |\r\n| 文件管理 | 支持                      |\r\n| 外插TF卡 | 支持                      |\r\n| CPU      | 高通骁龙 QSC6085 @ 192MHz |\r\n\r\n配置还是相当低的。所以下面列出的软件和游戏兼容性都非常强，请放心食用\\~\\~\u003c/br\u003e\u003c/br\u003e\r\nPS1：已经全部上传到网盘，链接在文章最后。  \r\nPS2：关于模拟器，电脑上请使用[KEmulator](http://www.downza.cn/soft/27362.html)，`Android`上请使用[J2me Loader](http://java.52emu.cn/j2me.php)。\r\n\r\n# 软件\r\n## X-plore\r\n![](images/QQ截图20200710073905.png)\r\nJava平台上最强的文件管理器！  \r\n支持多种压缩格式，支持蓝牙远程连接管理，当年在塞班上也是一代神软了…  \r\n听说几年前出了`Android`版，一样好用。可惜时过境迁，该淘汰的总该被淘汰了。\r\n## SoundMachine\r\n![](images/QQ截图20200710074106.png)\r\n![](images/QQ截图20200710074116.png)\r\n一个钢琴模拟软件，可以用键盘来弹奏简单的音乐。  \r\n支持MIDI合成乐器。\r\n## 来电小骗子\r\n![](images/QQ截图20200710074256.png)\r\n类似于`Android`平台上的模拟呼叫。可以自定义模拟来电，方便在应急时脱身。  \r\n当然，现在用途已经不大了。\r\n## FirstAid\r\n![](images/QQ截图20200710074443.png)\r\n![](images/QQ截图20200710074508.png)\r\n一本快速急救手册，适用于多种紧急情况…  \r\n虽然有些内容已经过时了，但还是值得一看。\r\n## AnyView\r\n![](images/QQ截图20200710074633.png)\r\n![](images/QQ截图20200710074706.png)\r\n`J2ME`平台上最强的阅读器！  \r\n支持几十种文本格式，堪称当年的看书利器。依稀记得我曾在`AnyView`里用按键机读完整本《白夜行》… \r\n \u003c/br\u003e\u003c/br\u003e\r\n最近， [`AnyView`似乎在`Android`平台重新回归更新](http://www.anyview.net/)了。10年的积淀让我这个情怀党也开始入手了ˉ﹃ˉ\r\n## 天天动听\r\n![](images/QQ截图20200710074835.png)\r\n![](images/QQ截图20200710074857.png)\r\n这个堪称最强播放器啊…  \r\n从`Java`一直到`Android`，这可能是最早支持歌词滚动播放的在线/离线双用音乐播放器了。  \r\n睡眠、锁屏、横屏播放、歌词/写真匹配等现在司空见惯的功能，这个软件或许是先河的开拓者。  \r\n数10年前在线音乐市场的和谐和现在的各方打架相比，不堪回首 눈_눈\r\n## Windows Vista\r\n![](images/QQ截图20200710075004.png)\r\n![](images/QQ截图20200710075021.png)\r\n没有什么鬼用，~~用来装B吧大概~~¯\\\\_(ツ)\\_/¯\r\n## 掌上C语言\r\n![](images/QQ截图20200710075127.png)\r\n![](images/QQ截图20200710075139.png)\r\n![](images/QQ截图20200710075153.png)\r\n非智能机平台上居然还能写c语言，这是我没想到的  !!∑(°Д°ノ)ノ    \r\n依稀记得这是从某个塞班论坛淘下来的老物…只能编写和运行，不能编译，拿来玩玩还是可以的。  \r\n(记得以前还淘到过在`J2ME`上运行的`Java`编译器，不过现在很难找到了叭 ⊙ω⊙)\r\n## 指南针\r\n![](images/QQ截图20200710075427.png)\r\n![](images/QQ截图20200710075412.png)\r\n![](images/QQ截图20200710075403.png)\r\n大概是我换用安卓手机后，这个非智能机上使用频率最高的软件了…  \r\n功能很简单，输入经纬度即可计算日出日落时间、月出月落时间、月相、暮曙光等，还可以将手机屏幕当成指南针…\r\n## 莫尔斯码Lighter\r\n![](images/QQ截图20200710081055.png)\r\n![](images/QQ截图20200710081115.png)\r\n练习摩尔斯电码用。  \r\n偶尔也可以拿来当屏幕手电筒。\r\n\r\n---\r\n\r\n施工中…","cover":"images/nokia-2617880_1280.jpg","link":"my-j2me-game.html","preview":"\u003cp\u003e扔掉老年机前，对过往的追念\u003c/p\u003e\n","title":"一些相当棒的Java游戏"},{"content":"\r\n\r\n# 前言\r\n[纸小墨](https://imeoer.github.io/)作为我个人从2018年开始，长时间使用的少数几个博客软件之一(另外两个是`WordPress`和`Z-Blog`)，自发现以来就一直被我寄予厚望。  \r\n可惜的是，由于软件本身操作复杂，太过小众，前期宣传不足，只在几个程序员的小圈子里流传，后期又没有`Hexo`这样的大量开源用户支持，纸小墨的更新日期已经死在了2015年。  \r\n![纸小墨的主页](images/inkpaper-homepage.jpg)\r\n不过，尽管如此惨淡，也不影响它在我心中的地位…  \r\n  \r\n因此，特地为它用自己~~破烂的~~前端功夫写了个`Material Design`主题。可能没有什么人会真的来使用，但是就我个人来说，留个纪念也了胜于无，证明我曾经用过吧…  \r\n  \r\n---\r\n  \r\n# InkMaterialTheme\r\n简洁大方的 Material Design 主题。  \r\n利用久负盛名的 [MDUI](https://www.mdui.org/) 作为框架支撑，在原版主题上稍作修改，没有进行太多改动以保持纸小墨的简洁本质。\r\n# 使用者们\r\n[行云小站](https://w568w.eu.org/)\r\n# 预览\r\n![](https://i.loli.net/2020/04/03/S5f3NnukdhmYLxr.png)\r\n![](https://i.loli.net/2020/04/03/J4GaYg9VfhLD3S6.png)\r\n# 快速使用\r\n## Step 1\r\n**如果您有`git`工具** : 执行`git clone https://github.com/w568w/InkMaterialTheme.git`。  \r\n**如果您不知道什么是`git`或者没有`git`工具** : 点击页面上绿色的`Clone or download`按钮，选择`Download ZIP`。  \r\n## Step 2\r\n将`theme`目录直接覆盖到你的博客目录下的同名目录。\r\n## Step 3\r\n**如果需要自定义**：浏览`theme`目录，在`_header.html`和`page.html`中，您可以找到自定义的相关说明。  \r\n**如果不需要**：您已经完成了配置！\r\n# 问题\r\n- 搜索时不会展示为卡片\r\n- 搜索时不能用`x`关闭搜索结果。\r\n  \r\n---\r\n  \r\n下载地址: [https://github.com/w568w/InkMaterialTheme](https://github.com/w568w/InkMaterialTheme)","cover":"/images/example-en.png","link":"ink-material-theme.html","preview":"\u003cp\u003e过气 Blog Generator 也要整MD.jpg\u003c/p\u003e\n","title":"纸小墨的 MD 主题 0.1版发布"},{"content":"\r\n\r\n# 前言\r\n作为搞机无数的老机油，我一直对寻找**最佳的**功能型软件有着独特的爱好…  \r\n所以四五年以来，各种软件前前后后用了几十款，稍有不合心意就要换，~~换软件比换老婆还勤快~~  \r\n光安装包就占了硬盘将近50G的空间\\_(:з」∠)\\_  \r\n  \r\n\r\n今天觉得很有必要整理一下，一方面是给自己提个醒，另一方面也是希望能避免看官走我的老路。  \r\nPS:当然，各个人喜好不同，下面列出的只是鄙人在反复比较后认为最佳的软件，各位看官如果有更好的同类软件也欢迎补充 ~   \r\n(话说这来必力最近有点不正常，没办法评论的同学关掉广告屏蔽软件再试试     \r\n下面按照各个功能分类，贴出我心中的最佳软件  \r\nヾ(❀╹◡╹)ﾉ~   \r\n\r\n# 下载工具\r\n## Windows: Internet Download Manager\r\n这个想必我不用多说，大家都懂，Windows平台上最好用的多线程下载工具，没有之一！\r\n## Windows: 极速迅雷\r\n虽然迅雷最新版变得很恶心，但是旧版本的极速迅雷还是值得一试的。  \r\n迅雷在 P2P 下载方面，确实无人能敌；另外对于解决死链，迅雷也很有一套。   \r\n当然这里特指精简版。 \r\n  \r\n## Windows: BaiduPCS-Go\r\n\u003e 2020年4月16日更新:`PanDownload`作者被捕，默哀。  \r\n\r\n这个是专门用来下载百度云文件的工具。  \r\n在油猴脚本、PanDownload等工具相继失效之后，应该是目前Windows平台上少数没有被完全限速的软件之一了。  \r\n下载请直接到[Gayhub](https://github.com/)搜索～\r\n## Android: Advanced Download Manager\r\nADM是安卓平台上的与IDM相同的佼佼者，想必也不用多说了（ '▿ ' ）\r\n \r\n# 文档编辑\r\n## Windows \u0026 Android: WPS\r\n尽管有不少人黑它，但[WPS](https://wps.cn)确实是目前国内最好用的Office替代品。  \r\n由于目前的国内网络环境，`Microsoft Office`同步速度真的慢慢慢慢，每一次打开云文档都要卡好久눈\\_눈，因此相比WPS，Office对国情支持不好，~~功能再多也会被局域网打倒~~。  \r\n有人反感WPS的广告和会员，觉得它吃相太难看。我的建议是使用`精简版`或`破解版`…当然，如果你对破解版比较敏感，也可以手动在`维护工具`里关掉WPS广告。  \r\n至于会员…不用会员功能不就行了么∠( ᐛ 」∠)\\_  \r\n \r\n# 音视频剪辑\r\n## Windows: Goldwave\r\n作为非专业剪辑人士，我对这方面的需求并不是很大，顶多就是剪剪vlog什么的…所以`Goldwave`这么一款业余级的轻量音频剪辑工具，已经完全够用。  \r\n如果是需要制作一些专业的视频，还是建议上`Adobe After Effect`和`Adobe Premiere`。对这方面了解不多，我就不多嘴了。\r\n## Android: 快剪辑\r\n这里肯定会有人推`KineMaster`或者`威力导演`…   \r\n尽管它们确实很好用，但是在我的老华为上不兼容啊QAQ  \r\n快剪辑虽然是360推出的业余剪辑工具，但是它分轨、转场、时间轴编辑功能一应俱全，足以满足大多数日常要求。  \r\n另外，快剪辑有个非常棒的功能:**自动根据音频生成字幕**。这个做旁白非常合适～  \r\n\r\n# 日程安排\r\n  \r\nPS: 现在做日程安排，**基本上是用纸笔了**。相比于在手机上点击\\[完成\\]，个人感觉还是拿笔在纸上划掉更爽…  \r\n所以下面推荐的是__曾经用过__的，而并非正在用的。  \r\n  \r\n## Windows＆Android: Microsoft Todo\r\n这个也算是后起之秀吧，微软把`奇妙清单`收购了之后，开发的新版本。  \r\n优点在于UI美观(~~微软破天荒地没有使用`Windows 10 UI`~~)，而且能与微软账号关联…果然这种 App 还是依托大公司的更好…  \r\n目前测试还不需要翻墙，不知道以后会怎么样。\r\n  \r\n# 即时通讯\r\n  \r\n## Windows \u0026 Android: Telegram\r\n如果不是上网课，我可能会一直用tg…可惜现在日常生已经被钉钉占领了…  \r\n除了极高的安全性，开源和隐私防护也是我选择TG的理由。我虽然不是狂热的开源爱好者，但是在对于每天都要打交道的应用来说，还是尽量选择保护性高的比较好…  \r\n\r\n# 通信信道\r\n## Android: 灵狐浏览器  \r\n使用这个并不是因为它有多好用，而是它是唯一宣称已经过国家许可的公有免费信道工具。  \r\n有人可能疑惑我为啥不用`Virtual Private Network`、`Way To Ray`或者`Socks`工具。我得承认我在这方面有点“精神洁癖”：宁可不浏览受限网页，也不想随便被警察叔叔请喝茶…  \r\n~~当然还有一个原因就是**没钱啦**~~\r\n  \r\n目前应用还没有要收费的迹象，应该还能免费用很久。用手机号注册就能登陆。  \r\n有人担心郭嘉授权的会不会有隐私记录？这一点可以肯定地说，是**一定会有的**。所以它只适合拿来查查资料，看看推特脸书油管，而不适合进行敏感操作。有句话说得好：_不做亏心事，不怕鬼敲门_…  \r\n  \r\n---\r\n  \r\n大概就这些了，后面想到再补充吧。🙈","cover":"/images/my-software.jpg","link":"my-best-software.html","preview":"\u003cp\u003e闲来无事也整理一下吧~\u003c/p\u003e\n","title":"我心中的最佳软件合集"},{"content":"\r\n# 什么是CI？\r\nCI，即Continues Integration，是一种软件开发实践，如一个团队的开发成员经常集成他们的工作，通常每个成员每天至少集成一次，也就意味着每天可能会发生多次集成。每次集成都通过自动化的构建（包括编译，发布，自动化测试）来验证，从而尽早地发现集成错误。  \r\n通俗的解释就是每次提交代码到 Github，都会触发某种自动化过程(如自动编译,测试等)，以跟进开发过程。  \r\n当然我们这里使用它，不是这个目的！我们希望实现的是:在每一次提交新文章到`Github Pages`时，远程都能自动生成网页，免得本地手动生成的麻烦…  \r\n这里决定使用的是`Travis CI`，它的优点是能直接与Github集成，省去很多麻烦。\r\n\r\n# 1.注册Travis CI\r\n打开[Travis CI](travis-ci.org)，用Github账号登录。  \r\n简单配置一下`token`，一路下一步就好了…  \r\n这里偷个懒(\u003ev\u003c)，详细步骤来自于[这里](https://dmego.me/2017/10/13/deylpoy-hexo-with-TravisCI/)：  \r\n## 在GitHub 上生成 Access Token\r\n\r\n如果想要 让`travis CI`构建完成之后自动 push 到 master 分支，则travis需要有对这个仓库进行操作的权限，此时我们就需要为Travis CI 配置`Access Token（访问令牌）`。  \r\n\r\n在GitHub上生成Access Token 的步骤是，点击头像进入设置（Settings）,然后点击左边菜单栏最下面的`Developer settings` 选项，进入后点击左边的`Personal access tokens`选项，进入后点击右上角的`Generate new token`按钮。  \r\n \r\n先给 Token 起一个名字，然后为它设置一些权限，其中`repo`的权限是必须的，其他可以随意添加。  \r\n\r\n点击下面的 create token 按钮，就会生成一个已经赋予好权限的 token 值，接下来我们进入Travis CI 网站的配置中。  \r\n## 配置 Travis CI\r\n\r\n如果之前从未使用 Travis CI 来构建项目，则我们先需要使用GitHub账号来登录网站,登录进来后，如果底下 没有把 GitHub 仓库中的项目加载进来，可以手动点击右上角的 `Sync account` 按钮，待到同步完成后将要自动构建的项目开启。  \r\n\r\n开启后点击设置图标就可以进行一系列的设置，先开启`General`里的两项选项：  \r\n\r\n    Build only if .travis.yml is present:只有在.travis.yml文件中配置的分支改变了才构建  \r\n    Build branch updates:当分支更新后开始构建  \r\n\r\n然后在`Environment Variables`一栏里将在 GitHub 下获取的的`Access Token`值添加进来。   \r\n呼呼~ 这样就配置完成了。接下来我们需要设置`.travis.yml`。  \r\n  \r\n# 2.配置`.travis.yml`\r\n`.travis.yml`是一个简单的脚本兼配置文件，用于指示如何进行自动化构建。  \r\n一个通常的`.travis.yml`大概如下:\r\n```\r\nlanguage: node_js\r\nnode_js: stable\r\n\r\n# S: Build Lifecycle\r\ninstall:\r\n  - npm install\r\n\r\nbefore_script:\r\n  - npm install -g gulp\r\n\r\nscript:\r\n  - hexo g\r\n\r\nafter_script:\r\n  - cd ./public\r\n  - git init\r\n  - git push\r\n# E: Build LifeCycle\r\n\r\nbranches:\r\n  only:\r\n    - master\r\nenv:\r\n global:\r\n   - GH_REF: github.com/xxx/xxx.git\r\n```\r\n  \r\n其中各个部分含义:  \r\n```\r\nlanguage:用于指定预配置环境，如nodejs、java、android等。系统在构建前会自动安装所需环节。\r\n \r\ninstall和before_script:在开始操作前执行，一般用于下载、安装自己在构建中所需要的库。\r\n \r\nscript:正式的构建过程。\r\n \r\nafter_script:构建之后执行，一般用于发布或者push。\r\n \r\nbranches:指定在哪条分支上发生变化时开始构建，通常是master。\r\n \r\nenv:Environment，一些环境变量。\r\n```\r\n  \r\nPS:**如果没有指明系统环境，构建所使用的系统都是Linux哦！**\r\n害，说了这么多废话，(¬◡¬)✧总算要入正题了！  \r\n这里以我所使用的博客软件`纸小墨`为例；  \r\n当然，如果你使用`hexo`等软件，过程也大同小异。  \r\n我们的操作大概分以下几步:  \r\n\r\n1. 下载`ink`构建文件。\r\n2. 执行`ink preview`进行构建。\r\n3. `git`推送到`master`分支。\r\n4. 删除构建中的临时文件。\r\n  \r\n但！是！这里有一个坑:**推送到master分支的过程会再次触发自动构建，导致进入递归，无限构建的过程…**  \r\n解决这个坑也不难，只要在`push`前判断一下就好了，下面直接上代码:  \r\n```\r\nlanguage: node_js\r\nnode_js: stable\r\n\r\n# S: Build Lifecycle\r\nbefore_install:\r\n  - wget https://imeoer.github.io/release/ink_linux_386.tar.gz\r\n  - tar -zxvf ink_linux_386.tar.gz\r\n  - ls\r\n  - sudo mv ./ink /usr/local/bin/\r\n\r\nscript:\r\n  - ink build\r\n\r\nafter_script:\r\n  - git config user.name \"w568w\"\r\n  - git config user.email \"1278297578@qq.com\"\r\n  - rm -rf ink_linux_386.tar.gz\r\n  - rm -rf ink_linux_386.tar.gz.1\r\n  - rm -rf ./blog/\r\n  - rm -rf ./ink\r\n  - git add .\r\n  - if [ $(git log -1 | grep -c \"Update\") -gt 0 ]; then echo \"Have been updated\";else git commit -m \"Update\"\u0026\u0026git push \"https://${ttoken}@${GH_REF}\" HEAD:master;fi\r\n# E: Build LifeCycle\r\n\r\nbranches:\r\n  only:\r\n    - master\r\nenv:\r\n global:\r\n   - GH_REF: github.com/w568w/w568w.github.io.git\r\n```  \r\n其中的`ttoken`是上一步中定义的`access token`的变量名。\r\n这里应该不需要太多解释吧…重要的就是这一行:  \r\n  \r\n```\r\nif [ $(git log -1 | grep -c \"Update\") -gt 0 ]; then \r\necho \"Have been updated\";\r\nelse \r\ngit commit -m \"Update\"\u0026\u0026git push \"https://${ttoken}@${GH_REF}\" HEAD:master;\r\nfi\r\n```  \r\n  \r\n稍微有一点Linux Shell基础的同学知道，它的意思是判断上一次提交的`message`中是否含有`Update`字样，如果含有则放弃本次提交。  \r\n# 3.提交\r\n全部做完后别忘了提交到远程git库！  \r\n然后，应该就可以看到第1次结果啦~  \r\n（ '▿ ' ）  \r\n![如图！ヾ(❀╹◡╹)ﾉ~](https://i.loli.net/2020/03/13/pmVI26dSXlaJKvZ.jpg)  \r\n  \r\n# 后记\r\n\r\n现在想起来其实这种做法挺蠢的，为什么不在一开始就分出`master`和`source`两个分支呢？  \r\n~~还是暴力出奇迹好哇~~","cover":"images/sai-kiran-anagani-555972-unsplash.jpg","link":"travis-ci-for-blog.html","preview":"\u003cp\u003e…实在懒得build静态网页了…\u003c/p\u003e\n","title":"用 Travis CI 实现博客持续集成"},{"content":"\r\n# 关于一直没有更新的解释…\r\n其实并不是忘了…  \r\n博客用的是`纸小墨`作为`Blog Generator`，而这个破工具偏偏只支持`Windows和Linux x86`平台！家用的电脑没有安装Git，所以一直懒得更新…  \r\n今天上午花了一上午时间捣鼓了`Travis CI`来做持续集成，这样至少在开学前都可以更新了。 \r\n# 现状\r\n因为[新冠疫情](https://h5.qzone.qq.com/ugc/share?sharetag=7E2D4743BE91531F83382AB42C5E6A7E\u0026jumptoqzone=1\u0026bp7=\u0026bp2=\u0026bp1=\u0026_wv=1\u0026g_f=2000000103\u0026no_topbar=1\u0026res_uin=1278297578\u0026appid=311\u0026cellid=ea45314c43ce275e93590e00\u0026subid=\u0026g_ut=3\u0026plg_dev=1\u0026plg_usr=1\u0026plg_auth=1\u0026plg_nld=1\u0026plg_uin=1\u0026from=mp)被困在家里两个月了，难受  \r\n连续上了一个多月网课，对网课质量表示担忧…\r\n# 展望\r\ncoding 什么的也先放放吧，还是希望今年高考能考个好成绩QAQ！冲鸭！  ","cover":"","link":"2020-hopes.html","preview":"\u003cp\u003e为什么我在今年高考？！！\u003c/p\u003e\n","title":"2020年，展望"},{"content":"\r\n![Photo by Kristina Tripkovic on Unsplash](images/kristina-tripkovic-602495-unsplash.jpg)\r\n\r\n# 关于w568w的近况 \r\n\r\nw568w已经在高中紧张的学习里被淹没啦.....  \r\n所以这里给出一些可以紧急找到w568w的联系方式哦  \r\n\r\n# 联系方式\r\n1. Email: 1278297578(at)qq.com (☆推荐!基本上每天查看并处理一次)\r\n2. 直接在本站评论区评论 (消息会即时转发到w568w的邮箱呢)\r\n3. QQ: 1278297578 (大概每两到三周登录一次)\r\n4. 在[Github](https://github.com/w568w/)上发issue找我 (同样会转发到上面的邮箱)","cover":"/images/kristina-tripkovic-602495-unsplash.jpg","link":"how-to-contact-me.html","preview":"\u003cp\u003e关于博主的一些联系方式\u0026hellip;\u003c/p\u003e\n","title":"如何联系到失联的博主"},{"content":"\r\n![Photo by Trent Szmolnik on Unsplash](images/trent-szmolnik-1262773-unsplash.jpg)\r\n\r\n# Happy new year!\r\n原谅我迟到的新年祝福！：P  \r\n各位看官，新的一年里也要元气满满哦！~","cover":"images/trent-szmolnik-1262773-unsplash.jpg","link":"2019-new-year.html","preview":"\u003cp\u003e新的一年，新的开始\u003c/p\u003e\n","title":"Hello 2019"},{"content":"\r\n\r\n\u003e **2023 年 1 月 27 日更新：**  \r\n\u003e \r\n\u003e 本文正在施工中，将原[作业部落](https://zybuluo.com/w568w/note/1081202)的文章迁移到这里。  \r\n\u003e 因为早年撰文不注意，本文中格式存在各种问题（如中英文标点乱用、数学符号不规范、中英文间无空格等等），需要修复完毕后才能继续更新，预计会于最近几天完成。敬请关注。\r\n\u003e\r\n\u003e **2023 年 2 月 13 日更新：**\r\n\u003e\r\n\u003e 首次更新完成，修复了大部分格式问题，但仍有少量问题未修复，如有发现请在评论区指出，谢谢。  \r\n\u003e 目前网站可能比较卡顿，考虑一下科学上网吧。\r\n\r\n$$\\lim_{学习 \\to 坚持} 学习=成功$$\r\n# 前言\r\n非常高兴你能浏览到这篇文章。\r\n我也不太清楚我写作的动机，可能纯属兴趣使然吧。\r\n# 参考书籍\r\n\r\n1. **《高等数学（第六版）》上册**  \r\n 同济大学数学系 编  \r\n 高等教育出版社 出版  \r\n2. **《7天搞定微积分》**  \r\n 石山平 大上丈彦 著 李巧丽 译  \r\n 南海出版公司 出版  \r\n3. **《Principles of Mathematical Analysis》**  \r\n Walter Rudin 著  \r\n McGraw-Hill Education 出版\r\n\r\n# 我是否适合看下去?\r\n在看这篇文章前，你至少需要掌握以下知识：\r\n\r\n1. 至少初中水平的数学应用能力\r\n2. 至少小学水平的阅读能力\r\n3. 耐心和对数学的热情\r\n4. 以上三条是扯淡\r\n5. 这条也是\r\n\r\n# What’s calculus?\r\n在正式开始学习微积分前，首先我们得明白微积分是啥。\r\n\r\n百度一下，我们很容易找到这样的描述：\r\n\r\n\u003e 微积分（Calculus）是高等数学中研究函数的**微分**、**积分**以及有关概念和应用的数学分支。它是数学的一个基础学科。\r\n内容主要包括**极限**、**微分学**、**积分学**及其应用。\r\n微分学包括求导数的运算，是一套关于变化率的理论。\r\n它使得函数、速度、加速度和曲线的斜率等均可用一套通用的符号进行讨论。\r\n积分学，包括求积分的运算，为定义和计算面积、体积等提供一套通用的方法。\r\n\r\n诶诶诶，别跑啊，我知道这种专家写出来的东西不是一般人能领会得了的。。\r\n\r\n简单的说，`微积分学`是高等数学(并不是高中数学)的重要组成部分，它的地位，相当于小学的四则运算或是初中的方程运算。它非常奇怪、麻烦，可是在高等数学中，你时时刻刻都要用到它。\r\n\r\n当然，**人们不会故意发明奇怪、麻烦的东西来为难自己**，它的应用十分广泛，我们在后面会慢慢提到。\r\n\r\n它主要分成两个部分：`微分`和`积分`，它们相辅相成，虽各有变化却互为表里，是一对~~基佬~~兄弟。我们会在接下来的文章中分别讨论这两个东西。\r\n\r\n废话不多说，马上上干货~~\r\n# 一、导数\r\n`导数`是微分学的主要内容。翻回去看看百度百科对导数的解释：\r\n\r\n\u003e 导数描述一个函数的变化率。\r\n\r\n这是啥么意思呢？变化率是个什么东西？\r\n## 1.1 First Blood —— 斜率\r\n先来看个函数图像：\r\n\r\n![](https://s1.ax1x.com/2018/03/21/97PLGR.png)\r\n\r\n相信你一口就能报出这个函数的解析式：$$y=x$$\r\n\r\n然后，我们再看个稍微复杂点的图像：\r\n\r\n![](https://s1.ax1x.com/2018/03/21/97ipZD.png)\r\n\r\n额，这哪里复杂了嘛！明明还是个一次函数啊。。。\r\n\r\n不不不，差别大了去了，试试找出这两个函数图像的不同之处？\r\n\r\n上下滚动页面，你应当能够看出`图像倾斜程度`存在着区别，有的数学老师也叫它「$k$ 决定函数陡平」啥啥的。\r\n\r\n回忆一次函数的表达式:$$y = kx+b (k≠0)$$\r\n哈，所以上面这个式子里，**$k$值的大小就代表着图像倾斜程度的大小**，不是吗？\r\n\r\n好了，你的头脑中已经有了基本的微分概念了，同学们，下课！\r\n\r\n\r\n![你的表情？][3]\r\n哈哈，开个玩笑，还是先别急着关掉页面(从哪里能找到这么没节操的文章 真是)。  \r\n不过这句话并没有问题，应当说，从初中学习函数开始，我们就有了对于这些知识的模糊概念，只是它们尚未发掘出来。~~所以这篇所谓的教程，其实就是帮助万恶的数学老师解决这些概念问题...~~\r\n\r\n还是回到上面这个简单的例子。我们说$y=x$与$y=2x$这两个函数的**倾斜程度**不同，因为$y=2x$显得更\"陡\"一些。\r\n\r\n虽然小明同学觉得这样描述很好，但是呢，数学家们就是不满足于「a 比 b 陡」这样听起来不是很清楚(~~也可能是因为他们语文阅读能力不行~~)的描述方式，(这样听起来不够**炫酷狂霸拽**)于是发明了一个很好(奇)听(怪)的名字用来描述一条线的陡峭程度，这就是————**斜率**。\r\n\r\n当当！我们终于接触到了第一个数学定义。\r\n\r\n呃...虽说这个定义还不完整，甚至你还没弄清啥意思，不过万事总有个开头的，是吧？\r\n\r\n接下来我们将慢慢解释斜率这个听起来很高大上的名词。\r\n\r\n既然说斜率是个数值，是数值就应该能被写出来。那么我们怎么表示它呢？\r\n\r\n再再一次回到上面的例子。容易发现，当$k=2$时，图像明显比$k=1$时的要陡峭不少。继续画下去：$k=3、4、5、6、7...$\r\n图像会越来越陡。\r\n![不同颜色的直线对应了不同的 $k$][4]\r\n我们发现，$k$值增大使得函数更陡峭。\r\n因此，***对于一次函数，我们可以用k值大小来表示它的斜率***。\r\n\r\n这个定义听起来很唐突、很随意啊...高大上的感觉顿时都没有了...\r\n\r\n更一般地说，斜率也可以这么得出:\r\n![][5]\r\n\r\n这样，我们对于斜率就有精确的定义了，它不再是一个模糊的概念，而是一个可以拿来比较大小的数值了。比方说，$y=2x$的斜率就是$2$。\r\n\r\n你可能被这些概念搞得有点懵。重新强调一遍，**斜率描述一条线的陡峭程度**。而**一次函数的$k$值越大，图像越陡**，所以**对于一次函数，我们可以用$k$值大小来描述它的斜率**。\r\n\r\n如果你就是没办法把$k$和斜率联系起来，稍微喘口气，再往下看吧。\r\n### 1.1.1 [选读]斜率的严格定义\r\n（对于初三及以上水平的读者，可以有选择性地阅读这些标有「`[选读]`」文字的部分，因为这些部分可以加深对一些知识的理解。如果你不想看，**跳过也没关系**。\r\n\r\n**警告：数学重灾区，请在监护人的陪同下观看。**）\r\n\r\n\r\n----------\r\n\r\n\r\n先看看百度百科上的`斜率`词条：\r\n\r\n\u003e slope，又称「角系数」，是一条直线对于横坐标轴正向夹角的正切，反映直线对水平面的倾斜度。\r\n\r\n![图挂了，稍后修复][6]\r\n如图，$直线P_1P_2$的斜率即为$k=\\tan\\alpha=\\frac{y\\_2-y\\_1}{x\\_2-x\\_1}$。\r\n其中$α$又被称为`倾斜角`，取值范围为$0^\\circ \\leq \\alpha\u003c180^\\circ$。\r\n\r\n故：当直线的斜率存在时，斜截式$y=kx+b$，其斜率即为$k$。\r\n\r\n\r\n----------\r\n\r\n\r\n## 1.2 点的斜率？\r\n到现在为止，我们所讨论的函数都仅限于一次函数。你可能觉得数学家们真是一群闲得蛋疼的人，一个简单的$k$值都要起个难听的名字。况且，这和微积分有个卵关系？\r\n\r\n别猴急，我们先来进一步讨论斜率的含义。在我们搞清楚这些基本概念前，空谈微积分是没啥意义的。\r\n --- \r\n言归正传。\r\n对于二次函数或者反比例函数，又该如何表示它的斜率呢？\r\n\r\n先来看看这个熟悉的二次函数吧。\r\n![][7]\r\n相信这样简单的U型的函数，你已经非常熟悉了。\r\n但是，在表示它的斜率时，你会发现有点小麻烦，不，是大麻烦。\r\n\r\n对于这个函数，我们还能用$k$值来表示它的倾斜程度吗？\r\n\r\n稍做思考，你会发现行不通。这个函数的陡峭程度不是用一个\"陡\"或者\"平\"能描述得了的。它的图像自左向右，先是快速下降，再逐渐减缓，在原点处猛地拐了一个180度的大弯，又开始逐渐变快、飞速上升。\r\n\r\n那么，显然它的整个图像的斜率已经无法直接表示了。我们是不是能求出其中一段的斜率呢？\r\n\r\n比方说，在y轴右边的这半个曲线，如果只看从0到2这一小段，你会觉得它很像$y=2x$的一小段。\r\n![][8]\r\n\r\n嘿，这一段的斜率是不是差不多是$2$呢？\r\n\r\n不对。\r\n\r\n唔，也不能说是全错，毕竟只是弯了点啊。。\r\n\r\n所以让我们继续放大图像，取更小的区间试试？\r\n于是我们放大大大大大大大大大大大大大（此处省略 N 个大）\r\n![][9]\r\n\r\n诶，这两个图像看起来有一部分重合了呢？！\r\n也不全然，毕竟前者是**曲线**，后者是**直线**呐。。\r\n显然，即使我们放大下去，两个图像也很难有相同的部分，或者说不可能有。\r\n看来硬凑直线的方法行不通，得换个思路。\r\n ---\r\n咳，如果你看得一头雾水，稍微提示一下：\r\n\r\n我们是否能对图像上的**一个点**求斜率呢？\r\n\r\n例如对于$A(1,1)$这个点，我们在它的左右各取一个点B、C，并逐渐靠近它:\r\n\r\n\u003e PS: 从这里我开始尝试使用 GeoGebra 来作图，网页版的画图实在是太!蛋!疼!了!。。\r\n\r\n![][10]\r\n\r\n![][11]\r\n就这样不断靠近靠近。。\r\n![][12]\r\n![][13]\r\n终于，在N+N次逼近A点后，**三个点几乎实现了重合**:\r\n![][14]\r\n注意，我这里之所以强调**几乎**，是因为它们确实没有碰上，只是它们之间的距离已经微小到了无穷的小。\r\n\r\n此时，我们仍然能作直线$BC$，我们就称这条直线为**点$A$在函数$y=x^2$上的切线**。\r\n\r\n好了，讲了这么多，我们可以回到原来的话题了。点A的斜率是多少？我相信，你已经心中有数了吧。\r\n\r\n**二次函数图像上的点A的斜率就是点A在这个函数图像上的切线的斜率。**\r\n\r\n这句话初看有点儿像句绕口令，多看几次才能搞明白。\r\n\r\n(假设你已经看明白了，如果没有，你就假装看懂了 :) )\r\n\r\nOK，那么接下来，让我们正式开始导数的学...哦不！可能还要加点料才行....\r\n## 1.3 极限？\r\n在介绍导数之前，我们还得弄懂另外一个概念:极限。\r\n极限，顾名思义，就是到达了极点的状态。比如说，考试还有1分钟就要结束时题目还没有答完时的感觉，或者暑假开学前的晚上猛补作业时的感受。人们在遇到极限时通常都会想:\"不行了!不行了!\"\r\n\r\n但是，数学中的极限也是这个意思吗？如果指\"不行了\"\"到头了\"，又怎么能解决数学问题呢？\r\n事实上，数学中的极限的含义更加积极，它有\"尽可能靠近\"的意思，也就是无限地靠近。\r\n由于是***数***学，自然离不开数值了...所以，**极限就是指一个数值尽可能地向另一个数靠近。**\r\n\r\n啥叫\"尽可能地靠近\"?举个例子，小明的家距离学校1000m，某天小明去上学，于是他与学校的距离变化如下:\r\n```\r\n1000m\r\n∨\r\n500m\r\n∨\r\n200m\r\n∨\r\n100m\r\n∨\r\n1m\r\n∨\r\n0.1m\r\n∨\r\n0.01m\r\n∨\r\n0.0000000000001m\r\n...\r\n∨\r\n0.0000000000000000000000000001m\r\n```\r\n可以看到，小明与学校之间的距离越来越小，越来越靠近于 0m，但是就是到达不了 0m（~~因为他不想上学~~），于是我们就可以说 \r\n\r\n$$\\lim_{距离 \\to 0 m}$$\r\n\r\n突然给出这么一个数学式子，你可能会一脸蒙蔽：这是个啥？  \r\n查查英汉词典可得知：*Lim* 原来是 *Limit* 的缩写，而 *Limit* 就是「极限」的意思。下面的小字里的「$\\to$」表示「向 xxx 靠近」，所以这里的意思是\"让 距离 这个值给我向 0m 尽可能地靠近!\"\r\n\r\n上面这个式子就表示**距离 无限地向$0\\ m$靠近**(但是就是到达不了$0\\ m$!)\r\n\r\nOKOK，理解了，那么让我们在式子上再加点花样吧!\r\n\r\n$$\\lim_{x \\to a} f(x)=b$$\r\n诶...更晕了...你可能会想：「这东西...现在我连符号都看不懂了！」  \r\n别急，让我再给你挨个儿解释解释！\r\n\r\n---\r\n首先看这个$f(x)$，这里的$f$是啥意思呢？其实很简单，f是单词“function”开头第一个字母，“function”就是函数的意思，所以$f$就是指某个函数。比如说一次函数，在初中学习中我们表示成\r\n\r\n$$y=2x$$\r\n\r\n想表示$x=1$时的值，我们得说\r\n\r\n$$当x=1时,y=2$$\r\n\r\n但是到了高中数学以及高等数学中，因为这样写起来太麻烦了，所以同一个函数，我们表示成\r\n\r\n$$f(x)=2x$$\r\n\r\n想表示$x=1$时的值，就可以简练地写成\r\n\r\n$$f(1)=2$$\r\n\r\n是不是很方便？  \r\n\r\n（顺便说一句，这里不一定必须用$f$作为函数的标识，如果你喜欢，也可以写\r\n\r\n$$我真是酷毙了(x)=2x,我真是酷毙了(1)=2$$\r\n\r\n）\r\n\r\n---\r\n回到上面的式子。**$f(x)$就是以x为自变量的某个函数**，在这里它到底是什么，我们不管它。  \r\n继续往下，下面的\"$x \\to a$\"意思应该是\"自变量x向a无限地靠近\"。  \r\n这样，这个式子我们至少弄懂一半了，$\\lim_{x \\to a} f(x)$就是表示\"对于$f(x)$这个函数，让$x$无限地逼近$a$\"。  \r\n奇怪的是，式子的后面居然出现了等于号...小明上学时，与学校的距离也是一直在不停地变小啊...如果说是无限靠近$a$，又哪来的等于不等于呢？难道$f(x)$这么神奇，可以一边靠近，一边等于某个值吗？\r\n\r\n这里就要提醒一下了:含有$lim$的式子里，所有\"$=$\"的意思都有一点小小的变动，不再表示\"等于什么\"，而是“靠近什么”。\r\n\r\n所以啊，上面这个式子表示**\"当$x$无限地靠近$a$的时候，$f(x)$无限地靠近$b$\"**。  \r\n啪啪啪！第一个奇怪的数学符号，终于是被我们弄明白了！\r\n### 1.3.1 小练习\r\n稍微弄几道关于极限的题来做做吧...我们来找找感觉。\r\n#### 第一题\r\n$$\\lim_{x \\to 1} x=？$$\r\n唉...没什么难度嘛，直接把1代入进$x$算一下，结果就是$1$。\r\n\r\n---\r\n#### 第二题\r\n$$\\lim_{x \\to 3} x^2=？$$\r\n稍微需要一点计算了，$3^2=3*3=9$，所以答案是$9$。\r\n\r\n---\r\n#### 第三题\r\n$$\\lim_{x \\to 0} (2x^2+5x+8)=？$$\r\n似乎和第二题差不多么，只是计算有点麻烦了，列个式子算一下，$2x^2+5x+8=2*0^2+5*0+8=8$，结果是$8$。\r\n\r\n---\r\n#### 第四题\r\n你可能纳闷：这和一般的函数计算有什么区别？从哪里能体现出这个$lim$的特殊性？  \r\n来看这题：\r\n\r\n$$\\lim_{x \\to 1} \\frac{x^2-3x+2}{x-1}=？$$\r\n\r\n妈呀，这题好像不能代入计算了？难道答案是$\\frac2 0$吗？  \r\n不可能，分数的分母不能为0的...  \r\n那要怎么算呢？没有结果吗？  \r\n实际上，我们发现这个式子可以因式分解:\r\n\r\n$$\\frac{x^2-3x+2}{x-1}=\\frac{(x-2)(x-1)}{x-1}=x-2$$\r\n\r\n所以上面的题目就相当于\r\n\r\n$$\\lim_{x \\to 1} (x-2)=？$$\r\n\r\n答案就是$-1$。\r\n\r\n这里你可能会说：$x-1$既然为0了，又怎么能约分上面的分数呢？  \r\n我们需要再看一遍极限的概念：**一个数值尽可能地向另一个数靠近。**这里的$x-1$准确地说，应该是一个非常非常接近于0，但不是0的值，所以是可以约分的。  \r\n这里用到了因式分解的技巧，算是比较麻烦的一题，我们暂时搁下，不深入讨论了。\r\n\r\n---\r\n### 1.3.2 额外的问答时间\r\n你可能还有一些问题..让我尝试解答一下。  \r\n\r\n问：为什么代入数值，求得的就是它的极限呢？有什么理论依据吗？  \r\n\r\n答：这个问题比较难以解释，需要牵扯到函数的连续性之类的。我们还是按下不表，以免影响了本文的易懂性。  \r\n\r\n问：上面说极限的格式是 $\\lim\\limits_{x\\to a} f(x)=b$，怎么后面又写成 $\\lim\\limits_{x\\to 1} x=1$ 了呢？  \r\n\r\n答：格式里给出的写法是大概的、通用的写法，实际使用中我们不会写成 \r\n\r\n$$f(x)=x,\\lim\\limits_{x \\to 1} f(x)=1$$\r\n\r\n这么麻烦，直接用$x$代替极限格式中的$f(x)$，其潜台词也就是默认$f(x)=x$了。\r\n## 1.4 斜率的计算\r\n嗯，讲完了斜率的画法和极限的概念，我们可以综合一下这两个知识，开始真正的导数之旅了。  \r\n\r\n我们来看看斜率到底是怎么算出来的。\r\n![][15]\r\n我们仍然以这个函数图像$f(x)=x^2$为例。  \r\n如果我们设A点的坐标为$(x,f(x))$，那么C点坐标可以表示成$(x+h,f(x+h))$ (h是某个值)，这没问题吧？  \r\n那么\r\n\r\n$$AC的斜率=\\frac{C点纵坐标-A点纵坐标}{C点横坐标-A点横坐标}$$\r\n\r\n如果你看到这个式子感到一脸懵，那么你得重新看看这张图了:  \r\n![][16]\r\n一次函数的斜率是某两点的竖直高度差除以水平高度差。类似地，AC的斜率我们也可以这么写。  \r\n继续我们的计算：\r\n\r\n$$AC的斜率=\\frac{C点纵坐标-A点纵坐标}{C点横坐标-A点横坐标}=\\frac{f(x+h)-f(x)}{(x+h)-x}=\\frac{f(x+h)-f(x)}{h}$$\r\n\r\n这样，我们就得到了两点之间的斜率公式。\r\n\r\n再进一步想想，我们要求出的是点A的斜率，光有两点的斜率公式要怎么办呢？\r\n\r\n不管三七二十一，咱们先把数值代进式子里面再说。A点的坐标是（1,1），所以有\r\n\r\n$$AC的斜率=\\frac{f(1+h)-f(1)}{h}$$\r\n\r\n\r\n这个式子看起来还是没法算啊...让我们稍微再化简一下，可以发现$f(1)=1^2=1，f(1+h)=(1+h)^2$。\r\n\r\n所以这个式子还可以进一步化简：\r\n\r\n$$AC的斜率=\\frac{f(1+h)-f(1)}{h}=\\frac{(1+h)^2-1}{h}$$\r\n\r\n根据刚学到的完全平方公式，还可以再展开:\r\n\r\n$$AC的斜率=\\frac{(1+h)^2-1}{h}=\\frac{h^2+2h+1-1}{h}=\\frac{h^2+2h}{h}=h+2$$\r\n\r\n这里的$h$是多少呢？\r\n\r\n刚才讲到，$h$表示的是A点与C点横坐标的距离。而这两点，在前面就说到是非常非常接近的，所以$h$应该是一个很小很小的值。\r\n\r\n很小很小...很接近很接近...有没有觉得这两句话有点熟悉？  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n没错！就是在 [极限？](#极限) 这一节里，我们简要地讲了如何正确处理数学里很接近的值。\r\n\r\n关键的地方来了！**$h$既然很小，我们就可以把上式加上$\\lim$写成**：\r\n\r\n$$AC的斜率=\\lim_{h \\to 0}(h+2)$$\r\n然后，后面这个式子的计算方式已经略熟悉啦，直接算出\r\n\r\n$$AC的斜率=\\lim_{h \\to 0}(h+2)=2$$\r\n这样，我们就终于得出了**点A(1,1)在$f(x)=x^2$上的切线AC的斜率**，也就是**点A(1,1)在$f(x)=x^2$上的斜率**。  \r\n看起来，计算一个点的斜率也没那么困难嘛！\r\n### 1.4.1 小结\r\n上面求斜率的过程可以概括成这几步：\r\n\r\n1. 在要求斜率的点$(x,f(x))$附近找出一个与它很靠近的点$(x+h,f(x+h))$！\r\n2. 把斜率用$\\frac{C点纵坐标-A点纵坐标}{C点横坐标-A点横坐标}$表示出来！\r\n3. 在式子前面加上$\\lim_{h \\to 0}$，代入进去计算斜率！\r\n\r\n### 1.4.2 通式\r\n从上面的过程中我们可以看出，求某个点的斜率有固定的步骤和方法。依照这个方法，理论上来说我们可以求出任何函数上点的斜率。  \r\n接下来让我们试着找出这样一个公式，来表示任何函数$f(x)$上任意的点$(x,f(x))$的斜率，这样，以后进行计算时就很方便了。  \r\n这个过程并不困难。让我们用$f(x)$来代替上面的$1$就可以了。\r\n\r\n$$斜率=\\lim_{h \\to 0}{\\frac{f(x+h)-f(x)}{(x+h)-x}}=\\lim_{h \\to 0}{\\frac{f(x+h)-f(x)}{h}}$$\r\n\r\n这就是**任意函数在某一点的一般斜率公式**。\r\n呼，~~讲了这么多废话~~，我们总算开始步入正轨~~，而不是在各种概念上原地打转~~了。（哈哈）\r\n\r\n记不住完整的公式也不要紧，需要用到的时候现场推导就可以了，理解这个有点复杂的式子才是关键。\r\n### 1.4.3 求斜率有什么用？\r\n我们已经基本掌握了求某一个点的斜率的方法。那么，这个东西有什么用处呢？  \r\n毕竟，如果没有实际用途的话，这样的数学工具看起来也没有什么意义啊...  \r\n在求导的用途中，最重要的也就是**求某一点的切线的函数式**。  \r\n因为用导数可以得出某一点的斜率，把斜率作为$k$代入$f(x)=kx+b$，很方便地能求出该点的切线方程。  \r\n实际上，在本文中我们就是用\"某一点切线的斜率\"来定义\"某一点的斜率\"的，是不？\r\n\r\n依然以上面一节中的$f(x)=x^2$和点$A(1,1)$为例，我们来求一下A点的切线方程。\r\n\r\n已经知道A点的斜率为2了，所以立即有\r\n\r\n$$g(x)=2x+b$$\r\n\r\n是A点的切线方程。\r\n\r\n又知道这个方程经过A点，故使用待定系数法：\r\n\r\n$$g(1)=2*1+b=1$$\r\n\r\n解得\r\n\r\n$$b=-1$$\r\n\r\n所以A点的切线方程就是\r\n\r\n$$g(x)=2x-1$$\r\n\r\n这个结果对不对？画出来看看就知道有没有问题了。![][17]\r\n图中红色的线就是我们刚刚求出的直线。看起来它的确是A点的切线。\r\n\r\n另一个用途是**求函数的最大/最小值**。容易看出，上面这个函数的顶点$O(0,0)$的斜率为0。  \r\n因为顶点有\"这一点的前后既不在上升，也不在下降\"的性质，所以**顶点的斜率都应该是0**。  \r\n也就是说，只要找到一个函数中有一个斜率为0的点，就可以确定这一点是函数的一个顶点。\r\n\r\n在接下来的 导函数 一节里，我们会讲得更多。\r\n## 1.5 导函数\r\n了解了导数和函数，这个\"导函数\"是个什么东西啊？别急，听我慢慢道来。\r\n\r\n\r\n再看一眼这个式子：\r\n\r\n$$\\lim_{h \\to 0}{\\frac{f(x+h)-f(x)}{h}}$$\r\n\r\n其实，这个式子就是**$f(x)$的导函数**。\r\n\r\n函数是什么？我们复习一下函数的定义：\r\n\r\n\u003e 设A，B是非空的数集，如果按照某种确定的对应关系f，使对于集合A中的任意一个数x，在集合B中都有唯一确定的数$y$和它对应，那么就称映射$f:x\\to y$ 为从集合A到集合B的一个函数，记作$y=f(x)$。\r\n\r\n不好意思拿错了，是这个：\r\n\r\n\u003e 在一个变化过程中，假设有两个变量x、y，如果对于任意一个x都有唯一确定的一个y和它对应，那么就称x是自变量，y是因变量，y是x的函数。\r\n\r\n也就是说，只要有一个对应关系f，就可以说f是个函数。\r\n函是\"匣子\"的意思。把一个数$x$装进一个匣子，按照某个算式计算出另一个数字，就是函数。\r\n\r\n因此，**对f(x)求导的式子也是函数**。\r\n这个函数，对于每一个x，计算出的结果都是$(x,f(x))$在$f(x)$上的斜率。需要求导的时候，我们就不用对每个数字都重新列式求一遍了，直接代入导函数就行，很方便。\r\n\r\n导函数一般记作$f^{\\prime}(x)$。\r\n\r\n---\r\n继续以$f(x)=x^2$为例，我们看看它的导函数长什么样子。  \r\n这次我们不代入任何值，直接运用上面的公式：\r\n\r\n$$f^{\\prime}(x)=\\lim_{h \\to 0}{\\frac{f(x+h)-f(x)}{h}}=\\lim_{h \\to 0}{\\frac{(x+h)^2-x^2}{h}}$$\r\n\r\n然后是\r\n\r\n$$=\\lim_{h \\to 0}{\\frac{x^2+2xh+h^2-x^2}{h}}=\\lim_{h \\to 0}{\\frac{2xh+h^2}{h}}$$\r\n\r\n最后\r\n\r\n$$=\\lim_{h \\to 0}(2x+h)$$\r\n\r\n又因为h靠近0，所以直接舍去，得到：\r\n\r\n$$=\\lim_{h \\to 0}(2x+0)=2x$$\r\n\r\n所以$f^{\\prime}(x)=2x$。\r\n\r\n仔细观察这个式子，我们发现它很有特点。  \r\n比如说想求$A(1,1)$斜率，我们也不用重新计算了，直接用导函数就行了。\r\n\r\n$$A的斜率=f^{\\prime}(1)=2$$\r\n\r\n同理，想求$B(2,4)$斜率的话:\r\n\r\n$$B的斜率=f^{\\prime}(2)=4$$\r\n\r\n是不是很方便？\r\n\r\n---\r\n导函数本身也是函数。所以对导函数$f^{\\prime}(x)$求导还可以得到另一个函数，称为二阶导数，一般记作$f^{\\prime\\prime}(x)$。  \r\n当撇号过多时，比如说有个99999阶导数，直接记作$f^{(99999)}(x)$即可，不用打撇号了。\r\n\r\n---\r\n导函数有什么意义？只是为了装逼吗？  \r\n在了解这个问题之前，先想想导函数$f^{\\prime}(x)$和函数$f(x)$之间的区别和联系。\r\n\r\n| 项目 | $f(x)$ | $f^\\prime(x)$ |\r\n| ---- | ---- | ---- |\r\n| $x$对应的函数值$y$ | 是函数的值 | 是函数$f(x)$的图像上，横坐标为$x$的这一点的求导结果 |\r\n| 是否是函数 | 是 | 是 |\r\n| 求导结果 |$f^\\prime(x)$|$f^{\\prime\\prime}(x)$|\r\n|函数零点的意义|无特殊意义|是$f(x)$的顶点的横坐标|\r\n\r\n(注：零点：函数的零点就是$函数=0$这个方程的解。\r\n比如$f(x)=x^2-1$的零点就是$x^2-1=0$的解，也就是$1$和$-1$ 。）\r\n\r\n所以，导函数有一个重要的作用，就是**计算函数的顶点坐标**。  \r\n由于顶点的特殊性，该点的斜率是0，所以只要找出导函数$f^{\\prime}(x)$的零点，相当于找到了顶点。\r\n\r\n以$f(x)=ax^2+bx+c$为例。它求导的结果是$f^{\\prime}(x)=2ax+b$。\r\n\r\n$f^{\\prime}(x)=0$的解就是$x=-\\frac{b}{2a}$。这是不是与你在课堂上学到的二次函数的最值完全一致？\r\n\r\n---\r\n\r\n导函数的另一个作用是画函数草图。\r\n\r\n前面已经说过，如果导函数$f^{\\prime}(x)\u003e0$，说明函数在这一点上的斜率是正的，也就是说，在这一点的前后，函数应该呈上升的趋势。  \r\n相反，如果$f^{\\prime}(x)\u003c0$，说明函数在这一点上的斜率是负的。在这一点的前后，函数应该呈下降的趋势。  \r\n于是乎，只要搞明白$f^{\\prime}(x)$的图像，就可以把$f(x)$的图像画出来了。\r\n\r\n举个例子，如果我们要画$f(x)=x^2+2$的草图，我们可以结合导函数这么画：\r\n\r\n1. 求导，得到$f^{\\prime}(x)=2x$.\r\n2. 画出$f^{\\prime}(x)=2x$的图像。\r\n![][18]  \r\n1. 准备开始画图！先找出一个起点，这里我们取$f(0)$这一点，也就是$A(0,2)$。\r\n![][19]\r\n1. 按照$f^{\\prime}(x)$的图像所示，y轴的右边应该都是上升的，而且斜率越来越大，也就是：\r\n![][20]\r\n1. 同理，画出左半边：\r\n![][21]\r\n\r\n这样就把$f(x)=x^2+2$的图像大概描出来了。  \r\n这题中导函数的优势还不能充分体现出来。遇到一些比较复杂的函数，一般结合导函数这样画图比较方便。\r\n\r\n### 1.5.1 导数的表示方法\r\n前面说到，导函数一般记作$f^{\\prime}(x)$。  \r\n但是，实际上导函数还有一些常见的表示方法，这里介绍两种，以备后面的~~装逼~~使用。\r\n\r\n第一种也就是刚刚讲的加撇号表示法。这种方法是在19世纪，一个叫 约瑟夫·路易斯·拉格朗日 的法国大叔发明的。\r\n\r\n在他的表示法里，$y=f(x)$的导函数记作$f^{\\prime}(x)$或者$y^{\\prime}$。\r\n\r\n这种表示方法非常常见，因为它写起来很容易，加个撇号只要花上你半秒钟的时间。\r\n\r\n但是，它的弊端在于，如果有这么一个函数：\r\n\r\n$$y=a+b$$\r\n\r\n那么$y^{\\prime}$表示什么？\r\n\r\n$a$和$b$，到底谁才是自变量？谁是常量？\r\n\r\n到底$y^{\\prime}$表示是对$a$求导，还是对$b$求导？\r\n\r\n不得而知。\r\n\r\n要是有一种表示方法可以体现出对谁求导就好了。\r\n\r\n这时，我们就需要第二种表示方法，也就是 戈特弗里德·威廉·莱布尼茨 ，另一个德国大叔的写法。他也是微积分的主要创始人，他生活在17世纪，比上面那位要早几百年。  \r\n对$y=f(x)$关于$x$求导可以表示成：\r\n\r\n$$\\frac{dy}{dx},\\frac{d}{dx}y,\\frac{df(x)}{dx},\\frac{d}{dx}f(x)$$\r\n\r\n这些式子看起来很让人头晕...  \r\n(~~正因如此，他的符号至今仍在大学数学中频频现身。~~)  \r\n这里的$d$是`Derivative(导数)`的首字母。  \r\n式子的含义是对分母上的自变量，求分子上的函数的导数。\r\n\r\n其中，**$\\frac{d}{dx}$可以看成是一个整体，它乘以谁，就是对谁求导。**  \r\n例如：\r\n\r\n$$\\frac{d}{dx}x^2=2x$$\r\n\r\n所以，如果我们想要表示导数的导数，也就是$f^{\\prime\\prime}(x)$，要怎么写呢？\r\n\r\n就是：\r\n\r\n$$f^{\\prime\\prime}(x)=\\frac{d}{dx}\\times\\frac{d}{dx}\\times y=\\frac{d^2y}{dx^2}$$\r\n\r\n分子上加平方的位置看起来怪怪的。而且d似乎也不遵循乘法定律。  \r\n你可能觉得莱布尼兹的方法很麻烦，但是在后面的章节里，你会逐渐明白这样表示的优点。\r\n### 1.5.2 小结\u0026补充\r\n到现在为止，我们已经学会了：\r\n\r\n 1. `斜率`是什么\u0026怎么算\r\n 2.  `导数`是什么\u0026怎么求\r\n 3.  `导函数`是什么\u0026怎么求\r\n\r\n你可能还没有完全掌握以上内容，那也没关系！~  \r\n接下来我们会给出一些简单实用的公式，在你的学习过程中会频繁地使用它们来避免复杂的运算过程。一定要记牢！~\r\n\r\n---\r\n$$b^\\prime=0$$\r\n$$x^\\prime=1$$\r\n$$(kx)^\\prime=k$$\r\n$$(kx+b)^\\prime=k$$\r\n$$(ax^n)^\\prime=anx^{n-1}$$\r\n\r\n以上就是最基础的一组导数公式，其中$a和b$的含义是任意常数。\r\n\r\n**记住了它们，即使不会推算导数也可以轻松求出初高中大部分函数的导函数！**\r\n\r\n**尤其是最后一个，堪称初等函数大杀器...**\r\n\r\n举个例子，要求出$y=2x^{999}$的导函数，直接用上面的公式：\r\n\r\n$$y^{\\prime}=2*999*x^{999-1}=1998x^{998}$$\r\n\r\n是不是贼方便？\r\n\r\n\u003e [选读]这里还有一些为学过三角函数的同学补充的： \r\n\u003e \r\n\u003e $$(sinx)^\\prime=cosx$$ \r\n\u003e $$(cosx)^\\prime=-sinx$$\r\n\u003e $$(tanx)^\\prime=\\frac{1}{(cosx)^2}$$\r\n\r\n### 1.5.3 五年高考，三年模拟(雾)\r\n总觉得应该来几道题目练练手...  \r\n虽然这样有点像老师上课的模式，有悖本文的初衷，但是练习一下真的能掌握不少...  \r\n废话少说，放题过来！  \r\n![][22]\r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n\r\n1. 求出$f(x)=x^4-2x$的导函数。\r\n2. 求出$f(x)=(x+2)^{11}$的导函数。\r\n3. 求出$f(x)=x^{x}$的导函数。\r\n4. 求出$f(x)=\\sqrt{x}$的导函数。\r\n5. 求出$f(x)=\\sqrt[x]{x}$的导函数。\r\n6. 求出$f(x)=\\sqrt[sin(x)]{x^{cos(x)}}$的导函数。\r\n7. 对于以上题目，你有什么感想？\r\n\r\n\r\n---\r\n作者的话：最近学业方面实在比较忙，先是期中考，又是统考月考周考什么的，今天刚参加全省联考.....(高二狗，体谅一下)说好的两个月完工也没下落了:(\r\n\r\n**2021年9月24日更新：作者回来啦！现在已经是一条大二狗了，国庆期间会重启更新~**\r\n\r\n---\r\n### 1.5.4 导函数的四则运算\r\n上面那几题已经让你晕头转向了？没关系！看完本节和下一节之后，你将可以很快地计算出它们~~从而去装B~~！\r\n\r\n迄今为止，我们提到的例子都是一些比较简单的函数（额，当然上面的几题除外）。  \r\n基本上函数里都只有一个$x$。形式也就是$x+1$，$x^2$这样的，大家都学过了。\r\n\r\n但是，平时遇到的函数可没这么简单，数学考试里当然不会直接出这样的玩意儿来考你。即便刚刚学过二次函数，你也应该已经遇到$f(x)=x^2+3x+2$或者$f(x)=(x-2)^2+3$这样的函数了。**这种东西要怎么求导数呢？**\r\n\r\n其实很简单！不妨回忆一下下我们上面提到过的例子：  \r\n\r\n\u003e以$f(x)=ax^2+bx+c$为例。它求导的结果是$f^\\prime(x)=2ax+b$。\r\n\r\n（限时挑战任务！看看你能不能在 10 秒内找到这句话的出处:) ）\r\n\r\n我们先不管结果是啥，只看每个部分。这个式子的每一部分我们都会求。$ax^2$的导数就是$2ax$，$bx$的导数就是$b$，$c$的导数……呃呃，**一个常数的导数，永远是$0$嘛**。\r\n\r\n所以……它的导数就是$2ax+b$？看起来确实是这样。\r\n\r\n我们不妨大胆猜测一下：**求一个里面有加号的函数的导数，只要求出各个部分的导数，然后加起来就好啦！**\r\n\r\n然而事实是怎样呢？事实是……**我们的猜测是对的。**导数的加法就是可以这么拆开计算的。\r\n\r\n写成公式的方式就是：\r\n\r\n$$(A+B)^\\prime=A^\\prime+B^\\prime$$\r\n\r\n（别忘了一撇「$\\prime$」的含义哦，它是指对这个式子求导。）\r\n\r\n那么，这是为啥呢？这个问题我们稍微往后放放，你在后面的选读部分会看到它的证明。\r\n\r\n我们先看看利用这个，能不能做出上面的题了。\r\n\r\n第一题是$f(x)=x^4-2x$。  \r\n它的第一部分求导是$4x^3$（别忘了这个公式哟：$(ax^n)^\\prime=anx^{n-1}$）,第二部分的导数是$2$。所以结果就是$4x^3+2$。\r\n\r\n第二题是$f(x)=(x+2)^{11}$……额，这个怎么办呢？\r\n\r\n其实只要一点一点乘开就好了！打开我们的 Maple，输入函数，点击展开：\r\n![][23]\r\n然后按上面的方法，对每个部分求导就好了！\r\n\r\n你可能会说：$(x+2)^{11}=(x+2)(x+2)(x+2)(x+2)(x+2)...$，这么长的式子，考试的时候要展开不得累死我？\r\n\r\n当然，这种**暴力算法**虽然不能实用，但是至少是可以算出来的。如果遇到这样的函数，展开是最差劲的选择，**但起码是一种选择**……起码是可以算出来的，是吧？\r\n\r\n这种方法显然太蠢了。有没有更妙的方法来计算第二题呢？这就进入到咱们今天的重头戏：复合运算！\r\n\r\n。  \r\n。  \r\n。  \r\n\r\n**诶还没进呢，没看到标题是「四则运算」吗？等下一节吧（顶级拉扯）**\r\n\r\n加法已经说完了，我们来看看**乘法**吧。\r\n\r\n（大家读到这里可能比较突兀，因为上面的练习里面忘了出相关的题了。偏偏这个乘法运算又很重要，还是希望大家快速过一遍！不要跳过哈，不然你待会儿会后悔的，哼哼）\r\n\r\n什么叫乘法运算呢？举个例子：\r\n\r\n$$f(x)=(x^3+3x+3)(x^2+2x+2)$$\r\n\r\n这个函数怎么求导呢？有同学可能会说：**加法是分开加，那我乘法也分开乘嘛！先对$x^3+3x+3$求导，再对$x^2+2x+2$求导，然后乘起来就好了吧？**\r\n\r\n但是，But，**这样是完全错误的哦！**不如再想想？先乘开自己求导一下，再找找规律？\r\n\r\n算啦算啦，我知道你很想知道，先把正解放在这里：  \r\n\r\n$$f^\\prime(x)=(x^3+3x+3)^\\prime(x^2+2x+2)+(x^3+3x+3)(x^2+2x+2)^\\prime$$\r\n$$=(3x^2+3)(x^2+2x+2)+(x^3+3x+3)(2x+2)$$\r\n\r\n这就是说，**乘法的规则和加法完全不同，它的导数是对第一个式子求导，乘第二个；再对第二个式子求导，乘第一个。然后加起来。**  \r\n写成公式的方式就是：\r\n\r\n$$(AB)^\\prime=AB^\\prime+A^\\prime B$$\r\n\r\n或者写得再「专业」一点：\r\n\r\n$$(f(x)g(x))^\\prime=f^\\prime(x)g(x)+f(x)g^\\prime(x)$$\r\n\r\n先尝试理解一下这个式子哈。  \r\n我知道你的心里肯定装满了大大的问号：凭啥这么算？你这是个啥计算方法？你这样算出来，真的是对的嘛？\r\n\r\n很不幸的是，它确实是对的。凭什么呢？  \r\n这就有点超过知识范围了。  \r\n我一起放在下面的选读部分吧，如果你自认为可以，不妨挑战一下阅读！应该……不会需要太高的数学水平？*（这个挑战就没有上面的「习题」那么坑了，哈哈！）*\r\n\r\n\u003e [选读] 加法求导公式的证明  \r\n\u003e 要证明对两个函数$f(x)$和$g(x)$，可以推出$(f(x)+g(x))^\\prime=f^{\\prime}(x)+g^{\\prime}(x)$。  \r\n\u003e 先回顾公式：\r\n\u003e \r\n\u003e $$f^{\\prime}(x)=\\lim_{h \\to 0}{\\frac{f(x+h)-f(x)}{h}}$$，  \r\n\u003e \r\n\u003e 所以写出$(f(x)+g(x))^\\prime$的求导式子，然后摆弄一下式子的加法顺序：\r\n\u003e \r\n\u003e $$\\begin{aligned}(f(x)+g(x))^\\prime\\\\\u0026=\\lim_{h \\to 0}{\\frac{(f(x+h)+g(x+h))-(f(x)+g(x))}{h}}\\\\\u0026=\\lim_{h \\to 0}{\\frac{f(x+h)+g(x+h)-f(x)-g(x)}{h}}\\\\\u0026=\\lim_{h \\to 0}{\\frac{(f(x+h)-f(x))+(g(x+h)-g(x))}{h}}\\\\\u0026=\\lim_{h \\to 0}{\\frac{f(x+h)-f(x)}{h}}+{\\frac{g(x+h)-g(x)}{h}}\\\\\u0026=f^{\\prime}(x)+g^{\\prime}(x)\\end{aligned}$$\r\n\u003e \r\n\u003e 这就证完了！\r\n\r\n---\r\n\u003e [选读] 乘法求导公式的证明  \r\n\u003e 要证明对两个函数$f(x)$和$g(x)$，可以推出$(f(x)g(x))^{\\prime}=f^{\\prime}(x)g(x)+f(x)g^{\\prime}(x)$。  \r\n\u003e 还是写出$(f(x)g(x))^{\\prime}$的求导式子：\r\n\u003e \r\n\u003e $$(f(x)g(x))^{\\prime}=\\lim_{h \\to 0}{\\frac{f(x+h)g(x+h)-f(x)g(x)}{h}}$$\r\n\u003e \r\n\u003e 呃，这里不太好办了……只有两项，怎么玩它呢？  \r\n\u003e **其实可以试试「凑项」！**具体来说，就是加一个什么东西，再减去它，这样式子依然不会变，就像$123+1-1$还是$123$一样！  \r\n\u003e \r\n\u003e 我们这里要凑进去的是$f(x+h)g(x)$，详细地说就是凑成下面这样：  \r\n\u003e \r\n\u003e $$\\begin{aligned}(f(x)g(x))^{\\prime}\\\\\u0026=\\lim_{h \\to 0}{\\frac{f(x+h)g(x+h)-f(x)g(x)}{h}}\\\\\u0026=\\lim_{h \\to 0}{\\frac{f(x+h)g(x+h)-f(x+h)g(x)+f(x+h)g(x)-f(x)g(x)}{h}}\\\\\u0026=\\lim_{h \\to 0}{\\frac{f(x+h)(g(x+h)-g(x))+(f(x+h)-f(x))g(x)}{h}}\\\\\u0026=\\lim_{h \\to 0}{f(x+h)\\frac{g(x+h)-g(x)}{h}}+\\frac{f(x+h)-f(x)}{h}g(x)\\\\\u0026=f(x+h)g^{\\prime}(x)+f^{\\prime}(x)g(x)\\end{aligned}$$\r\n\u003e \r\n\u003e 注意，**h是无限趋近于0的，所以上式也就是**$f(x)g^{\\prime}(x)+f^{\\prime}(x)g(x)$**了。**\r\n\u003e\r\n\r\n\r\nPS：这两个证明乍一看很麻烦，但是自己动手写一遍，你会发现还挺简洁的……\r\n\r\n---\r\n\r\n2023年2月13日更新：啊，迟来的更新！\r\n\r\n到这里为止，我们已经介绍了含有加法和乘法的导数计算，总结一下：\r\n\r\n1. 对于加法，我们可以用加法求导公式：\r\n  $\\begin{aligned}(f(x)+g(x))^\\prime\u0026=f^{\\prime}(x)+g^{\\prime}(x)\\end{aligned}$；\r\n2. 对于乘法，我们可以用乘法求导公式：  \r\n  $\\begin{aligned}(f(x)g(x))^{\\prime}\u0026=f^{\\prime}(x)g(x)+f(x)g^{\\prime}(x)\\end{aligned}$。\r\n\r\n接下来是减法和除法。加法和减法是一对同胞兄弟，掌握了带加法的求导，带减法的求导就非常顺理成章了：\r\n\r\n$$(f(x)-g(x))^\\prime=f^{\\prime}(x)-g^{\\prime}(x)$$\r\n\r\n为什么是这样呢？因为减法可以转化为加法，比如$3-2=3+(-2)$，所以和加法的求导公式非常类似，只不过是把加号换成了减号而已。\r\n\r\n更严格的证明可以这么想：利用负数，我们就可以把减法全部变成加法：\r\n\r\n$$f(x)-g(x)=f(x)+(-1)\\times g(x),$$\r\n\r\n而这时就可以利用加法求导公式了。\r\n\r\n\u003e 如果你问 $\\left[(-1)\\times g(x)\\right]'$ 是什么，不妨再看看 1.5.2 节给你的简单实用的公式？  \r\n\u003e （然后你就会知道 $\\left[(-1)\\times g(x)\\right]'=-1\\times g'(x)=-g'(x)$ 了。要时常回顾之前学过的东西哦！）\r\n\r\n只要利用一下加法求导公式，其实就已经得到上面的减法求导公式了。这样，四则运算里的三个求导公式就都证明完了！\r\n\r\n然而，除法这个看起来平平无奇的运算，求导却是最难的。为了证明它，上面所有的知识甚至都还不够，我们还需要用到一个（刚刚提了一嘴的）新概念：**复合函数**。下一节我们就来讲讲复合函数和它的求导。\r\n\r\n### 1.5.5 复合函数的导函数\r\n\r\n你也许火急火燎地翻过了上面的证明，想要知道复合函数的求导公式是什么。在了解求导公式之前，我们先来看看复合函数是什么。\r\n\r\n最直观地说，复合函数就是把一个函数「塞」到另一个函数里面去，然后把它们合并成一个新的函数。\r\n\r\n比如，我们把函数$f(x)=x^2$「塞」到函数$g(x)=x+1$里面去，就得到了一个新的函数$h(x)=g(f(x))=x^2+1$。这个新函数$h(x)$就被称为$f(x)$和$g(x)$的复合函数。\r\n\r\n这里，$f(x)$替代了$g(x)$的式子里的$x$的位置，所以才写成了$g(f(x))$。意思就是：**$g$这个因变量，它的自变量现在不叫$x$了，而是全部替换成$f(x)$**。既然 $g(x)$ 是\r\n\r\n$$g(x)=x+1,$$\r\n\r\n那$g(f(x))$的式子理应是：\r\n\r\n$$g(f(x))=f(x)+1.$$\r\n\r\n既然 $f(x)=x^2$，那么$g(f(x))$的式子就进一步可以代换成：\r\n\r\n$$g(f(x))=x^2+1.$$\r\n\r\n有人可能会问：你把自变量从$x$换成了$f(x)$，那原来的因变量 $g$ 不就变了吗？这么说对也不对。\r\n\r\n\u003e **\\[提示\\]**\r\n\u003e\r\n\u003e 下面这一部分是对函数的深入讲解，如果你觉得有些难以理解，可以先跳过，等到后面再回来看。\r\n\r\n在高等数学里，我们不再提「因变量」和「自变量」这两个概念了，而是用「函数」和「变量」来代替。**函数的括号里一定是一个字母吗？未必。函数括号里的就得是一个变量吗？也未必。**我们已经见过很多种写法：\r\n\r\n1. $f(x)$：代表一个**函数**，它的自变量是$x$；\r\n2. $f(1)$：代表令函数$f(x)$的自变量$x$等于1时的**函数值**；\r\n3. $f(g(x))$：代表令函数$f(x)$的自变量$x$等于另一个函数$g(x)$时的**函数**。\r\n\r\n说白了，函数只是一个黑盒子，你不清楚里面的计算过程，只能往里面塞一个东西，然后得知它计算出的东西。\r\n\r\n它的括号里是你可以塞进去的东西，你想塞什么都可以。你塞进去一个变量 $x$，根据计算结果就知道这个函数和 $x$ 有什么关系了；你塞进去一个函数 $g(x)$，根据计算结果就知道这个函数和 $g(x)$ 有什么关系了；你塞进去一个值 $1$，根据计算结果就知道这个函数和 $1$ 有什么关系了。\r\n\r\n注意，这里的「计算结果」并不一定和你塞进去的东西直接有关系。不是说你塞进去值就一定得到值，也不是说塞进去变量就一定还是函数。比如这个函数：$f(x)=x^2+y$。把 1 塞进去，你会得到：\r\n\r\n$$f(1)=1^2+y=1+y.$$\r\n\r\n你可能会奇怪：$f(1)$ 怎么不是一个数字，而是含有一个未知字母 $y$ 的式子呢？这也能被称为一个函数吗？答案是：当然可以。函数这个黑盒子只能保证两条规则：\r\n\r\n1. **你塞进去一个未知量，就一定能得知黑盒子的全貌。**比如你塞进去一个变量 $x$，就能得知这个函数和其他任何量有什么关系，也清楚明白地知道黑盒子的运作原理了：$f$ 其实就是把塞进去的东西平方，然后再加上一个未知量 $y$ 嘛！\r\n2. **它计算出的东西一定是一个式子。**当然，这个式子里可能有整数，有小数，有加减乘除，甚至有未知量，但它一定是一个式子。除此之外，函数不会给你任何保证。**你塞进去一个值，它或许会给你一个值，也或许会给你一个式子。**\r\n\r\n这就是为什么我们可以写出$g(f(x))$这种东西的原因。$g$是一个黑盒子，我们把$f(x)$塞给它（或者说，把$x^2$塞给它），它根据和塞给它$x$时一样的工作原理，计算出了一个式子。这个式子里有一个未知量 $x$，所以我们说$g(f(x))=x^2+1$。\r\n\r\n---\r\n\r\n回归正题，讲讲复合函数的求导。这个求导公式是：\r\n\r\n$$\\left[g(f(x))\\right]'=g'(f(x))f'(x).$$\r\n\r\n这个公式的意思是：**复合函数的导数等于里面的函数的导数乘以外面的函数的导数。**\r\n\r\n啊，又是一个和乘法求导公式一样拗口的公式！\r\n\r\n\u003e [选读] 复合函数求导公式的证明\r\n\u003e \r\n\u003e 它的证明过程也是很复杂的，考虑到网上两三步证完的基本都是错误证明（包括高中课本上的），而在严格的分析法里需要考虑诸多细节，可能你也不想看（即便是高中数学水平，硬着头皮也未必能看懂），所以这里只能扔个链接给你：[复合函数求导公式的证明](https://www.zhihu.com/question/57712227)，如果闲着没事，可以看看。\r\n\u003e\r\n\u003e PS：说复杂，其实也不复杂，主要是有很多边边角角的情况需要分类讨论，每一种单独证明，因此汇成了一篇长篇大论……\r\n\r\n\r\n不过，这个公式的意思其实很简单。我们继续说上面$f(x)=x^2, g(x)=x+1$的例子。要分几步走来计算：\r\n\r\n1. 先计算$f(x)$的导数，得到$f'(x)=2x$；\r\n2. 再计算$g(x)$的导数，得到$g'(x)=1$；\r\n3. 然后计算$g'(f(x))$，得到$g'(f(x))=1$（因为 $g'(x)$ 是一个常函数，你把 $x$ 换成任何值，它都给你 $1$！）；\r\n4. 最后，计算$g'(f(x))f'(x)$，得到$g'(f(x))\\times f'(x)=1\\times 2x=2x$；\r\n5. 所以，最终的答案是$\\left[g(f(x))\\right]'=2x$。\r\n\r\n这个结果和我们直接对$g(f(x))=x^2+1$等式右边的$x^2+1$求导数的结果是一样的。\r\n\r\n---\r\n\r\n现在，让我们再试试前一节的问题：$(x+2)^{11}$的导数是多少？我们可以把它**拆**成复合函数的形式：\r\n\r\n$$f(x)=x+2, g(x)=x^{11},$$\r\n\r\n那么$g(f(x))$就是$(x+2)^{11}$。这下我们只要计算$g(f(x))$这个复合函数的导数就可以了：\r\n\r\n1. 先计算$f(x)$的导数，得到$f'(x)=1$；\r\n2. 再计算$g(x)$的导数，得到$g'(x)=11x^{10}$；\r\n3. 然后计算$g'(f(x))$，得到$g'(f(x))=11(x+2)^{10}$；\r\n4. 最后，计算$g'(f(x))f'(x)$，得到$g'(f(x))\\times f'(x)=11(x+2)^{10}\\times 1=11(x+2)^{10}$；\r\n5. 所以，最终的答案是$\\left[g(f(x))\\right]'=11(x+2)^{10}$。\r\n\r\n这样，我们就把复合函数的求导问题转化成了两个简单的函数求导问题，然后几步就完成了这个函数的求导。**化繁为简，这就是复合函数的求导的核心意义。**\r\n\r\n\r\n### 1.5.6 导函数的除法运算\r\n\r\n虽然除法和乘法也是一对反义词，但它们的求导公式是完全不同的。除法的求导可以说是最难的，所以我们单独拿出来讲。\r\n\r\n它为什么困难呢？上面我们证明减法求导的时候，是把减法转化成加法和乘负一（更「专业」的说法是乘 *相反数* ，如果你学过这个词的话），然后利用加法求导公式得到的。你肯定很容易想到：那么，除法求导的时候，我们是不是可以把除法转化成乘法和乘一个什么东西呢？\r\n\r\n答案是：不可以。**首先我们要知道，运算是有好几个不同层次的，最低级的是加减，而乘除是比它们俩高一层的。** 注意注意！看「减法可以转化成加法和乘负一」这句话里的几个词：\r\n\r\n\u003ccenter\u003e**减**法可以转化成**加**法和**乘**负一\u003c/center\u003e\r\n\r\n这里的「**减**」和「**加**」是相对应的，而「**乘**」是**比加减更高一层**的计算！\r\n\r\n而我们想象的：\r\n\r\n\u003ccenter\u003e**除**法可以转化成**乘**法和**乘**一个什么东西\u003c/center\u003e\r\n\r\n这里的「**除**」和「**乘**」是相对应的，但是「**乘**」不是**比乘除更高一层**的计算！\r\n\r\n所以，想要对应上前一节的思考方式，也应该是：\r\n\r\n\u003ccenter\u003e**除**法可以转化成**乘**法和 **XXX** 一个什么东西\u003c/center\u003e\r\n\r\n其中的「XXX」必须得是一种比乘除法还要高一层的计算才合理。\r\n\r\n这个超高级的计算是什么呢？就是**幂运算**！所以，除法求导的时候，我们应当把除法转化成乘法和乘一个幂运算的结果：\r\n\r\n\u003ccenter\u003e**除**法可以转化成**乘**法和对负一的**幂**运算\u003c/center\u003e\r\n\r\n或者用更简单的数学语言来说，就是：\r\n\r\n$$\\frac{f(x)}{g(x)}=f(x)\\times \\left[g(x)\\right]^{-1}.$$\r\n\r\n\u003e **注意**\r\n\u003e\r\n\u003e $\\left[g(x)\\right]^{\\text{xxx}}$ 我们习惯上简写成 $g^{\\text{xxx}}(x)$，这里用方括号括起来是方便你理解的。后面我们就不再用方括号，直接写成 $g^{\\text{xxx}}(x)$ 了。\r\n\r\n接下来让我们仿照算减法求导公式时的做法，利用一下乘法求导公式！我们知道，**乘法的规则是对第一个式子求导，乘第二个；再对第二个式子求导，乘第一个。然后加起来**。\r\n\r\n「对第一个式子求导，乘第二个」是：\r\n\r\n$$f^{\\prime}(x)\\times g^{-1}(x),$$\r\n\r\n唔，这部分看起来很简单嘛！\r\n\r\n「对第二个式子求导，乘第一个」是：\r\n\r\n$$f(x)\\times \\left[g^{-1}(x)\\right]',$$\r\n\r\n新问题又来了，这里的 $g^{-1}(x)$ 怎么求导呢？我们好像没有学过这个东西啊！\r\n\r\n别急，再想想，既然气氛都烘托到这了，肯定是有办法的。\r\n\r\n我们到底在哪里提过关于幂的求导呢？  \r\n我们到底在哪里提过关于幂的求导呢？  \r\n我们到底在哪里提过关于幂的求导呢？\r\n\r\n在继续之前，请你再三思考一下，翻一翻之前的内容，看看有没有提到过，然后再往下看。\r\n\r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n。  \r\n\r\n没错，还是在 1.5.2 节给你的简单实用的公式表里面，有关于幂的求导公式，而且当时我们还叫它「**初等函数大杀器**」呢：\r\n\r\n$$(ax^n)'=nax^{n-1}.$$\r\n\r\n这个式子是说，对于 $ax^n$ 这个式子，它的导数是 $nax^{n-1}$。比如，对于 $x^2$，它的导数是 $2x^{2-1}$；对于 $2x^3$，它的导数是 $2\\times 3x^{3-1}$。\r\n\r\n所以，看起来我们可以对于 $[g(x)]^{-1}$ 用上面的公式求导。有个小问题是：$g(x)$ 并不是 $x$ 啊？那我们怎么用呢？\r\n\r\n这里要用到我们的另一个大杀器了：**复合函数**。我们可以令 $f(x)=x^{-1}$，**那 $[g(x)]^{-1}$ 不就是 $f(g(x))$ 了吗？**\r\n\r\n来试试看！我们把复合函数的求导公式代入进去。首先计算 $f(x)$ 的导数：\r\n\r\n$$f'(x)=\\left(x^{-1}\\right)'=-1\\times x^{-2} = -x^{-2}.$$\r\n\r\n注意，这里的 $x^{-2}$ 其实就是 $\\frac{1}{x^2}$，所以 $f'(x)=-\\frac{1}{x^2}$。那么，$f'(g(x))=-\\frac{1}{g^2(x)}$。\r\n\r\n所以呢，我们可以继续按照复合函数的求导公式来计算：\r\n\r\n$$\r\n\\begin{aligned}\r\n\\left(\\left[g(x)\\right]^{-1}\\right)'\u0026=[f(g(x))]'\\\\\r\n\u0026=f'(g(x))g'(x)\\\\\r\n\u0026=-\\frac{1}{g^2(x)}\\times g'(x)\\\\\r\n\\end{aligned}\r\n$$\r\n\r\n看起来我们终于解决了 $[g(x)]^{-1}$ 的导数，它就是 $-\\frac{1}{g^2(x)}g'(x)$。耶✌！\r\n\r\n乘胜追击，让我们完成这个绕了山路十八弯的除法求导公式。「对第二个式子求导，乘第一个」现在就是：\r\n\r\n$$f(x)\\times \\left[g^{-1}(x)\\right]'=-f(x)\\frac{1}{g^2(x)}g'(x).$$\r\n\r\n所以，最终的除法求导公式是把它和「对第一个式子求导，乘第二个」加起来，也就是下面两个加起来：\r\n\r\n$$-f(x)\\frac{1}{g^2(x)}g'(x)+f^{\\prime}(x)\\times g^{-1}(x)$$\r\n\r\n经过一串草稿纸上的暴力分母通分，我们得到了最终的除法求导公式：\r\n\r\n$$\\left[\\frac{f(x)}{g(x)}\\right]'=\\frac{f^{\\prime}(x)g(x)-f(x)g^{\\prime}(x)}{g^2(x)}.$$\r\n\r\n真是「道路阻且长」啊。折腾了这么多得到的除法公式，结果还这么复杂，大概可以排进我们心目中「我最讨厌的导数公式」前三名了吧？\r\n\r\n---\r\n\r\n再小结一下，到目前为止，我们已经学会了求导的以下几种方法：\r\n\r\n1. 一些通用的求导公式\r\n2. 加减乘除的求导公式\r\n3. 复合函数的求导公式\r\n\r\n对于水平稍高的同学，现在已经可以回头完成我们的「五年高考，三年模拟」了。快去试试吧（笑）下次更新会公布正确答案。\r\n\r\nPS：下一次更新将在本周内，敬请期待~\r\n\r\n\r\n\r\n  [1]: \r\n  [2]: \r\n  [3]: https://s1.ax1x.com/2018/03/21/97iVQP.png\r\n  [4]: https://s1.ax1x.com/2018/03/21/97qOl4.png\r\n  [5]: https://s1.ax1x.com/2018/03/21/97LKtf.png\r\n  [6]: https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/w=268/sign=9ef5303c01e9390156028a3843ec54f9/35a85edf8db1cb13ab78b40fdd54564e92584b9d.jpg\r\n  [7]: https://s1.ax1x.com/2018/03/21/97LqEt.png\r\n  [8]: https://s1.ax1x.com/2018/03/21/97OwVI.png\r\n  [9]: https://s1.ax1x.com/2018/03/21/97OrPf.png\r\n  [10]: https://s1.ax1x.com/2018/03/24/9qGzQI.png\r\n  [11]: https://s1.ax1x.com/2018/03/24/9qJSyt.png\r\n  [12]: https://s1.ax1x.com/2018/03/24/9qJPw8.png\r\n  [13]: https://s1.ax1x.com/2018/03/24/9qJkFg.png\r\n  [14]: https://s1.ax1x.com/2018/03/24/9qJeln.png\r\n  [15]: https://s1.ax1x.com/2018/03/24/9qJkFg.png\r\n  [16]: https://s1.ax1x.com/2018/03/21/97LKtf.png\r\n  [17]: https://s1.ax1x.com/2018/09/15/iVKj1g.png\r\n  [18]: https://s1.ax1x.com/2018/10/07/iGwWtg.png\r\n  [19]: https://s1.ax1x.com/2018/10/07/iGwIcn.png\r\n  [20]: https://s1.ax1x.com/2018/10/07/iGwLAU.png\r\n  [21]: https://s1.ax1x.com/2018/10/07/iG0V9H.png\r\n  [22]: https://s1.ax1x.com/2018/11/11/iq0iIP.png\r\n  [23]: https://z3.ax1x.com/2021/11/21/IXnxVx.png","cover":"images/roman-mager-59976-unsplash.jpg","link":"calculus-1st.html","preview":"\u003cp\u003e可能是最简单易懂的微积分打开方式\u003c/p\u003e\n","title":"零基础微积分入门基本教程"},{"content":"\r\n![Photo by Pathum Danthanarayana on Unsplash](images/pathum-danthanarayana-466070-unsplash.jpg)\r\n# 2020年更新！\r\n注意，经测试发现，该方法必须在每一次调用`queueInputBuffer`方法时，写入的恰好是**一个或多个**完整的 mp3 帧，否则该数据块的解析结果将是空的，因此**这个方案根本不能用！可以不用往下看了，直接用`lame`库解决吧！**\r\n \r\n# 前因\r\n最近在写一个项目，需要对大量MP3文件进行解码，并输出PCM文件。  \r\n百度了一下，发现Android上提供了一些可以直接进行解码的类，很方便。\r\n# 过程\r\n主要需要用到的是[`MediaExtractor`](https://developer.android.google.cn/reference/android/media/MediaExtractor)和[`MediaCodec`](https://developer.android.google.cn/reference/android/media/MediaCodec)。  \r\n![Media Codec工作周期](images/mediacodec.png)\r\n`MediaExtractor`在Android Developer上的解释是  \r\n\r\n\u003e MediaExtractor facilitates extraction of demuxed,   \r\n\u003e typically encoded, media data from a data source.   \r\n\u003e 翻译:  \r\n\u003e MediaExtractor帮助从数据源中提取解复用的，  \r\n\u003e 通常编码的媒体数据。  \r\n\r\n这个类可以帮助我们获取mp3文件的信息(例如比特率、位数、轨道数等)，还可以按帧提取mp3的数据(但并不解码)。我们主要使用的是后一个功能。  \r\n   \r\n接下来，我们需要对输入的文件进行数据抽取的预处理。  \r\n思路是先用`MediaExtractor`获得媒体文件的音频轨道(mp3文件一般只有一个)，然后用`selectTrack`指定该轨道。  \r\n代码如下：\r\n```\r\n        MediaExtractor mediaExtractor = new MediaExtractor();\r\n        MediaCodec mediaCodec = null;\r\n        mediaExtractor.setDataSource(getContext().getResources().openRawResourceFd(R.raw.mp3).getFileDescriptor()));\r\n        int trackCount = mediaExtractor.getTrackCount();\r\n        for (int i = 0; i \u003c trackCount; ++i) {\r\n            MediaFormat format = mediaExtractor.getTrackFormat(i);\r\n            String mineType = format.getString(MediaFormat.KEY_MIME);\r\n\r\n            if (mineType.startsWith(\"audio\")) {\r\n                mediaExtractor.selectTrack(i);\r\n```\r\n然后，创建并启动`MediaCodec`，准备开始传入编码的数据。  \r\n```\r\n                mediaCodec = MediaCodec.createDecoderByType(mineType);\r\n                mediaCodec.configure(format, null, null, 0);\r\n                break;\r\n            }\r\n        }\r\n        mediaCodec.start();\r\n```\r\n接下来，定义一个`readData`，用于向指定的`ByteBuffer`中写入读取的数据：\r\n```\r\nprivate int readData(MediaExtractor extractor, ByteBuffer buffer, int size) {\r\n        int totalSize = 0;\r\n        do {\r\n            int sampleSize;\r\n            if (Build.VERSION.SDK_INT \u003c Build.VERSION_CODES.LOLLIPOP) {\r\n                sampleSize = extractor.readSampleData(buffer, totalSize);\r\n            } else {\r\n                sampleSize = extractor.readSampleData(buffer, 0);\r\n            }\r\n            if (sampleSize \u003c 0) {\r\n                return totalSize;\r\n            }\r\n            totalSize += sampleSize;\r\n            //Advance to the next sample.\r\n            extractor.advance();\r\n        } while (totalSize \u003c size);\r\n        return totalSize;\r\n    }\r\n```\r\n需要注意的是，对于`Android Lollipop`及以后的版本，`readSampleData`的第二个参数必须是`0`，数据会自动填充到末尾。  \r\n\r\n---\r\n接下来的，是真正的解码过程。解码过程比较麻烦，具体概括为如下几步：  \r\n\r\n1. 获取`MediaCodec`的输入/输出`ByteBuffer`数组。\r\n2. 调用`dequeueInputBuffer`方法，获取下一次输入所使用的`ByteBuffer`在数组中的索引。\r\n3. 调用`readData`向该`ByteBuffer`中读取一段mp3数据。\r\n4. 调用`queueInputBuffer`方法，将这个`ByteBuffer`加入解码队列中，进行真正的解码过程。\r\n5. 调用`dequeueOutputBuffer`方法，获取下一次解码完成的数据所使用的`ByteBuffer`在数组中的索引。\r\n6. 将这个`ByteBuffer`内的数据读出，即为一个PCM片段。\r\n7. 调用`releaseOutputBuffer`释放该`ByteBuffer`。\r\n8. 循环5~7步，直到请求不到输出，这意味着当前已经没有解码的数据了。\r\n9. 不断循环以上1~8步，拼接PCM片段，直到解码全部完成。\r\n\r\n完整的解码代码如下：\r\n```java\r\nprivate boolean decode(MediaCodec codec, MediaExtractor extractor) throws IOException {\r\n        ByteBuffer[] inputDatas = codec.getInputBuffers();\r\n        ByteBuffer[] outputDatas = codec.getOutputBuffers();\r\n\r\n        MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();\r\n        //Get the max input size.\r\n        int size = DEFAULT_BUFFER_SIZE;\r\n        if (Build.VERSION.SDK_INT \u003e= Build.VERSION_CODES.LOLLIPOP) {\r\n            size = codec.getInputFormat().getInteger(MediaFormat.KEY_MAX_INPUT_SIZE);\r\n        }\r\n        for (int i = 0; i \u003c inputDatas.length - 1; ++i) {\r\n            int inputIndex = codec.dequeueInputBuffer(-1);\r\n            if (inputIndex \u003c 0) {\r\n                return true;\r\n            }\r\n            //Input data\r\n            ByteBuffer inputBuffer = inputDatas[inputIndex];\r\n            inputBuffer.clear();\r\n            //Request mp3 data chunk.\r\n            int sampleSize = readData(extractor, inputBuffer, size);\r\n            if (sampleSize \u003c= 0) {\r\n                return true;\r\n            } else {\r\n                //Have it decoded.\r\n                codec.queueInputBuffer(inputIndex, 0, sampleSize, 0, 0);\r\n                decodeSize += sampleSize;\r\n                System.out.println(\"decode size:\" + sampleSize + \",total size:\" + decodeSize);\r\n            }\r\n            //Get output buffer\r\n            int outputIndex = codec.dequeueOutputBuffer(bufferInfo, TIMEOUT);\r\n            ByteBuffer outputBuffer;\r\n            byte[] chunkPCM;\r\n            while (outputIndex \u003e= 0) {\r\n                outputBuffer = outputDatas[outputIndex];\r\n                chunkPCM = new byte[bufferInfo.size];\r\n                outputBuffer.get(chunkPCM);\r\n                outputBuffer.clear();\r\n                //Write to a byte array.\r\n                pcmData.write(chunkPCM);\r\n\r\n                codec.releaseOutputBuffer(outputIndex, false);\r\n                //Get next PCM chuck.\r\n                outputIndex = codec.dequeueOutputBuffer(bufferInfo, TIMEOUT);\r\n            }\r\n        }\r\n        //Have not decoded the whole file.\r\n        return false;\r\n    }\r\n```\r\n这个方法调用起来也很简单，不断调用直到返回`true`为止。\r\n```\r\nwhile (!decode(mediaCodec, mediaExtractor)) {\r\n            //Do nothing.\r\n            //Wait for decoding.\r\n}\r\n```\r\n然后解码就完成了。  \r\n\r\n---\r\n完整的类源代码如下：\r\n```\r\n/**\r\n * Created by w568w on 18-9-15.\r\n *\r\n * @author w568w\r\n */\r\n\r\npublic class MP3ToPCM {\r\n    private int decodeSize = 0;\r\n    private ByteArrayOutputStream pcmData;\r\n    private static final int TIMEOUT = 10 * 1000;\r\n    private static final int DEFAULT_BUFFER_SIZE = 4096;\r\n\r\n    /**\r\n     * @param fileDescriptor Input MP3 File\r\n     * @return PCM data\r\n     * @throws IOException when decoding failed or opening the file failed.\r\n     */\r\n    @WorkerThread\r\n    public byte[] convert(FileDescriptor fileDescriptor) throws IOException {\r\n        pcmData = new ByteArrayOutputStream();\r\n        MediaExtractor mediaExtractor = new MediaExtractor();\r\n        MediaCodec mediaCodec = null;\r\n        mediaExtractor.setDataSource(fileDescriptor);\r\n        int trackCount = mediaExtractor.getTrackCount();\r\n        for (int i = 0; i \u003c trackCount; ++i) {\r\n            MediaFormat format = mediaExtractor.getTrackFormat(i);\r\n            String mineType = format.getString(MediaFormat.KEY_MIME);\r\n\r\n            if (mineType.startsWith(\"audio\")) {\r\n                mediaExtractor.selectTrack(i);\r\n                mediaCodec = MediaCodec.createDecoderByType(mineType);\r\n                mediaCodec.configure(format, null, null, 0);\r\n                break;\r\n            }\r\n        }\r\n        if (mediaCodec == null) {\r\n            return null;\r\n        }\r\n        mediaCodec.start();\r\n\r\n        while (!decode(mediaCodec, mediaExtractor)) {\r\n            //Do nothing.\r\n            //Wait for decoding.\r\n        }\r\n\r\n        byte[] pcmByteData = pcmData.toByteArray();\r\n        pcmData.close();\r\n        pcmData = null;\r\n        return pcmByteData;\r\n    }\r\n\r\n    private int readData(MediaExtractor extractor, ByteBuffer buffer, int size) {\r\n        int totalSize = 0;\r\n        do {\r\n            int sampleSize;\r\n            if (Build.VERSION.SDK_INT \u003c Build.VERSION_CODES.LOLLIPOP) {\r\n                sampleSize = extractor.readSampleData(buffer, totalSize);\r\n            } else {\r\n                sampleSize = extractor.readSampleData(buffer, 0);\r\n            }\r\n            if (sampleSize \u003c 0) {\r\n                return totalSize;\r\n            }\r\n            totalSize += sampleSize;\r\n            //Advance to the next sample.\r\n            extractor.advance();\r\n        } while (totalSize \u003c size);\r\n        return totalSize;\r\n    }\r\n\r\n    private boolean decode(MediaCodec codec, MediaExtractor extractor) throws IOException {\r\n        ByteBuffer[] inputDatas = codec.getInputBuffers();\r\n        ByteBuffer[] outputDatas = codec.getOutputBuffers();\r\n\r\n        MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();\r\n        //Get the max input size\r\n        int size = DEFAULT_BUFFER_SIZE;\r\n        if (Build.VERSION.SDK_INT \u003e= Build.VERSION_CODES.LOLLIPOP) {\r\n            size = codec.getInputFormat().getInteger(MediaFormat.KEY_MAX_INPUT_SIZE);\r\n        }\r\n        for (int i = 0; i \u003c inputDatas.length - 1; ++i) {\r\n            int inputIndex = codec.dequeueInputBuffer(-1);\r\n            if (inputIndex \u003c 0) {\r\n                return true;\r\n            }\r\n            //Input data\r\n            ByteBuffer inputBuffer = inputDatas[inputIndex];\r\n            inputBuffer.clear();\r\n            //Request mp3 data chunk.\r\n            int sampleSize = readData(extractor, inputBuffer, size);\r\n            if (sampleSize \u003c= 0) {\r\n                return true;\r\n            } else {\r\n                //Get it decoded.\r\n                codec.queueInputBuffer(inputIndex, 0, sampleSize, 0, 0);\r\n                decodeSize += sampleSize;\r\n                System.out.println(\"decode size:\" + sampleSize + \",total size:\" + decodeSize);\r\n            }\r\n            //Get output buffer\r\n            int outputIndex = codec.dequeueOutputBuffer(bufferInfo, TIMEOUT);\r\n            ByteBuffer outputBuffer;\r\n            byte[] chunkPCM;\r\n            while (outputIndex \u003e= 0) {\r\n                outputBuffer = outputDatas[outputIndex];\r\n                chunkPCM = new byte[bufferInfo.size];\r\n                outputBuffer.get(chunkPCM);\r\n                outputBuffer.clear();\r\n                //Write to a byte array.\r\n                pcmData.write(chunkPCM);\r\n\r\n                codec.releaseOutputBuffer(outputIndex, false);\r\n                //Get next PCM chuck.\r\n                outputIndex = codec.dequeueOutputBuffer(bufferInfo, TIMEOUT);\r\n            }\r\n        }\r\n        //Have not decoded the whole file.\r\n        return false;\r\n    }\r\n}\r\n\r\n```\r\n# 问题\r\n存在的问题是，解码太慢。使用的测试代码是这样的：\r\n```\r\n/**\r\n * Created by w568w on 18-9-16.\r\n *\r\n * @author w568w\r\n */\r\n\r\npublic class MP3ToPCMTest extends AndroidTestCase {\r\n    private byte[] PCMdata;\r\n    private byte[] reSamplePCM;\r\n    private static final int reSample = 512;\r\n\r\n    public void testConvert() throws Exception {\r\n        CodeTimer.time(new ConvertThread());\r\n\r\n    }\r\n\r\n    public void testReSample() throws Exception {\r\n        CodeTimer.time(new ReSampleThread());\r\n    }\r\n\r\n    private class ConvertThread implements Runnable {\r\n\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                PCMdata = new MP3ToPCM()\r\n\t\t\t\t\t\t.convert(getContext().getResources().openRawResourceFd(R.raw.mp3).getFileDescriptor());\r\n                System.out.println(\"size:\" + PCMdata.length);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n    private class ReSampleThread implements Runnable {\r\n\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                reSamplePCM = new byte[PCMdata.length / reSample];\r\n                for (int i = 0; i \u003c PCMdata.length; i += reSample) {\r\n                    reSamplePCM[i / reSample] = PCMdata[i];\r\n                }\r\n                System.out.println(\"resample size:\" + reSamplePCM.length);\r\n            } catch (NullPointerException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n  \r\n`CodeTimer`是个简单的代码计时器，不再贴出代码。    \r\n整个解码过程需要将近1分钟的时间，显然在实际环境中是不可直接应用的。  \r\n目前的思路是换用`lame`或`ffmpeg`等解编码的原生支持库。或许了解这方面的朋友可以给我指点一二？","cover":"images/pathum-danthanarayana-466070-unsplash.jpg","link":"decoding-mp3.html","preview":"\u003cp\u003eAndroid上的媒体文件解码/编码并不是一件复杂的事。\u003c/p\u003e\n","title":"对于Android MP3解码为PCM的一些研究"},{"content":"\r\n![Photo by Chris Ried on Unsplash](images/chris-ried-512801-unsplash.jpg)\r\n# 前因\r\n最近学习不是很忙没，闲得蛋疼，决定完成一下学校布置的调查报告，顺便玩玩数据分析...  \r\n所以就有了这么一次关于新闻评论的简单调查。嗯我的编程水平蒟蒻，各位大佬轻喷(/ ω \\\\)\r\n# 数据收集\r\n\r\n第一件事当然是要收集到需要分析的新闻数据啦！  \r\n打算抓取[凤凰网](http://news.ifeng.com/)的评论，因为这里的人比较多，评论量比较大。  \r\n![凤凰网评论](images/fenghuang_comments.png)\r\n下一个问题是运行数据抓取程式的设备。  \r\n用自己的电脑跑Python脚本心疼电费，用手机跑的话需要下载[QPython](http://www.qpython.com/)，略显得有些麻烦...  \r\n  \r\n所幸，百度了一会儿，找到了一个[云爬虫平台](https://www.shenjian.io/)(我真的不是来打广告的！我发誓！)  \r\n注册后默认是个人免费版，赠送一个**永久免费爬虫节点**(不是SSR那种节点啊)以及1GB的储存空间，还支持**爬取中验证码识別、POST数据、自定义请求头部、自动更换代理、抗反爬虫**...  \r\n总的来说比较实惠...  \r\n![神箭手云平台-爬虫界面](images/shenjianshou_page1.png)\r\n这个平台里的爬虫逻辑是需要自己用编写的。提供了一个网页的代码编辑器，支持代码智能补全和高亮格式化。  \r\n开发文档也比较完善，而且预置了很多的API和回调函数，对于熟悉JavaScript语法的人来说，开发难度不大。   \r\n![神箭手云平台-开发界面](images/shenjianshou_page2.png)\r\n配合FireFox可以获得XPath，所以很快就写完了一个爬虫...\r\n```javascript\r\nvar configs = {\r\n  domains: [\"ifeng.com\"],\r\n  scanUrls: [\"http://news.ifeng.com/\"],\r\n  contentUrlRegexes: [/http:\\/\\/gentie\\.ifeng\\.com\\/view\\.html.+/], //内容页url正则\r\n  helperUrlRegexes: [/http:\\/\\/news\\.ifeng\\.com\\/a\\/\\d+\\/\\d+_\\d+\\.shtml/], //列表页url正则 可留空\r\n  enableJS: true,\r\n  \r\n  fields: [\r\n    {\r\n      // 抽取项\r\n      name: \"title\",\r\n      selector: \"//*[@id=\\\"js_title\\\"]\", //默认使用XPath\r\n      required: true //是否不能为空\r\n    },\r\n    {\r\n      name: \"talk\",\r\n      selector: \"//*[@class=\\\"mod-articleCommentList\\\"]\", \r\n      required: false, \r\n      repeated: true,//表示可以爬取多项\r\n      children: [\r\n        {\r\n          name: \"name\",\r\n\t\t  alias:\"用户名\",\r\n          selector: \"//*[@class=\\\"w-location\\\"]\"\r\n        },\r\n        {\r\n          name: \"content\",\r\n\t\t  alias:\"评论内容\",\r\n          selector: \"//*[@class=\\\"w-contentTxt\\\"]\"\r\n        },\r\n        {\r\n          name: \"goods\",\r\n          type: \"int\",\r\n\t\t  alias:\"点讚数\",\r\n          selector: \"//*[@class=\\\"w-rep-num\\\"]\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nvar crawler = new Crawler(configs);\r\ncrawler.start();//启动爬虫\r\n```\r\n接下来就是漫长的等待。  \r\n不过代码是在云端分布式节点上运行的，所以可以放心地去关机睡觉...\r\n# 数据处理\r\n第二天一大早就开机看看爬虫努力一晚上的结果。总的来说还可以，获取到了2000多条新闻的评论。  \r\n![神箭手云平台-爬取结果](images/shenjianshou_page3.png)  \r\n数据可以直接全部导出为 **XLSX(Microsoft Excel)、CSV(纯文本，用逗号分隔的表格)或者SQL (MySql数据库)文件，也可以选择直接发佈到Word Press、Discuz、typecho、Phpwind、微信公众号、远程MySql数据库**等网络平台，甚至提供了获取数据的**Rest API**和**GraphGL API**。  \r\n哭了，对开发者这样良心的网站真的不多.....   \r\n  \r\n由于我要用Python分析，因此选择导出数据为CSV。文件不大，才9MB不到的体积。  \r\n![神箭手云平台-导出数据](images/shenjianshou_page4.png)  \r\n很快地打开AS，把数据导入进去。\r\n![CSV文件](images/data_csv.png)  \r\n接下来是数据的预处理，直接贴代码吧：\r\n```python\r\n# coding:utf8\r\nimport csv\r\nimport json\r\nfrom collections import Counter\r\n\r\nimport jieba\r\n\r\n\r\ndef contains(l, item):\r\n    equals = lambda x, y: x[1] == y[1]\r\n    for i in l:\r\n        if equals(i, item):\r\n            return True\r\n    return False\r\n\r\n#去除重复\r\ndef del_repeated(liebiao):\r\n    new_list = []\r\n    for item in liebiao:\r\n        if contains(new_list, item) is False:\r\n            new_list.append(item)\r\n    return new_list\r\n\r\n\r\ndef read_list():\r\n    with open(\"task_data_2208900.csv\", 'rb') as f:\r\n        lines = csv.reader(f)\r\n        csv_list = []\r\n        for l in lines:\r\n\t\t#检查空项\u0026解码UTF-8的编码\r\n            if l[2].decode('utf8') != '':\r\n                csv_list.append([l[0].decode('utf8'), l[1].decode('utf8'), l[2].decode('utf8')])\r\n        del csv_list[0]\r\n        return del_repeated(csv_list)\r\n\r\n\r\ndata_list = read_list()#读取数据\r\nprint 'Data Size:', len(data_list)\r\n```\r\n输出:\r\n```\r\nData Size: 1831\r\n```\r\n  \r\n然后，就可以使用`jieba`、`Counter`之类的工具来分析数据啦！  \r\n  \r\n你可能没耐心看我的弱智代码，那就直接上——\r\n# 分析结果\r\n先给出分词结果排行，已经去除了单字和无意义字符（如\"我\"、\"我们\"、\"这个\"、\"的\"）：\r\n```python \r\n# 格式：\r\n# [词语] [词语频数]\r\nCopyright (C) w568w，遵循Creative Commons BY-NC 4.0协议，禁止不规范转载\r\n------------\r\n\r\n中国 560\r\n美国 372\r\n国家 163\r\n日本 140\r\n国人 127\r\n世界 103\r\n俄罗斯 85\r\n武器 80\r\n支持 78\r\n加油 70\r\n发展 68\r\n台湾 68\r\n人民 63\r\n问题 61\r\n导弹 59\r\n航母 59\r\n我国 55\r\n技术 51\r\n战斗 46\r\n印度 46\r\n阿弥陀佛 45\r\n祖国 44\r\n改变 44\r\n军事 44\r\n战争 44\r\n作战 42\r\n发动 41\r\n南海 40\r\n飞机 39\r\n发动机 39\r\n动机 39\r\n能力 38\r\n经济 37\r\n海军 36\r\n战略 36\r\n潜艇 35\r\n利益 32\r\n土耳其 31\r\n研发 30\r\n制造 29\r\n威胁 28\r\n战机 28\r\n强大 27\r\n和平 27\r\n轰炸 27\r\n历史 27\r\n装备 26\r\n致敬 26\r\n西方 26\r\n政府 25\r\n国海军 25\r\n国军 25\r\n努力 25\r\n观念 24\r\n战斗群 24\r\n鬼子 24\r\n民族 24\r\n孩子 24\r\n攻击 24\r\n工作 24\r\n安全 23\r\n美国佬 23\r\n建设 23\r\n百姓 22\r\n先进 21\r\n设计 21\r\n轰炸机 21\r\n科技 21\r\n中俄 21\r\n人员 21\r\n```\r\n顺便统计了一下地域分布：\r\n```python \r\n# 格式：\r\n# [地区] [地区频数]\r\nCopyright (C) w568w，遵循Creative Commons BY-NC 4.0协议，禁止不规范转载\r\n------------\r\n[广东省广州市网友] 140\r\n[北京市网友] 131\r\n[山东省济南市网友] 62\r\n[河南省郑州市网友] 54\r\n[江苏省南京市网友] 52\r\n[陕西省西安市网友] 48\r\n[湖北省武汉市网友] 45\r\n[上海市网友] 45\r\n[天津市网友] 44\r\n[浙江省杭州市网友] 42\r\n[湖南省长沙市网友] 38\r\n[四川省成都市网友] 35\r\n[河北省石家庄市网友] 33\r\n[辽宁省沈阳市网友] 33\r\n[云南省昆明市网友] 30\r\n[福建省福州市网友] 30\r\n[安徽省合肥市网友] 27\r\n[广西壮族南宁市网友] 27\r\n[江西省南昌市网友] 20\r\n[黑龙江省哈尔滨市网友] 18\r\n[江苏省苏州市网友] 17\r\n[广东省,广州市网友] 16\r\n[吉林省长春市网友] 16\r\n[山西省太原市网友] 15\r\n[湖北省宜昌市网友] 14\r\n[湖北省,武汉市网友] 14\r\n[山东省,济南市网友] 14\r\n[贵州省贵阳市网友] 11\r\n[重庆市网友] 11\r\n[宁夏回族银川市网友] 11\r\n[海南省海口市网友] 10\r\n[广东省深圳市网友] 9\r\n[福建省厦门市网友] 9\r\n[四川省,成都市网友] 9\r\n[浙江省宁波市网友] 9\r\n[河北省,石家庄市网友] 9\r\n[安徽省,合肥市网友] 9\r\n[内蒙古呼和浩特市网友] 8\r\n[浙江省台州市网友] 8\r\n[广东省中山市网友] 7\r\n[江苏省常州市网友] 7\r\n[江苏省无锡市网友] 7\r\n[浙江省,杭州市网友] 7\r\n[黑龙江省大庆市网友] 7\r\n[湖南省邵阳市网友] 5\r\n[河南省,郑州市网友] 5\r\n[辽宁省,沈阳市网友] 5\r\n[新疆维吾尔乌鲁木齐市网友] 5\r\n[广东省佛山市网友] 5\r\n[福建省,福州市网友] 5\r\n[湖南省衡阳市网友] 5\r\n[山西省晋城市网友] 5\r\n```\r\n根据以上数据，我总结出了：\r\n# 关注热点Top5\r\n## 1. 中美关系\r\n无论啥时候，川普的小动作都是个大新闻..中美关系是个永恒不变的国际话题。\r\n## 2. 中日关系\r\n中日关系由于历史原因一直非常紧张，更不要说各种\"爱国主义教育\"薰陶下的我国人民了...  \r\n这里稍微看了一下评论，有一些比较偏激：\r\n```\r\n那个核弹，干脆给日本使上吧！！！\r\n跟日本绝交！还废什末话友好下去，最好定出法律不准去日本！不准购日货！！\r\n日本人一说总是感觉到猥琐，下流。\r\n什么是大个儿的？？？意思小日本充当王八！\r\n日本就是美国圈养的一条狗！美国到哪它都跟随在后面吠\r\n```\r\n不作评论。\r\n## 3.台湾问题\r\n主要是有关于蔡英文的报道...感觉还是比较客观冷静的，没有那么多不堪入耳的人身攻击。\r\n## 4.中印冲突\r\n评论中多以\"阿三\"称印度反动势力。我不是特別关心这方面的问题，中国应该是佔绝对优势吧。\r\n## 5.军事力量\r\n果然大家关心比较多的还是我国的军事势力，主要围绕航母、导弹力量展开。  \r\n[这里](https://www.globalfirepower.com/countries-listing.asp)有一个比较权威的世界军事力量排名。\r\n# 最后...\r\n讲个笑话，写爬虫、分析数据花了我30分钟，但是写这篇文章花了我2个小时....大概这就是打字速度慢的痛苦吧(笑)","cover":"/images/chris-ried-512801-unsplash.jpg","link":"fenhuang_stat.html","preview":"\u003cp\u003e一次Python练手\u003c/p\u003e\n","title":"从一次新闻统计概览我国新闻关注热点"},{"content":"\r\n![Photo by Sai Kiran Anagani on Unsplash](images/sai-kiran-anagani-555972-unsplash.jpg)\r\n# 引子\r\n今天作死Commit的时候，不小心把自己的Ket Store和密码push到Github上去了...  \r\n发现Github上没有回滚Commit选项时，吓了一跳，以为撤回不了自己的骚操作了，遂百度之，  \r\n  \r\n然后，我发现了一片Git的新天地...原来，Git真心这么强大！\r\n# 我擦，随手Push上去了?!\r\n可能你和我有过类似的经历，把奇怪的文件Push到远程，然后又想办法撤回。其实，Git为我们提供了非常简单的操作来撤回到任何状态，只需要三个指令，就可以无损撤回Commit。  \r\n首先，在项目目录打开终端。你可以用`git log`查看历史提交，看起来大概这样：  \r\n```\r\n$ git log\r\ncommit ad8bcddd03f25904de27e830e12d22e79ba61e44\r\nAuthor: w568w \u003c1278297578@qq.com\u003e\r\nDate:   Sat Apr 28 21:05:43 2018 +0800\r\n\r\n    Add error catching\r\n\r\ncommit 5eb7444126ef10f3bcd1a9daca7b81051d9533df\r\nAuthor: w568w \u003c1278297578@qq.com\u003e\r\nDate:   Sat Apr 28 21:03:23 2018 +0800\r\n\r\n    Add error-catching for the module's self-checking.\r\n```\r\n比如说想回到`5eb7444126ef10f3bcd1a9daca7b81051d9533df`这个状态，也就是撤回最后一次提交，记下这个对应的SHA-256值，然后按`q`键退出vim。  \r\n然后，使用`git reset`来重定向`HEAD`指针：\r\n\r\n```\r\n如果你要连着本地文件一块儿撤回(也就是删除本地文件)：\r\n$ git reset --hard 5eb7444126ef10f3bcd1a9daca7b81051d9533df \r\n如果你只要撤回远程(本地文件不动)：\r\n$ git reset --soft 5eb7444126ef10f3bcd1a9daca7b81051d9533df \r\n```\r\n\u003e Tips：这里要退到上一个，所以可以简写成：\r\n ```\r\n$ git reset --hard HEAD~1\r\n或者\r\n$ git reset --soft HEAD~1\r\n```\r\n\r\n最后，用`-f`无视版本问题，强制推到远程，问题解决！\r\n```\r\n$ git push -f\r\n```\r\n# 我擦，不小心用了 --hard ?!\r\n刚开始撤回时我就遇到了这个问题...由于没搞懂`--hard`和`--soft`的区別...  \r\n结果撤回时连着本地文件一块儿没了...  \r\n擦，这下没辙了？代码又得重写了？  \r\n  \r\n其实万能的Git还有办法，而且只需要两行指令。  \r\n  \r\n首先使用`git reflog`来查看`HEAD`指针变动日志：\r\n```\r\n$ git reflog\r\n4ba77dc HEAD@{1}: reset: moving to 5eb7444126ef10f3bcd1a9daca7b81051d9533df\r\nad8bcdd HEAD@{2}: commit: Add error catching\r\n5eb7444 HEAD@{3}: commit: Add error-catching for the module's self-checking.\r\n```\r\n可以看到，第一条记录就是上一节里撤回时的操作。\r\n我要让所有文件回到`commit: Add error catching`还没推送到远程时的状态，因此直接执行：\r\n```\r\n$ git reset --hard ad8bcdd\r\nHEAD 现在位于 ad8bcdd Add error catching\r\n```\r\n问题解决！文件都回来了！  \r\n# 总结\r\n可以看到，Git的强大的确不是吹的。只要不是作死删库的命令（~~`reset --hard 0`，`push -f`上去再反手一个`gc`什么的，別瞎jb试~~），几乎[无所不能撤回](http://mobile.51cto.com/hot-481240.htm)。  \r\n因此，经常~~和我一样~~手贱的小伙伴们的确很需要使用`Git`来管理自己的公共/私有项目。","cover":"images/sai-kiran-anagani-555972-unsplash.jpg","link":"powerful-git.html","preview":"\u003cp\u003e你可以用git撤回任何操作!\u003c/p\u003e\n","title":"Git的高级玩法——花式撤回误操作"},{"content":"\r\n# 问题\r\n最近做的一个项目里用到了`SwipeRefreshLayout`，布局大概是这样的：\r\n```\r\n\u003candroid.support.v4.widget.SwipeRefreshLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\u003e\r\n    \u003cScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:padding=\"16dp\"\u003e\r\n    \u003cRelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\u003e\r\n        \u003cTextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\" /\u003e\r\n    \u003c/RelativeLayout\u003e\r\n    \u003c/ScrollView\u003e\r\n\u003c/android.support.v4.widget.SwipeRefreshLayout\u003e\r\n```\r\n但是！下拉时啥都没有显示，根据Debugger显示，`OnRefresh`方法**几乎**也不被调用。  \r\n这TM就很闹心了。。。各种调试无果，只好求助度娘。\r\n# 解决\r\n网上的解决方法也是种类繁多。。。总的来说有这几种：  \r\n1. 用`ScrollView`或者`ListView`作为`SwipeRefreshLayout`的子控件。  \r\n2. 导入了两个不同版本`android.support.v4`支持包，用`resolutionStrategy`强制指定版本。([原文章在这里](https://www.jianshu.com/p/2a1897fdc041))  \r\n3. 给子布局设置`onTouchEvent`，屏蔽事件。  \r\n***\r\n前两种压根没遇到。。。所以果断选择第3种，嘿，还真有效！  \r\n[原文章](http://blog.csdn.net/u013673799/article/details/70755747)里是这么说的:  \r\n\u003cblockquote\u003e\r\n当使用ListView，下拉刷新时，`SwipeRefreshLayout`的down事件被子View消费了，当Move时，才会调用自身的`onTouchEvent`方法。  \r\n而不使用ListView，显示`TextView`时，`SwipeRefreshLayout`的down事件没有被子View消费，需要调用自己的`onTouchEvent`方法 。这个就是导致问题的原因。   \r\n根据上面的原因，可以有一种解决方式，如下:  \r\n```\r\nmTextView.setOnTouchListener(new View.OnTouchListener() {\r\n    @Override\r\n    public boolean onTouch(View v, MotionEvent event) {\r\n        if(event.getAction() == MotionEvent.ACTION_DOWN){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n});\r\n```\r\n\u003c/blockquote\u003e  \r\n於是这个问题就解决了。。。浪费了我半个小时的时间QAQ\r\n","cover":"","link":"swiperefreshlayout-fucked-problem.html","preview":"\u003cp\u003eSwipeRefreshLayout坑真tm多\u003c/p\u003e\n","title":"SwipeRefreshLayout下拉不显示进度圈"},{"content":"\r\n# 废话\r\n新年要到了...在这里祝各位新年快乐，顺便分享一堆干货  \r\n这里参考了[bjzhou/Coolapk-kotlin这个项目](https://github.com/bjzhou/Coolapk-kotlin)，看起来似乎是官方人员做的，非常感谢！  \r\n（虽然整理了两天时间...但是一想到可以实现写酷安第三方版的愿望就激动得要she的说）\r\n# API 说明\r\n_前排提示：该 API 由于用到了 native 代码，只能在 Linux i686 或者 Android ARM/x86 平台上使用 !_   \r\n  \r\n所有接口使用统一的前缀： https://api.coolapk.com/v6/  \r\n所有接口使用统一的 HTTP 头（有特殊说明的除外）：\r\n```\r\nUser-Agent: Dalvik/2.1.0 (Linux; U; Android 5.1.1; Nexus 4 Build/LMY48T) (#Build; google; Nexus 4; LMY48T; 5.1.1) +CoolMarket/7.3\r\nX-Requested-With: XMLHttpRequest\r\nX-Sdk-Int: 22\r\nX-Sdk-Locale: zh-CN\r\nX-App-Id: coolmarket\r\nX-App-Token: [见下面方法]\r\nX-App-Version: 7.3\r\nX-App-Code: 1701135\r\nX-Api-Version: 7\r\n```\r\n对于X-App-Token，首先你需要从酷安7.x中获得 so 文件，这里提供一个[下载链接](uploads/jniLibs.zip).  \r\n然后，把它放在你的项目中，这里提供一个例子：![Android Studio在这里放文件夹](images/android_studio_so.png)\r\n接着，新建文件：\r\n```\r\n//:AuthUtils.java\r\n//这里的包名不可随意更改！\r\npackage com.coolapk.market.util;\r\nimport android.content.Context;\r\npublic class AuthUtils {\r\n    static {\r\n        System.loadLibrary(\"a\");\r\n    }\r\n\r\n    /**\r\n     * @param paramContext Application上下文\r\n     * @param paramString 一个UUID\r\n     * @return 用于请求的Token\r\n     */\r\n    @SuppressWarnings(\"JniMissingFunction\")\r\n    public static native String getAS(Context application, String uuid);\r\n}\r\n```\r\n获取Token，调用`AuthUtils.getAS(getApplication(),UUID.randomUUID().toString())`就行了。  \r\n**需要注意的是**，这个so库为了防止盗用API，调用了`application.getPackageName()`方法，并将它与`com.coolapk.market`作比较，如果不同则返回null。  \r\n因此，我们需要\"欺骗\"它，这里写了一个`ApplicationProxy`来解决这个问题：  \r\n```\r\npackage ml.w568w.coolapksdk.util;\r\n\r\nimport android.app.Application;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.ComponentName;\r\nimport android.content.ContentResolver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.ServiceConnection;\r\nimport android.content.SharedPreferences;\r\nimport android.content.pm.PackageManager;\r\nimport android.content.res.AssetManager;\r\nimport android.content.res.Configuration;\r\nimport android.content.res.Resources;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\n\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.lang.ref.SoftReference;\r\n\r\n/**\r\n * Created by w568w on 17-12-29.\r\n * Fuck the coolapk packageName to pretend as the truly Coolapk App against native methods.\r\n */\r\n\r\npublic class ApplicationProxy extends Application {\r\n    SoftReference\u003cApplication\u003e mTrulyapp;\r\n\r\n    public ApplicationProxy(Application trulyApp) {\r\n        super();\r\n        mTrulyapp = new SoftReference\u003c\u003e(trulyApp);\r\n    }\r\n\r\n    @Override\r\n    public String getPackageName() {\r\n        return \"com.coolapk.market\";\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        mTrulyapp.get().onCreate();\r\n    }\r\n\r\n    @Override\r\n    public void onTerminate() {\r\n        mTrulyapp.get().onTerminate();\r\n    }\r\n\r\n    @Override\r\n    public void onConfigurationChanged(Configuration newConfig) {\r\n        mTrulyapp.get().onConfigurationChanged(newConfig);\r\n    }\r\n\r\n    @Override\r\n    public void onLowMemory() {\r\n        mTrulyapp.get().onLowMemory();\r\n    }\r\n\r\n    @Override\r\n    public Context getBaseContext() {\r\n        return mTrulyapp.get().getBaseContext();\r\n    }\r\n\r\n    @Override\r\n    public AssetManager getAssets() {\r\n        return mTrulyapp.get().getAssets();\r\n    }\r\n\r\n    @Override\r\n    public Resources getResources() {\r\n        return mTrulyapp.get().getResources();\r\n    }\r\n\r\n    @Override\r\n    public PackageManager getPackageManager() {\r\n        return mTrulyapp.get().getPackageManager();\r\n    }\r\n\r\n    @Override\r\n    public ContentResolver getContentResolver() {\r\n        return mTrulyapp.get().getContentResolver();\r\n    }\r\n\r\n    @Override\r\n    public Looper getMainLooper() {\r\n        return mTrulyapp.get().getMainLooper();\r\n    }\r\n\r\n    @Override\r\n    public Context getApplicationContext() {\r\n        return mTrulyapp.get().getApplicationContext();\r\n    }\r\n\r\n    @Override\r\n    public Resources.Theme getTheme() {\r\n        return mTrulyapp.get().getTheme();\r\n    }\r\n\r\n    @Override\r\n    public void setTheme(int resid) {\r\n        mTrulyapp.get().setTheme(resid);\r\n    }\r\n\r\n    @Override\r\n    public ClassLoader getClassLoader() {\r\n        return mTrulyapp.get().getClassLoader();\r\n    }\r\n\r\n\r\n    @Override\r\n    public String getPackageResourcePath() {\r\n        return mTrulyapp.get().getPackageResourcePath();\r\n    }\r\n\r\n    @Override\r\n    public String getPackageCodePath() {\r\n        return mTrulyapp.get().getPackageCodePath();\r\n    }\r\n\r\n    @Override\r\n    public SharedPreferences getSharedPreferences(String name, int mode) {\r\n        return mTrulyapp.get().getSharedPreferences(name, mode);\r\n    }\r\n\r\n    @Override\r\n    public FileInputStream openFileInput(String name) throws FileNotFoundException {\r\n        return mTrulyapp.get().openFileInput(name);\r\n    }\r\n\r\n    @Override\r\n    public FileOutputStream openFileOutput(String name, int mode) throws FileNotFoundException {\r\n        return mTrulyapp.get().openFileOutput(name, mode);\r\n    }\r\n\r\n    @Override\r\n    public boolean deleteFile(String name) {\r\n        return mTrulyapp.get().deleteFile(name);\r\n    }\r\n\r\n    @Override\r\n    public File getFileStreamPath(String name) {\r\n        return mTrulyapp.get().getFileStreamPath(name);\r\n    }\r\n\r\n    @Override\r\n    public String[] fileList() {\r\n        return mTrulyapp.get().fileList();\r\n    }\r\n\r\n    @Override\r\n    public File getFilesDir() {\r\n        return mTrulyapp.get().getFilesDir();\r\n    }\r\n\r\n    @Override\r\n    public File getCacheDir() {\r\n        return mTrulyapp.get().getCacheDir();\r\n    }\r\n\r\n\r\n    @Override\r\n    public File getDir(String name, int mode) {\r\n        return mTrulyapp.get().getDir(name, mode);\r\n    }\r\n\r\n    @Override\r\n    public SQLiteDatabase openOrCreateDatabase(String name, int mode, SQLiteDatabase.CursorFactory factory) {\r\n        return mTrulyapp.get().openOrCreateDatabase(name, mode, factory);\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean deleteDatabase(String name) {\r\n        return mTrulyapp.get().deleteDatabase(name);\r\n    }\r\n\r\n    @Override\r\n    public File getDatabasePath(String name) {\r\n        return mTrulyapp.get().getDatabasePath(name);\r\n    }\r\n\r\n    @Override\r\n    public String[] databaseList() {\r\n        return mTrulyapp.get().databaseList();\r\n    }\r\n\r\n    @Override\r\n    public Drawable getWallpaper() {\r\n        return mTrulyapp.get().getWallpaper();\r\n    }\r\n\r\n    @Override\r\n    public void setWallpaper(InputStream data) throws IOException {\r\n        mTrulyapp.get().setWallpaper(data);\r\n    }\r\n\r\n    @Override\r\n    public Drawable peekWallpaper() {\r\n        return mTrulyapp.get().peekWallpaper();\r\n    }\r\n\r\n    @Override\r\n    public int getWallpaperDesiredMinimumWidth() {\r\n        return mTrulyapp.get().getWallpaperDesiredMinimumWidth();\r\n    }\r\n\r\n    @Override\r\n    public int getWallpaperDesiredMinimumHeight() {\r\n        return mTrulyapp.get().getWallpaperDesiredMinimumHeight();\r\n    }\r\n\r\n    @Override\r\n    public void setWallpaper(Bitmap bitmap) throws IOException {\r\n        mTrulyapp.get().setWallpaper(bitmap);\r\n    }\r\n\r\n    @Override\r\n    public void clearWallpaper() throws IOException {\r\n        mTrulyapp.get().clearWallpaper();\r\n    }\r\n\r\n    @Override\r\n    public void startActivity(Intent intent) {\r\n        mTrulyapp.get().startActivity(intent);\r\n    }\r\n\r\n    @Override\r\n    public void sendBroadcast(Intent intent) {\r\n        mTrulyapp.get().sendBroadcast(intent);\r\n    }\r\n\r\n    @Override\r\n    public void sendBroadcast(Intent intent, String receiverPermission) {\r\n        mTrulyapp.get().sendBroadcast(intent, receiverPermission);\r\n    }\r\n\r\n    @Override\r\n    public void sendOrderedBroadcast(Intent intent, String receiverPermission) {\r\n        mTrulyapp.get().sendOrderedBroadcast(intent, receiverPermission);\r\n    }\r\n\r\n    @Override\r\n    public void sendOrderedBroadcast(Intent intent, String receiverPermission, BroadcastReceiver resultReceiver, Handler scheduler, int initialCode, String initialData, Bundle initialExtras) {\r\n        mTrulyapp.get().sendOrderedBroadcast(intent, receiverPermission, resultReceiver, scheduler, initialCode, initialData, initialExtras);\r\n    }\r\n\r\n    @Override\r\n    public void sendStickyBroadcast(Intent intent) {\r\n        mTrulyapp.get().sendStickyBroadcast(intent);\r\n    }\r\n\r\n    @Override\r\n    public Intent registerReceiver(BroadcastReceiver receiver, IntentFilter filter) {\r\n        return mTrulyapp.get().registerReceiver(receiver, filter);\r\n    }\r\n\r\n    @Override\r\n    public Intent registerReceiver(BroadcastReceiver receiver, IntentFilter filter, String broadcastPermission, Handler scheduler) {\r\n        return mTrulyapp.get().registerReceiver(receiver, filter, broadcastPermission, scheduler);\r\n    }\r\n\r\n    @Override\r\n    public void unregisterReceiver(BroadcastReceiver receiver) {\r\n        mTrulyapp.get().unregisterReceiver(receiver);\r\n    }\r\n\r\n    @Override\r\n    public ComponentName startService(Intent service) {\r\n        return mTrulyapp.get().startService(service);\r\n    }\r\n\r\n    @Override\r\n    public boolean stopService(Intent name) {\r\n        return mTrulyapp.get().stopService(name);\r\n    }\r\n\r\n    @Override\r\n    public boolean bindService(Intent service, ServiceConnection conn, int flags) {\r\n        return mTrulyapp.get().bindService(service, conn, flags);\r\n    }\r\n\r\n    @Override\r\n    public void unbindService(ServiceConnection conn) {\r\n        mTrulyapp.get().unbindService(conn);\r\n    }\r\n\r\n    @Override\r\n    public boolean startInstrumentation(ComponentName className, String profileFile, Bundle arguments) {\r\n        return mTrulyapp.get().startInstrumentation(className, profileFile, arguments);\r\n    }\r\n\r\n    @Override\r\n    public Object getSystemService(String name) {\r\n        return mTrulyapp.get().getSystemService(name);\r\n    }\r\n\r\n    @Override\r\n    public int checkPermission(String permission, int pid, int uid) {\r\n        return mTrulyapp.get().checkPermission(permission, pid, uid);\r\n    }\r\n\r\n    @Override\r\n    public int checkCallingPermission(String permission) {\r\n        return mTrulyapp.get().checkCallingPermission(permission);\r\n    }\r\n\r\n    @Override\r\n    public int checkCallingOrSelfPermission(String permission) {\r\n        return mTrulyapp.get().checkCallingOrSelfPermission(permission);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void enforcePermission(String permission, int pid, int uid, String message) {\r\n        mTrulyapp.get().enforcePermission(permission, pid, uid, message);\r\n    }\r\n\r\n    @Override\r\n    public void enforceCallingPermission(String permission, String message) {\r\n        mTrulyapp.get().enforceCallingPermission(permission, message);\r\n    }\r\n\r\n    @Override\r\n    public void enforceCallingOrSelfPermission(String permission, String message) {\r\n        mTrulyapp.get().enforceCallingOrSelfPermission(permission, message);\r\n    }\r\n\r\n    @Override\r\n    public void grantUriPermission(String toPackage, Uri uri, int modeFlags) {\r\n        mTrulyapp.get().grantUriPermission(toPackage, uri, modeFlags);\r\n    }\r\n\r\n    @Override\r\n    public void revokeUriPermission(Uri uri, int modeFlags) {\r\n        mTrulyapp.get().revokeUriPermission(uri, modeFlags);\r\n    }\r\n\r\n    @Override\r\n    public int checkUriPermission(Uri uri, int pid, int uid, int modeFlags) {\r\n        return mTrulyapp.get().checkUriPermission(uri, pid, uid, modeFlags);\r\n    }\r\n\r\n    @Override\r\n    public int checkCallingUriPermission(Uri uri, int modeFlags) {\r\n        return mTrulyapp.get().checkCallingUriPermission(uri, modeFlags);\r\n    }\r\n\r\n    @Override\r\n    public int checkCallingOrSelfUriPermission(Uri uri, int modeFlags) {\r\n        return mTrulyapp.get().checkCallingOrSelfUriPermission(uri, modeFlags);\r\n    }\r\n\r\n    @Override\r\n    public int checkUriPermission(Uri uri, String readPermission, String writePermission, int pid, int uid, int modeFlags) {\r\n        return mTrulyapp.get().checkUriPermission(uri, readPermission, writePermission, pid, uid, modeFlags);\r\n    }\r\n\r\n    @Override\r\n    public void enforceUriPermission(Uri uri, int pid, int uid, int modeFlags, String message) {\r\n        mTrulyapp.get().enforceUriPermission(uri, pid, uid, modeFlags, message);\r\n    }\r\n\r\n    @Override\r\n    public void enforceCallingUriPermission(Uri uri, int modeFlags, String message) {\r\n        mTrulyapp.get().enforceCallingUriPermission(uri, modeFlags, message);\r\n    }\r\n\r\n    @Override\r\n    public void enforceCallingOrSelfUriPermission(Uri uri, int modeFlags, String message) {\r\n        mTrulyapp.get().enforceCallingOrSelfUriPermission(uri, modeFlags, message);\r\n    }\r\n\r\n    @Override\r\n    public void enforceUriPermission(Uri uri, String readPermission, String writePermission, int pid, int uid, int modeFlags, String message) {\r\n        mTrulyapp.get().enforceUriPermission(uri, readPermission, writePermission, pid, uid, modeFlags, message);\r\n    }\r\n\r\n    @Override\r\n    public Context createPackageContext(String packageName, int flags) throws PackageManager.NameNotFoundException {\r\n        return mTrulyapp.get().createPackageContext(packageName, flags);\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n然后调用`AuthUtils.getAS(new ApplicationProxy(application), UUID.randomUUID().toString())`就没有问题了。  \r\n# API List\r\n## 获得指定用户信息\r\n未完待续...~~(其实是博主懒得写)~~  \r\n如果你等不及要试用一下酷安的api，请[关注这个项目](https://github.com/w568w/CoolapkSDK)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","cover":"","link":"research-on-coolapk-api.html","preview":"\u003cp\u003e祝各位新年快乐！\u003c/p\u003e\n","title":"酷安API的相关研究和整理"},{"content":"\r\n# 引子\r\n在写净眼(一个Xposed模块)时，遇到一个问题，App本体的设置参数如何传给Hook类？  \r\n之前我一直用的是文件读写的方式，但在调试中我发现：如果被Hook的应用本身无此权限，那么就无法读到这个文件。  \r\n经过多次(两三个小时而已)的查找，找到了一个解决方案。  \r\n# XSharedPreferences\r\nXSharedPreferences是XposedBridge的一部分。它可以读取任意应用的SharedPreferences。  \r\n於是就可以在App本体中写入SharedPreferences，然后从Hook类中读取...  \r\n程序本体中：  \r\n```\r\n        SharedPreferences mSharedPreferences = getSharedPreferences(\"data\", Context.MODE_WORLD_READABLE);\r\n        data.edit().putString(\"test\",\"something\");\r\n```\r\nXposed Hook类中：  \r\n```\r\n        XSharedPreferences xSP=new XSharedPreferences(\"ml.w568w.test\",\"data\");\r\n        xSP.reload();\r\n        xSP.makeWorldReadable();\r\n        String test = xSP.getString(\"test\", \"\");\r\n```\r\n# 注意\r\n1. **必须**使用`Context.MODE_WORLD_READABLE`得到的`SharedPreferences`，`makeWorldReadable()`并不能让你可以随意限定`SharedPreferences`的读取权限。  \r\n2. 尽可能地不使用`PreferenceManager.getDefaultSharedPreferences(this);`或者`PreferenceActivity`得到的`SharedPreferences`（我在这里被坑了好久...）  \r\n3. 即便这么做，获得的`XSharedPreferences`仍然是只读的...因此，Hook类依旧不能向模块本体传递信息...\r\n","cover":"","link":"a-tiring-xposed-problem.html","preview":"\u003cp\u003eXposed是无底的巨坑\u003c/p\u003e\n","title":"Xposed模块本体向Hook类传递信息的研究"},{"content":"\r\n![Photo by Brett Ritchie on Unsplash](images/brett-ritchie-550788-unsplash.jpg)\r\n# This is w568w.\r\n一个热衷于Android开发的高中生，Life is short , I choose Geek.\r\n# 你的博客呢？  \r\nemmm，美国最大主机提供商倒闭了  \r\n王八蛋王八蛋主机商吃喝嫖赌吃喝嫖赌  \r\n欠下了欠下了3.5亿  \r\n带着我的网站和数据库跑了  \r\n我们没有没有没有办法办法  \r\n用GitHub Pages临时临时搭个站点   \r\n原价都是100多 200多 300多的站点 统统20块  \r\n20块20块统统20块 统统统统统统20块   \r\n我们辛辛苦苦写了 辛辛苦苦给你给你写了大半年  \r\n你你你不给不给备份 你还我还我血汗钱  \r\n还我血汗钱!\\_(:зゝ∠)\\_  \r\n \r\n  \r\n咳咳，不胡闹了。简单地说，我的主机商OpenShift最近对系统进行了一次全面升级，所有原有的网站都需要进行升级手续，逾期将清空网站数据。然而我并没有注意到这则通知，于是就悲催了。。。\r\n# 所以最近在干啥？\r\n学习啊，学习使我快樂。  \r\n如果有时间的话，可能还会进行  \r\n* 一些对APP简单的填坑  \r\n* 筹备新博客  \r\n* 挖新坑  \r\n# 怎么找到你捏？\r\n还是老法子  \r\n企鹅号：1278297578  \r\n百度号：1278297578  \r\nGitHub：@w568w   \r\nEmail：1278297578(at)qq.com   \r\n# 友情链接\r\n只是做个备忘~~  \r\n[聞道博客](http://wendao123.cn/)\r\n[853](http://blog.853lab.com/)\r\n","cover":"images/brett-ritchie-550788-unsplash.jpg","link":"myself.html","preview":"\u003cp\u003e新的博客，新的開始\u003c/p\u003e\n","title":"我與世界"}]