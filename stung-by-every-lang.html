<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=1" />
<meta name="renderer" content="webkit" />
<meta name="google" value="notranslate" />
<meta name="robots" content="index,follow" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="行云小站" />
<meta name="twitter:description" content="Say hello to you!" />
<meta name="twitter:image:src" content="https://w568w.eu.org/images/avatar.gif" />

<meta property="og:url" content="https://w568w.eu.org" />
<meta property="og:title" content="行云小站" />
<meta property="og:description" content="Say hello to you!" />
<meta property="og:site_name" content="行云小站" />
<meta property="og:image" content="https://w568w.eu.org/images/avatar.gif" />
<meta property="og:type" content="website" />
<meta name="robots" content="noodp" />

<meta itemprop="name" content="行云小站" />
<meta itemprop="description" content="Say hello to you!" />
<meta itemprop="image" content="https://w568w.eu.org/images/avatar.gif" />

<link rel="canonical" href="https://w568w.eu.org" />

<link rel="shortcut icon" href="/favicon.png" />
<link rel="apple-itouch-icon" href="/favicon.png" />
<link rel="stylesheet" href="/bundle/index.css" />

<script type="text/javascript">
    var timeSinceLang = {
        year: '年前',
        month: '个月前',
        day: '天前',
        hour: '小时前',
        minute: '分钟前',
        second: '秒前'
    };
    var root = '';
</script>



<script async src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-y/lazyload/2.0.3/lazyload-min.js"></script>

<script async src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-d/mdui/1.0.2/js/mdui.min.js"></script>
<link async href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-d/mdui/1.0.2/css/mdui.min.css" rel="stylesheet"></link>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script id="MathJax-script" async src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-d/mathjax/3.2.0/es5/tex-mml-chtml.min.js"></script>



    <meta name="keywords" content="">
    <meta name="description" content="[EN] Stung by Every Language">
    <meta name="author" content="w568w">
    <style>
        @media (max-width: 767px) {
            .mdui-card {
                width: auto;
            }
        }
        
        @media only screen and (min-width: 768px) {
            .mdui-card {
                width: max-content;
            }
        }
    </style>
    <title>[EN] Stung by Every Language</title>
</head>

<body class=" mdui-theme-primary-indigo mdui-theme-accent-pink">
    <article class="container">
        <script>
    var _hmt = _hmt || [];
    (function () {
        let hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ce65555016ddd913f5a39a943e2df6a4";
        let s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s)
    })();
</script>

<script>
    
    document.documentElement.style.setProperty('--animate-duration', '.5s');
    
    document.addEventListener("onload", function () {
        const now = new Date();
        if ((now.getMonth() === 11 && now.getDate() === 13) ||
            (now.getFullYear() === 2020 && now.getMonth() === 3 && now.getDate() === 4)) {
            document.body.setAttribute("style", "-webkit-filter: grayscale(100%);-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);_filter:none");
        }
    })

    
    function search_close() {
        let searchBar = document.querySelector("#search");
        let closeBarEvent = new Event('input', {
            bubbles: true
        });
        closeBarEvent.simulated = true;
        searchBar.value = '';
        searchBar.dispatchEvent(closeBarEvent);
    }
</script>
<header>
    
    <div class="mdui-appbar mdui-appbar-scroll-hide">
        <div class="mdui-toolbar mdui-color-theme">
            <a class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#left-drawer'}">
                <i class="mdui-icon material-icons">
                    menu
                </i>
            </a>
            <a href="/" class="mdui-typo-title">
                行云小站
            </a>
            <div class="mdui-toolbar-spacer">
            </div>
            <div class="mdui-textfield mdui-textfield-expandable mdui-float-right">
                <button class="mdui-textfield-icon mdui-btn mdui-btn-icon"><i
                        class="mdui-icon material-icons">search</i></button>
                <input id="search" class="mdui-textfield-input" type="text" placeholder="搜索" onchange=""/>
                <button class="mdui-textfield-close mdui-btn mdui-btn-icon" onclick="search_close()"><i
                        class="mdui-icon material-icons">close</i></button>
            </div>
            <a href="javascript:location.reload()" class="mdui-btn mdui-btn-icon">
                <i class="mdui-icon material-icons">
                    refresh
                </i>
            </a>
        </div>
    </div>
</header>
<div class="mdui-drawer mdui-drawer-close" id="left-drawer">
    <div class="mdui-grid-tile">
        <img loading="lazy" src="https://source.unsplash.com/random/400x300"/>
        <div class="mdui-grid-tile-actions">
            <div class="mdui-grid-tile-text">
                <div class="mdui-grid-tile-title">行云小站</div>
                <div class="mdui-grid-tile-subtitle">Say hello to you!</div>
                <div class="mdui-grid-tile-subtitle" style="font-size:11px !important;">图片来自 <a
                        href="https://source.unsplash.com/" style="color:white;text-decoration:underline">@Unsplash</a>
                </div>

            </div>
        </div>
    </div>
    <div class="mc-drawer mdui-list" style="margin-bottom: 76px;">
        <a href="/">
            <li class="mdui-list-item mdui-ripple">
                <i class="mdui-icon material-icons mdui-list-item-icon">
                    home
                </i>
                <div class="mdui-list-item-content">

                    主页

                </div>
            </li>
        </a>
        <a href="/archive.html">
            <li class="mdui-list-item mdui-ripple">
                <i class="mdui-icon material-icons mdui-list-item-icon">
                    archive
                </i>
                <div class="mdui-list-item-content">

                    所有文章

                </div>
            </li>
        </a>
        <a href="/tag.html">
            <li class="mdui-list-item mdui-ripple">
                <i class="mdui-icon material-icons mdui-list-item-icon">
                    apps
                </i>
                <div class="mdui-list-item-content">

                    标签

                </div>
            </li>
        </a>
        <a href="/gays.html">
            <li class="mdui-list-item mdui-ripple">

                <i class="mdui-icon material-icons mdui-list-item-icon">
                    people
                </i>
                <div class="mdui-list-item-content">

                    好基友

                </div>

            </li>
        </a>
        <a href="/about.w568w.html">
            <li class="mdui-list-item mdui-ripple">
                <i class="mdui-icon material-icons mdui-list-item-icon">
                    account_circle
                </i>
                <div class="mdui-list-item-content">

                    关于我

                </div>
            </li>
        </a>
        
        <a href="/atom.xml">
            <li class="mdui-list-item mdui-ripple">

                <i class="mdui-icon material-icons mdui-list-item-icon">
                    rss_feed
                </i>
                <div class="mdui-list-item-content">

                    订阅

                </div>
            </li>
        </a>
        
        <li class="mdui-list-item mdui-ripple">


            <div class="mdui-list-item-content" style="font-size:12px">

                您的网页由&nbsp;<span id="cdn">Github Pages</span>&nbsp;提供

            </div>
        </li>
    </div>
    
</div>

        <div style="padding: 5% 0 5% 0; ">
            <div class="mdui-card" style="position: relative;margin: auto;">
                <div class="mdui-card-header">
                    <img class="mdui-card-header-avatar" src="/images/avatar.gif" /> <a class="mdui-card-header-title" href="/about.w568w.html">w568w</a> 
                    <span id="date" class="date mdui-card-header-subtitle" data-time="1749975420"><span
                        class="from">创建时间被隐藏</span></span>
                    

                </div>
                <article class="main article">
                    <div class="mdui-card-primary">
                        <div class="mdui-card-primary-title">[EN] Stung by Every Language</div>
                        <span class="mdui-card-primary-subtitle" id="busuanzi_container_page_pv">
                        本文已被读<span id="busuanzi_value_page_pv"></span>次
                        </span>
                    </div>
                    <div class="mdui-card-content">
                        
                        <section class="info">
                            <span class="tags"></span>
                        </section>
                        <article class="content"><nav>

<ul>
<li><a href="#toc_0">1. Rust</a></li>

<li><a href="#toc_1">2. Go</a></li>
</ul>

</nav>
<p><img data-src="images/languages.webp" src="data:image/gif;base64,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" alt="Image by: &lt;a href=https://www.flickr.com/photos/isipeoria/6691167811&gt;isipeoria&lt;/a&gt;, CC BY-NC-ND 2.0" data-src="images/languages.webp" /></p>

<p>Ever since entering university, one of my pleasures has been browsing online, randomly picking up recent programming languages, delving into their features, often hoping to find those &ldquo;dream features&rdquo; I&rsquo;ve envisioned, and attempting to build something practical with them.</p>

<p>Over the course of several years exploring this space, I&rsquo;ve gradually come to the realization that <strong>every language has its flaws</strong>. A language that looks promising at first glance will soon reveal its less-than-ideal aspects, even those lauded as &ldquo;elegant&rdquo; or &ldquo;highly modern.&rdquo; My watchlist is now overflowing with such languages. To keep myself from forgetting these issues and potentially falling back into being stung by them, I&rsquo;ve decided to jot down these languages&rsquo; hidden frustrations.</p>

<blockquote>
<p>(Here is where a meme should be, saying: &ldquo;<em>You decide to pick up a game you haven&rsquo;t played in a year. Ten minutes later, you finally remember why you stopped playing.</em>&rdquo;)</p>
</blockquote>

<p>Consider this blog post a pure rant, and solely reflecting my <em>personal</em> views, as I&rsquo;m not deeply familiar with most languages, nor do I intend to spend months thoroughly researching each one. And I&rsquo;ll intentionally conflate issues of the toolchain and ecosystem with those of the language itself. I&rsquo;ve typically only written simple numerical or GUI programs in each, quickly moving on afterward. So, if anything I say rubs you the wrong way, feel free to tell me!</p>

<p>Additionally, some pain points recur across several languages. In such cases, I&rsquo;ll elaborate on them only when discussing the first language they appear in, and merely touch upon them later.</p>

<h1 id="toc_0">1. Rust</h1>

<p>Rust has become a blend of religious fervor and a bit of a witch hunt: some see it as a silver bullet, while others view it as a modern blight and the embodiment of rotten academic ideas, needlessly adding too much complexity. Meanwhile, the majority are quietly using it to build tools and applications.</p>

<p>Despite all the hype and criticism, I have to say that <strong>one of the reasons I feel most confident about an open-source project&rsquo;s quality</strong> (the other being <code>100% Go</code>, which I&rsquo;ll explain later) is <strong>if it&rsquo;s <code>100% Rust</code></strong>. Such projects are typically well-maintained, behave predictably, and are incredibly robust against various erroneous inputs.</p>

<p>(🤦 In contrast, a <code>100% C/C++</code> project often feels like being told: &ldquo;<em>Get ready to download thirty git submodules, then install autotools, visual studio, meson, cmake, xmake, make, or whatever, then pray I haven&rsquo;t relied on features, functions, keywords, or macros specific to a particular compiler, third-party library or Linux kernel version, be prepared to turn off all the compiler warnings and suppress errors because my executable will literally link to EVERYTHING in your system&rsquo;s <code>lib</code> directories, and finally, enjoy my software!</em>&rdquo;)</p>

<p>But anyway, getting back on track. While I am a Rust supporter myself, there are still aspects of Rust that I find uncomfortable:</p>

<p><strong>Lack of specialization.</strong> You cannot implement a trait for <code>MyVec&lt;T&gt;</code> and then specialize it for <code>MyVec&lt;i32&gt;</code>. This is a common feature in many languages, including C++. It allows you to write generic code while still being able to optimize for specific types.</p>

<p>There is a <a href="https://github.com/rust-lang/rust/issues/31844">RFC</a> for it, but it has been stalled for years. The workaround? Go nightly and enable the <code>specialization</code> feature. But this is not a solution, as it is not stable and will unlikely be in the recent future.</p>

<p><strong>Error and async have colors.</strong> When you&rsquo;re defining a trait for others to use, its signature can severely limit what implementations can do. For example, if you write <code>Foo</code>:</p>

<pre><code class="language-rust">trait Foo {
    fn foo(&amp;self) -&gt; i32;
}
</code></pre>

<p>But then someone complains that their <code>Foo</code> is fallible, so you introduce <code>TryFoo</code>:</p>

<pre><code class="language-rust">trait TryFoo {
    fn try_foo(&amp;self) -&gt; Result&lt;i32, Box&lt;dyn Error&gt;&gt;;
}
</code></pre>

<p>But wait, someone else needs their <code>Foo</code> operation to be asynchronous, leading you to create <code>AsyncFoo</code>:</p>

<pre><code class="language-rust">#[async_trait::async_trait]
trait AsyncFoo {
    async fn async_foo(&amp;self) -&gt; i32;
}
</code></pre>

<p>Ans don&rsquo;t forget <code>TryAsyncFoo</code>! Now, for what was originally just one concept, you might end up needing to declare four different traits. This is ridiculous. A viable solution would be to <a href="https://github.com/rosefromthedead/effing-mad">introduce something like algebraic effects</a>, but that is a whole different topic.</p>

<p><strong>Complex macro system.</strong> Macros are powerful, and everyone loves using them. But have you ever heard of a programming language with so many different types of macros? I&rsquo;m talking about <em>declarative macros</em>, and <em>procedural macros</em> (which further split into <em>function-like</em>, <em>attribute</em>, and <em>derive macros</em>).</p>

<p>For each type, you need to learn and remember complex helper tools, syntax rules, and new concepts, figure out <a href="https://veykril.github.io/tlborm/syntax-extensions/hygiene.html">what &ldquo;Hygiene&rdquo; is</a>, and how to debug a macro expansion. Creating a procedural macro inevitably means creating a new crate and learning how to use libraries like <code>proc-macro2</code>, <code>quote</code>, and <code>syn</code>.</p>

<p>As for complex macro functions, they eventually devolve into an AST parsing, traversal, and manipulation hell that no one, except the original author, can really understand or maintain. (Usually even the original author can&rsquo;t understand it anymore, and they have to spend hours trying to remember what they were thinking when they wrote it.)</p>

<p>Despite excellent resources like <a href="https://veykril.github.io/tlborm/"><em>The Little Book of Rust Macros</em></a>, which attempts to explain these concepts clearly, I still find it regrettable that Rust doesn&rsquo;t make these things easily understandable for a novice. For beginners, how things like <code>println!</code> actually work under the hood remains a mystery. And to understand the internals, they have to climb the entire Rust &ldquo;mountain&rdquo; and read various blogs and tutorials on macros. By then, however, they are no longer beginners. <sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup></p>

<p><strong>Slow type checking.</strong> I know this is tied to Rust&rsquo;s complexity—every save requires running the borrow checker, expanding all macros, completing all type inference, and meticulously checking the code to provide those insightful error messages—but I sometimes still feel the check process is a bit slow.</p>

<p>What I mean is, they <em>have</em> optimized it really well. But look at Zig (with <a href="https://github.com/zigtools/zls">zls</a>) and Go – they can provide error feedback almost instantly (&lt;=100ms), which really boosts development comfort. In contrast, Rust analyzer typically takes several seconds to check a medium-sized file. This transforms the &ldquo;write code - review code&rdquo; loop into a &ldquo;write code - save file - hands off keyboard while waiting for <code>cargo check</code> - check and fix errors - review code&rdquo; loop. For some people doing actual coding (like myself), this can feel a bit uncomfortable.</p>

<h1 id="toc_1">2. Go</h1>

<p>Go is a language I have a love-hate relationship with. I love its simplicity, its focus on concurrency, and its excellent tooling. Damn, <code>go build</code> is a godsend after dealing with CMake, autotools, and other sh*ts.</p>

<p>Its &ldquo;<em>errors are return values</em>&rdquo; philosophy is a breath of fresh air compared to the exceptions and try-catch blocks of other languages. And it has proved that even without rigorous error systems like Rust and Haskell, you can still write simple and maintainable code. It does find a good balance between simplicity and robustness.</p>

<p>But sometimes it is just way too simple.</p>

<p><strong>Wrong type abstraction.</strong> Go models error returns using a <em>product</em> type – essentially a tuple of <code>(Value, Error)</code> – when arguably, the correct approach is a <em>sum</em> type, representing <em>either</em> a <code>Value</code> <em>or</em> an <code>Error</code>.</p>

<p>Compared to simply returning an error, you now have to write <code>return 0, err</code>, <code>return &quot;&quot;, err</code>, or <code>return nil, err</code>. This is awkward.</p>

<blockquote>
<p>I guess someone will argue, &ldquo;But what about the case where you <em>do</em> have both a value and an error? Go&rsquo;s approach is more flexible!&rdquo;</p>

<p>And my point is, that specific situation requires a more complex sum type representing <em>either</em> a <code>Value</code> <em>or</em> an <code>Error</code> <em>or</em> <code>(PartialValue, Error)</code>. A simple <code>(Value, Error)</code> tuple as the <em>standard</em> way to represent success <em>or</em> failure isn&rsquo;t the right model. Even if, by coincidence, the <code>(Value, Error)</code> tuple <em>can</em> represent three different states, you still have to explicitly check for <code>value != nil &amp;&amp; error == nil</code>, <code>value == nil &amp;&amp; error != nil</code>, and potentially <code>value != nil &amp;&amp; error != nil</code> later on.<br>
See what&rsquo;s happening? You&rsquo;re effectively reinventing a sum type and the simple pattern matching that comes with it.</p>
</blockquote>

<p>You can see this limitation elsewhere as well. For example, you can&rsquo;t declare a pointer or interface return type that must be non-nil.</p>

<p><strong>Lack of optimization.</strong> Go is advertised as &ldquo;native&rdquo;, &ldquo;minimal&rdquo;, and &ldquo;fast&rdquo;. But in reality, it is not (at least for the last two points). Go does have basic optimizations, like escaping analysis and dead code elimination. But that&rsquo;s about it.</p>

<p>It has a simple GC: no young/old split, no moving, no bump pointer allocation. Latency is low, but throughput is not. Someone is <a href="https://discord.com/blog/why-discord-is-switching-from-go-to-rust">moving away from it</a> because of this. <sup class="footnote-ref" id="fnref:2"><a href="#fn:2">2</a></sup></p>

<p><strong>Generic type is a joke.</strong> I won&rsquo;t go into the details of this. You got my point.</p>

<hr>

<p>(To be continued, too lazy to write more right now 😅)</p>

<div class="footnotes">

<hr>

<ol>
<li id="fn:1">I know this example is controversial, as beginners in C/C++ and other languages also can&rsquo;t and shouldn&rsquo;t try to understand the internals of standard library functions like <code>printf</code> and <code>iostream</code>, but you get my point.</li>

<li id="fn:2">Though there are criticisms that Discord team never really reached out to the Go team for optimizing the rare cases on Go sides and just rewrote the whole thing in Rust with more performance consideration. But I&rsquo;m not in favor of this viewpoint: not everyone has the time and resources to communicate with the Go team to understand what they did wrong and who to blame. You are not Discord, nor am I. Are we supposed to just accept these performance degradations when dealing with the tail cases?</li>
</ol>

</div>
</article>
                        <section class="author">
                            
                            <div class="avatar" style="background-image: url(/images/avatar.gif);"></div>
                            <a class="name" href="/about.w568w.html">w568w</a>
                            <div class="intro">梦想改变自己的疯子。</div>
                        </section>
                        <section class="recommend">
                            
                            <section class="nav prev more">
                                <div class="head">上篇文章</div>
                                <a class="link" href="/todo-list.html">博主的Todo List</a>
                            </section>
                             
                            <section class="nav next more">
                                <div class="head">下篇文章</div>
                                <a class="link" href="/native-gui-framework.html">通往原生 GUI 之路</a>
                            </section>
                            
                        </section>
                        
<script src='valine.min.js'></script>
<div id="vcomments"></div>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'rBgBHYPODKNk0l5jgkDv8BOK-gzGzoHsz',
        appKey: 'fWXOf7hW3WBv4Q8sfuDU6KO0'
    })
</script>

                </article>
                </div>
            </div>
        </div>
    </article>
    <footer class="footer">
    <span class="copyright">
        行云小站 © 2015 - <text id="thisyear"></text>
        <script type="text/javascript">
            document.getElementById("thisyear").innerHTML = new Date().getFullYear();
        </script>
        使用<a href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh" rel="noreferrer">CC BY-NC 4.0协议</a>
    </span>

    <span class="publish">自豪地使用 <a href="http://www.inkpaper.io/index-zh.html" target="_blank" rel="noreferrer">Ink</a>
        和 <a href="https://github.com/w568w/InkMaterialTheme" target="_blank" rel="noreferrer">InkMaterial</a> 主题</span>
</footer>
    <script src="/bundle/index.js"></script>
</body>

</html>